!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.L={})}(this,function(t){"use strict";function e(t){for(var e,i,o=1,n=arguments.length;o<n;o++)for(e in i=arguments[o])t[e]=i[e];return t}var i=Object.create||function(t){return o.prototype=t,new o};function o(){}function n(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var o=i.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(i.call(arguments)):arguments)}}var s=0;function a(t){return t._leaflet_id=t._leaflet_id||++s,t._leaflet_id}function r(t,e,i){var o,n,s=function(){o=!1,n&&(a.apply(i,n),n=!1)},a=function(){o?n=arguments:(t.apply(i,arguments),setTimeout(s,e),o=!0)};return a}function l(t,e,i){var o=e[1],n=e[0],s=o-n;return t===o&&i?t:((t-n)%s+s)%s+n}function c(){return!1}function h(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function d(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function u(t){return d(t).split(/\s+/)}function p(t,e){for(var o in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{}),e)t.options[o]=e[o];return t.options}function m(t,e,i){var o=[];for(var n in t)o.push(encodeURIComponent(i?n.toUpperCase():n)+"="+encodeURIComponent(t[n]));return(e&&-1!==e.indexOf("?")?"&":"?")+o.join("&")}var f=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(f,function(t,i){var o=e[i];if(void 0===o)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})}var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function x(t){var e=+new Date,i=Math.max(0,16-(e-b));return b=e+i,window.setTimeout(t,i)}var C=window.requestAnimationFrame||w("RequestAnimationFrame")||x,$=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function P(t,e,i){if(!i||C!==x)return C.call(window,n(t,e));t.call(e)}function S(t){t&&$.call(window,t)}var k={extend:e,create:i,bind:n,lastId:s,stamp:a,throttle:r,wrapNum:l,falseFn:c,formatNum:h,trim:d,splitWords:u,setOptions:p,getParamString:m,template:g,isArray:_,indexOf:v,emptyImageUrl:y,requestFn:C,cancelFn:$,requestAnimFrame:P,cancelAnimFrame:S};function T(){}T.extend=function(t){function o(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var n=o.__super__=this.prototype,s=i(n);for(var a in(s.constructor=o).prototype=s,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(o[a]=this[a]);return t.statics&&(e(o,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=_(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[s].concat(t.includes)),delete t.includes),s.options&&(t.options=e(i(s.options),t.options)),e(s,t),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;t<e;t++)s._initHooks[t].call(this)}},o},T.include=function(t){return e(this.prototype,t),this},T.mergeOptions=function(t){return e(this.prototype.options,t),this},T.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var A={on:function(t,e,i){if("object"==typeof t)for(var o in t)this._on(o,t[o],e);else for(var n=0,s=(t=u(t)).length;n<s;n++)this._on(t[n],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var o in t)this._off(o,t[o],e);else for(var n=0,s=(t=u(t)).length;n<s;n++)this._off(t[n],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var o=this._events[t];o||(o=[],this._events[t]=o),i===this&&(i=void 0);for(var n={fn:e,ctx:i},s=o,a=0,r=s.length;a<r;a++)if(s[a].fn===e&&s[a].ctx===i)return;s.push(n)},_off:function(t,e,i){var o,n,s;if(this._events&&(o=this._events[t]))if(e){if(i===this&&(i=void 0),o)for(n=0,s=o.length;n<s;n++){var a=o[n];if(a.ctx===i&&a.fn===e)return a.fn=c,this._firingCount&&(this._events[t]=o=o.slice()),void o.splice(n,1)}}else{for(n=0,s=o.length;n<s;n++)o[n].fn=c;delete this._events[t]}},fire:function(t,i,o){if(!this.listens(t,o))return this;var n=e({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var a=0,r=s.length;a<r;a++){var l=s[a];l.fn.call(l.ctx||this,n)}this._firingCount--}}return o&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var s=n(function(){this.off(t,e,i).off(t,s,i)},this);return this.on(t,e,i).on(t,s,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var M=T.extend(A);function B(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var z=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function E(t,e,i){return t instanceof B?t:_(t)?new B(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new B(t.x,t.y):new B(t,e,i)}function I(t,e){if(t)for(var i=e?[t,e]:t,o=0,n=i.length;o<n;o++)this.extend(i[o])}function N(t,e){return!t||t instanceof I?t:new I(t,e)}function j(t,e){if(t)for(var i=e?[t,e]:t,o=0,n=i.length;o<n;o++)this.extend(i[o])}function D(t,e){return t instanceof j?t:new j(t,e)}function O(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function R(t,e,i){return t instanceof O?t:_(t)&&"object"!=typeof t[0]?3===t.length?new O(t[0],t[1],t[2]):2===t.length?new O(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new O(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new O(t,e,i)}B.prototype={clone:function(){return new B(this.x,this.y)},add:function(t){return this.clone()._add(E(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(E(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new B(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new B(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=z(this.x),this.y=z(this.y),this},distanceTo:function(t){var e=(t=E(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=E(t)).x===this.x&&t.y===this.y},contains:function(t){return t=E(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}},I.prototype={extend:function(t){return t=E(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new B(this.min.x,this.max.y)},getTopRight:function(){return new B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t=("number"==typeof t[0]||t instanceof B?E:N)(t))instanceof I?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=N(t);var e=this.min,i=this.max,o=t.min,n=t.max,s=n.x>=e.x&&o.x<=i.x,a=n.y>=e.y&&o.y<=i.y;return s&&a},overlaps:function(t){t=N(t);var e=this.min,i=this.max,o=t.min,n=t.max,s=n.x>e.x&&o.x<i.x,a=n.y>e.y&&o.y<i.y;return s&&a},isValid:function(){return!(!this.min||!this.max)}},j.prototype={extend:function(t){var e,i,o=this._southWest,n=this._northEast;if(t instanceof O)i=e=t;else{if(!(t instanceof j))return t?this.extend(R(t)||D(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return o||n?(o.lat=Math.min(e.lat,o.lat),o.lng=Math.min(e.lng,o.lng),n.lat=Math.max(i.lat,n.lat),n.lng=Math.max(i.lng,n.lng)):(this._southWest=new O(e.lat,e.lng),this._northEast=new O(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,o=Math.abs(e.lat-i.lat)*t,n=Math.abs(e.lng-i.lng)*t;return new j(new O(e.lat-o,e.lng-n),new O(i.lat+o,i.lng+n))},getCenter:function(){return new O((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new O(this.getNorth(),this.getWest())},getSouthEast:function(){return new O(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=("number"==typeof t[0]||t instanceof O||"lat"in t?R:D)(t);var e,i,o=this._southWest,n=this._northEast;return t instanceof j?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=o.lat&&i.lat<=n.lat&&e.lng>=o.lng&&i.lng<=n.lng},intersects:function(t){t=D(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),n=t.getNorthEast(),s=n.lat>=e.lat&&o.lat<=i.lat,a=n.lng>=e.lng&&o.lng<=i.lng;return s&&a},overlaps:function(t){t=D(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),n=t.getNorthEast(),s=n.lat>e.lat&&o.lat<i.lat,a=n.lng>e.lng&&o.lng<i.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=D(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var F,Z={latLngToPoint:function(t,e){var i=this.projection.project(t),o=this.scale(e);return this.transformation._transform(i,o)},pointToLatLng:function(t,e){var i=this.scale(e),o=this.transformation.untransform(t,i);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new I(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!(O.prototype={equals:function(t,e){return!!t&&(t=R(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+h(this.lat,t)+", "+h(this.lng,t)+")"},distanceTo:function(t){return J.distance(this,R(t))},wrap:function(){return J.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return D([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new O(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new O(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),o=e.lat-i.lat,n=e.lng-i.lng;if(0==o&&0==n)return t;var s=t.getSouthWest(),a=t.getNorthEast();return new j(new O(s.lat-o,s.lng-n),new O(a.lat-o,a.lng-n))}},J=e({},Z,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,o=t.lat*i,n=e.lat*i,s=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lng-t.lng)*i/2),r=s*s+Math.cos(o)*Math.cos(n)*a*a,l=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return this.R*l}}),H=6378137,U={R:H,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),n=Math.sin(o*e);return new B(this.R*t.lng*e,this.R*Math.log((1+n)/(1-n))/2)},unproject:function(t){var e=180/Math.PI;return new O((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:new I([-(F=H*Math.PI),-F],[F,F])};function q(t,e,i,o){if(_(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=o}function W(t,e,i,o){return new q(t,e,i,o)}q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new B((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var V,G=e({},J,{code:"EPSG:3857",projection:U,transformation:W(V=.5/(Math.PI*U.R),.5,-V,.5)}),Y=e({},G,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){for(var i,o,n,s,a="",r=0,l=t.length;r<l;r++){for(i=0,o=(n=t[r]).length;i<o;i++)a+=(i?"L":"M")+(s=n[i]).x+" "+s.y;a+=e?At?"z":"x":""}return a||"M0 0"}var X=document.documentElement.style,tt="ActiveXObject"in window,et=tt&&!document.addEventListener,it="msLaunchUri"in navigator&&!("documentMode"in document),ot=Bt("webkit"),nt=Bt("android"),st=Bt("android 2")||Bt("android 3"),at=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=nt&&Bt("Google")&&at<537&&!("AudioNode"in window),lt=!!window.opera,ct=!it&&Bt("chrome"),ht=Bt("gecko")&&!ot&&!lt&&!tt,dt=!ct&&Bt("safari"),ut=Bt("phantom"),pt="OTransition"in X,mt=0===navigator.platform.indexOf("Win"),ft=tt&&"transition"in X,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!st,_t="MozPerspective"in X,vt=!window.L_DISABLE_3D&&(ft||gt||_t)&&!pt&&!ut,yt="undefined"!=typeof orientation||Bt("mobile"),wt=yt&&ot,bt=yt&&gt,xt=!window.PointerEvent&&window.MSPointerEvent,Ct=!(!window.PointerEvent&&!xt),$t=!window.L_NO_TOUCH&&(Ct||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Pt=yt&&lt,St=yt&&ht,Lt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),kt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t}(),Tt=!!document.createElement("canvas").getContext,At=!(!document.createElementNS||!K("svg").createSVGRect),Mt=!At&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Bt(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var zt={ie:tt,ielt9:et,edge:it,webkit:ot,android:nt,android23:st,androidStock:rt,opera:lt,chrome:ct,gecko:ht,safari:dt,phantom:ut,opera12:pt,win:mt,ie3d:ft,webkit3d:gt,gecko3d:_t,any3d:vt,mobile:yt,mobileWebkit:wt,mobileWebkit3d:bt,msPointer:xt,pointer:Ct,touch:$t,mobileOpera:Pt,mobileGecko:St,retina:Lt,passiveEvents:kt,canvas:Tt,svg:At,vml:Mt},Et=xt?"MSPointerDown":"pointerdown",It=xt?"MSPointerMove":"pointermove",Nt=xt?"MSPointerUp":"pointerup",jt=xt?"MSPointerCancel":"pointercancel",Dt={},Ot=!1;function Rt(t,e,i,o){function s(t){Ht(t,r)}var a,r,l,c,h,d,u,p;function m(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ht(t,c)}return"touchstart"===e?(h=t,d=i,u=o,p=n(function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&je(t),Ht(t,d)}),h["_leaflet_touchstart"+u]=p,h.addEventListener(Et,p,!1),Ot||(document.addEventListener(Et,Ft,!0),document.addEventListener(It,Zt,!0),document.addEventListener(Nt,Jt,!0),document.addEventListener(jt,Jt,!0),Ot=!0)):"touchmove"===e?(c=i,(l=t)["_leaflet_touchmove"+o]=m,l.addEventListener(It,m,!1)):"touchend"===e&&(r=i,(a=t)["_leaflet_touchend"+o]=s,a.addEventListener(Nt,s,!1),a.addEventListener(jt,s,!1)),this}function Ft(t){Dt[t.pointerId]=t}function Zt(t){Dt[t.pointerId]&&(Dt[t.pointerId]=t)}function Jt(t){delete Dt[t.pointerId]}function Ht(t,e){for(var i in t.touches=[],Dt)t.touches.push(Dt[i]);t.changedTouches=[t],e(t)}var Ut,qt,Wt,Vt,Gt,Yt,Kt=xt?"MSPointerDown":Ct?"pointerdown":"touchstart",Qt=xt?"MSPointerUp":Ct?"pointerup":"touchend",Xt="_leaflet_",te=ge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ee=ge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ie="webkitTransition"===ee||"OTransition"===ee?ee+"End":"transitionend";function oe(t){return"string"==typeof t?document.getElementById(t):t}function ne(t,e){var i,o=t.style[e]||t.currentStyle&&t.currentStyle[e];return o&&"auto"!==o||!document.defaultView||(o=(i=document.defaultView.getComputedStyle(t,null))?i[e]:null),"auto"===o?null:o}function se(t,e,i){var o=document.createElement(t);return o.className=e||"",i&&i.appendChild(o),o}function ae(t){var e=t.parentNode;e&&e.removeChild(t)}function re(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ce(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=me(t);return 0<i.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function de(t,e){var i;if(void 0!==t.classList)for(var o=u(e),n=0,s=o.length;n<s;n++)t.classList.add(o[n]);else he(t,e)||pe(t,((i=me(t))?i+" ":"")+e)}function ue(t,e){void 0!==t.classList?t.classList.remove(e):pe(t,d((" "+me(t)+" ").replace(" "+e+" "," ")))}function pe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function me(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function fe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,o="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(o)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}(t,e)}function ge(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function _e(t,e,i){var o=e||new B(0,0);t.style[te]=(ft?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(i?" scale("+i+")":"")}function ve(t,e){t._leaflet_pos=e,vt?_e(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ye(t){return t._leaflet_pos||new B(0,0)}function we(){Le(window,"dragstart",je)}function be(){Te(window,"dragstart",je)}function xe(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ce(),Yt=(Gt=t).style.outline,t.style.outline="none",Le(window,"keydown",Ce))}function Ce(){Gt&&(Gt.style.outline=Yt,Yt=Gt=void 0,Te(window,"keydown",Ce))}function $e(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function Pe(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}Vt="onselectstart"in document?(Wt=function(){Le(window,"selectstart",je)},function(){Te(window,"selectstart",je)}):(qt=ge(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),Wt=function(){var t;qt&&(t=document.documentElement.style,Ut=t[qt],t[qt]="none")},function(){qt&&(document.documentElement.style[qt]=Ut,Ut=void 0)});var Se={TRANSFORM:te,TRANSITION:ee,TRANSITION_END:ie,get:oe,getStyle:ne,create:se,remove:ae,empty:re,toFront:le,toBack:ce,hasClass:he,addClass:de,removeClass:ue,setClass:pe,getClass:me,setOpacity:fe,testProp:ge,setTransform:_e,setPosition:ve,getPosition:ye,disableTextSelection:Wt,enableTextSelection:Vt,disableImageDrag:we,enableImageDrag:be,preventOutline:xe,restoreOutline:Ce,getSizedParentNode:$e,getScale:Pe};function Le(t,e,i,o){if("object"==typeof e)for(var n in e)Be(t,n,e[n],i);else for(var s=0,a=(e=u(e)).length;s<a;s++)Be(t,e[s],i,o);return this}var ke="_leaflet_events";function Te(t,e,i,o){if("object"==typeof e)for(var n in e)ze(t,n,e[n],i);else if(e)for(var s=0,a=(e=u(e)).length;s<a;s++)ze(t,e[s],i,o);else{for(var r in t[ke])ze(t,r,t[ke][r]);delete t[ke]}return this}function Ae(){return Ct&&!it&&!dt}var Me={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Be(t,e,i,o){var n=e+a(i)+(o?"_"+a(o):"");if(t[ke]&&t[ke][n])return this;var s,r,l,c,h,d,u=function(e){return i.call(o||t,e||window.event)},p=u;function m(t){if(Ct){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(1<t.touches.length)return;var e=Date.now(),i=e-(c||e);h=t.touches?t.touches[0]:t,d=0<i&&i<=250,c=e}function f(t){if(d&&!h.cancelBubble){if(Ct){if("mouse"===t.pointerType)return;var e,i,o={};for(i in h)e=h[i],o[i]=e&&e.bind?e.bind(h):e;h=o}h.type="dblclick",h.button=0,r(h),c=null}}Ct&&0===e.indexOf("touch")?Rt(t,e,u,n):$t&&"dblclick"===e&&!Ae()?(r=u,d=!1,(s=t)[Xt+Kt+(l=n)]=m,s[Xt+Qt+l]=f,s[Xt+"dblclick"+l]=r,s.addEventListener(Kt,m,!!kt&&{passive:!1}),s.addEventListener(Qt,f,!!kt&&{passive:!1}),s.addEventListener("dblclick",r,!1)):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Me[e]||e,u,!!kt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(u=function(e){e=e||window.event,Ue(t,e)&&p(e)},t.addEventListener(Me[e],u,!1)):t.addEventListener(e,p,!1):"attachEvent"in t&&t.attachEvent("on"+e,u),t[ke]=t[ke]||{},t[ke][n]=u}function ze(t,e,i,o){var n,s,r,l,c,h,d,u,p=e+a(i)+(o?"_"+a(o):""),m=t[ke]&&t[ke][p];if(!m)return this;Ct&&0===e.indexOf("touch")?(u=(h=t)["_leaflet_"+(d=e)+p],"touchstart"===d?h.removeEventListener(Et,u,!1):"touchmove"===d?h.removeEventListener(It,u,!1):"touchend"===d&&(h.removeEventListener(Nt,u,!1),h.removeEventListener(jt,u,!1))):$t&&"dblclick"===e&&!Ae()?(r=(n=t)[Xt+Kt+(s=p)],l=n[Xt+Qt+s],c=n[Xt+"dblclick"+s],n.removeEventListener(Kt,r,!!kt&&{passive:!1}),n.removeEventListener(Qt,l,!!kt&&{passive:!1}),n.removeEventListener("dblclick",c,!1)):"removeEventListener"in t?t.removeEventListener(Me[e]||e,m,!1):"detachEvent"in t&&t.detachEvent("on"+e,m),t[ke][p]=null}function Ee(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Ie(t){return Be(t,"wheel",Ee),this}function Ne(t){return Le(t,"mousedown touchstart dblclick",Ee),Be(t,"click",Je),this}function je(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function De(t){return je(t),Ee(t),this}function Oe(t,e){if(!e)return new B(t.clientX,t.clientY);var i=Pe(e),o=i.boundingClientRect;return new B((t.clientX-o.left)/i.x-e.clientLeft,(t.clientY-o.top)/i.y-e.clientTop)}var Re=mt&&ct?2*window.devicePixelRatio:ht?window.devicePixelRatio:1;function Fe(t){return it?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Re:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ze={};function Je(t){Ze[t.type]=!0}function He(t){var e=Ze[t.type];return Ze[t.type]=!1,e}function Ue(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var qe={on:Le,off:Te,stopPropagation:Ee,disableScrollPropagation:Ie,disableClickPropagation:Ne,preventDefault:je,stop:De,getMousePosition:Oe,getWheelDelta:Fe,fakeStop:Je,skipped:He,isExternalTarget:Ue,addListener:Le,removeListener:Te},We=M.extend({run:function(t,e,i,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=ye(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=P(this._animate,this),this._step()},_step:function(t){var e=new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),ve(this._el,i),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ve=M.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(R(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ee&&vt&&!Pt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Le(this._proxy,ie,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,o){return i=void 0===i?this._zoom:this._limitZoom(i),t=this._limitCenter(R(t),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&!0!==o&&(void 0!==o.animate&&(o.zoom=e({animate:o.animate},o.zoom),o.pan=e({animate:o.animate,duration:o.duration},o.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,o.zoom):this._tryAnimatedPan(t,o.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,i),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var o=this.getZoomScale(e),n=this.getSize().divideBy(2),s=(t instanceof B?t:this.latLngToContainerPoint(t)).subtract(n).multiplyBy(1-1/o),a=this.containerPointToLatLng(n.add(s));return this.setView(a,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():D(t);var i=E(e.paddingTopLeft||e.padding||[0,0]),o=E(e.paddingBottomRight||e.padding||[0,0]),n=this.getBoundsZoom(t,!1,i.add(o));if((n="number"==typeof e.maxZoom?Math.min(e.maxZoom,n):n)===1/0)return{center:t.getCenter(),zoom:n};var s=o.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),n),r=this.project(t.getNorthEast(),n);return{center:this.unproject(a.add(r).divideBy(2).add(s),n),zoom:n}},fitBounds:function(t,e){if(!(t=D(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){return e=e||{},(t=E(t).round()).x||t.y?(!0===e.animate||this.getSize().contains(t)?(this._panAnim||(this._panAnim=new We,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate?(de(this._mapPane,"leaflet-pan-anim"),i=this._getMapPanePos().subtract(t).round(),this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)):(this._rawPanBy(t),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this):this.fire("moveend");var i},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!vt)return this.setView(t,e,i);this._stop();var o=this.project(this.getCenter()),n=this.project(t),s=this.getSize(),a=this._zoom;t=R(t),e=void 0===e?a:e;var r=Math.max(s.x,s.y),l=r*this.getZoomScale(a,e),c=n.distanceTo(o)||1,h=1.42,d=h*h;function u(t){var e=(l*l-r*r+(t?-1:1)*d*d*c*c)/(2*(t?l:r)*d*c),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function m(t){return(Math.exp(t)+Math.exp(-t))/2}var f=u(0);function g(t){return r*(m(f)*(p(e=f+h*t)/m(e))-p(f))/d;var e}var _=Date.now(),v=(u(1)-f)/h,y=i.duration?1e3*i.duration:1e3*v*.8;return this._moveStart(!0,i.noMoveStart),function i(){var s,l,d=(Date.now()-_)/y,u=(s=d,(1-Math.pow(1-s,1.5))*v);d<=1?(this._flyToFrame=P(i,this),this._move(this.unproject(o.add(n.subtract(o).multiplyBy(g(u)/c)),a),this.getScaleZoom(r/(l=u,r*(m(f)/m(f+h*l))),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=D(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),o=this._limitCenter(i,this._zoom,D(t));return i.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i,o,n=E((e=e||{}).paddingTopLeft||e.padding||[0,0]),s=E(e.paddingBottomRight||e.padding||[0,0]),a=this.getCenter(),r=this.project(a),l=this.project(t),c=this.getPixelBounds(),h=c.getSize().divideBy(2),d=N([c.min.add(n),c.max.subtract(s)]);return d.contains(l)||(this._enforcingBounds=!0,i=r.subtract(l),o=E(l.x+i.x,l.y+i.y),(l.x<d.min.x||l.x>d.max.x)&&(o.x=r.x-i.x,0<i.x?o.x+=h.x-n.x:o.x-=h.x-s.x),(l.y<d.min.y||l.y>d.max.y)&&(o.y=r.y-i.y,0<i.y?o.y+=h.y-n.y:o.y-=h.y-s.y),this.panTo(this.unproject(o),e),this._enforcingBounds=!1),this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),s=i.divideBy(2).round(),a=o.divideBy(2).round(),r=s.subtract(a);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=n(this._handleGeolocationResponse,this),o=n(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e,i=new O(t.coords.latitude,t.coords.longitude),o=i.toBounds(2*t.coords.accuracy),n=this._locateOptions;n.setView&&(e=this.getBoundsZoom(o),this.setView(i,n.maxZoom?Math.min(e,n.maxZoom):e));var s={latlng:i,bounds:o,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(s[a]=t.coords[a]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ae(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=se("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new j(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=D(t),i=E(i||[0,0]);var o=this.getZoom()||0,n=this.getMinZoom(),s=this.getMaxZoom(),a=t.getNorthWest(),r=t.getSouthEast(),l=this.getSize().subtract(i),c=N(this.project(r,o),this.project(a,o)).getSize(),h=vt?this.options.zoomSnap:1,d=l.x/c.x,u=l.y/c.y,p=e?Math.max(d,u):Math.min(d,u);o=this.getScaleZoom(p,o);return h&&(o=Math.round(o/(h/100))*(h/100),o=e?Math.ceil(o/h)*h:Math.floor(o/h)*h),Math.max(n,Math.min(s,o))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new I(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var o=i.zoom(t*i.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(R(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(E(t),e)},layerPointToLatLng:function(t){var e=E(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(R(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(R(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(D(t))},distance:function(t,e){return this.options.crs.distance(R(t),R(e))},containerPointToLayerPoint:function(t){return E(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return E(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(E(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(R(t)))},mouseEventToContainerPoint:function(t){return Oe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=oe(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Le(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,de(t,"leaflet-container"+($t?" leaflet-touch":"")+(Lt?" leaflet-retina":"")+(et?" leaflet-oldie":"")+(dt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ne(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ve(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(de(t.markerPane,"leaflet-zoom-hide"),de(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ve(this._mapPane,new B(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var o=this._zoom!==e;this._moveStart(o,!1)._move(t,e)._moveEnd(o),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(o||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ve(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Te:Le;e((this._targets[a(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=P(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,o=[],n="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,r=!1;s;){if((i=this._targets[a(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){r=!0;break}if(i&&i.listens(e,!0)){if(n&&!Ue(s,t))break;if(o.push(i),n)break}if(s===this._container)break;s=s.parentNode}return o.length||r||n||!Ue(s,t)||(o=[this]),o},_handleDOMEvent:function(t){var e;this._loaded&&!He(t)&&("mousedown"!==(e=t.type)&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||xe(t.target||t.srcElement),this._fireDOMEvent(t,e))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,o){var n;if("click"===t.type&&((n=e({},t)).type="preclick",this._fireDOMEvent(n,n.type,o)),!t._stopped&&(o=(o||[]).concat(this._findEventTargets(t,i))).length){var s=o[0];"contextmenu"===i&&s.listens(i,!0)&&je(t);var a,r={originalEvent:t};"keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type&&(a=s.getLatLng&&(!s._radius||s._radius<=10),r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint));for(var l=0;l<o.length;l++)if(o[l].fire(i,r,!0),r.originalEvent._stopped||!1===o[l].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,i))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ye(this._mapPane)||new B(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return N([this.project(t.getSouthWest(),e)._subtract(o),this.project(t.getNorthWest(),e)._subtract(o),this.project(t.getSouthEast(),e)._subtract(o),this.project(t.getNorthEast(),e)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var o=this.project(t,e),n=this.getSize().divideBy(2),s=new I(o.subtract(n),o.add(n)),a=this._getBoundsOffset(s,i,e);return a.round().equals([0,0])?t:this.unproject(o.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),o=new I(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,i){var o=N(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),n=o.min.subtract(t.min),s=o.max.subtract(t.max);return new B(this._rebound(n.x,-s.x),this._rebound(n.y,-s.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),o=vt?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=se("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=te,i=this._proxy.style[e];_e(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();_e(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),n=this._getCenterOffset(t)._divideBy(1-1/o);return!(!0!==i.animate&&!this.getSize().contains(n)||(P(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,i,o){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,de(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),P(function(){this._moveEnd(!0)},this))}});function Ge(t){return new Ye(t)}var Ye=T.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),o=t._controlCorners[i];return de(e,"leaflet-control"),-1!==i.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}});Ve.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=se("div",e+"control-container",this._container);function o(o,n){var s=e+o+" "+e+n;t[o+n]=se("div",s,i)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ae(this._controlCorners[t]);ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ke=Ye.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,o){return i<o?-1:o<i?1:0}},initialize:function(t,e,i){for(var o in p(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ye.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){de(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(de(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=se("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ne(e),Ie(e);var o=this._section=se("section",t+"-list");i&&(this._map.on("click",this.collapse,this),nt||Le(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var n=this._layersLink=se("a",t+"-toggle",e);n.href="#",n.title="Layers",$t?(Le(n,"click",De),Le(n,"click",this.expand,this)):Le(n,"focus",this.expand,this),i||this.expand(),this._baseLayersList=se("div",t+"-base",o),this._separator=se("div",t+"-separator",o),this._overlaysList=se("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(n(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;re(this._baseLayersList),re(this._overlaysList),this._layerControlInputs=[];for(var t,e,i,o=0,n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<o,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var e,i=document.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers_"+a(this),o),this._layerControlInputs.push(e),e.layerId=a(t.layer),Le(e,"click",this._onInputClick,this);var n=document.createElement("span");n.innerHTML=" "+t.name;var s=document.createElement("div");return i.appendChild(s),s.appendChild(e),s.appendChild(n),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,o=[],n=[];this._handlingClick=!0;for(var s=i.length-1;0<=s;s--)t=i[s],e=this._getLayer(t.layerId).layer,t.checked?o.push(e):t.checked||n.push(e);for(s=0;s<n.length;s++)this._map.hasLayer(n[s])&&this._map.removeLayer(n[s]);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])||this._map.addLayer(o[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,o=this._map.getZoom(),n=i.length-1;0<=n;n--)t=i[n],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&o<e.options.minZoom||void 0!==e.options.maxZoom&&o>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Qe=Ye.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=se("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,o,n){var s=se("a",i,o);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),Ne(s),Le(s,"click",De),Le(s,"click",n,this),Le(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ue(this._zoomInButton,e),ue(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMinZoom()||de(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMaxZoom()||de(this._zoomInButton,e)}});Ve.mergeOptions({zoomControl:!0}),Ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qe,this.addControl(this.zoomControl))});var Xe=Ye.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=se("div",e),o=this.options;return this._addScales(o,e+"-line",i),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=se("div",e,i)),t.imperial&&(this._iScale=se("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,o,n=3.2808399*t;5280<n?(e=n/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(o=this._getRoundNum(n),this._updateScale(this._iScale,o+" ft",o/n))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(10<=i?10:5<=i?5:3<=i?3:2<=i?2:1)}}),ti=Ye.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=se("div","leaflet-control-attribution"),Ne(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});Ve.mergeOptions({attributionControl:!0}),Ve.addInitHook(function(){this.options.attributionControl&&(new ti).addTo(this)}),Ye.Layers=Ke,Ye.Zoom=Qe,Ye.Scale=Xe,Ye.Attribution=ti,Ge.layers=function(t,e,i){return new Ke(t,e,i)},Ge.zoom=function(t){return new Qe(t)},Ge.scale=function(t){return new Xe(t)},Ge.attribution=function(t){return new ti(t)};var ei=T.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});ei.addTo=function(t,e){return t.addHandler(e,this),this};var ii,oi={Events:A},ni=$t?"touchstart mousedown":"mousedown",si={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ai={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ri=M.extend({options:{clickTolerance:3},initialize:function(t,e,i,o){p(this,o),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Le(this._dragStartTarget,ni,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ri._dragging===this&&this.finishDrag(),Te(this._dragStartTarget,ni,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){var e,i;!t._simulated&&this._enabled&&(this._moved=!1,he(this._element,"leaflet-zoom-anim")||ri._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((ri._dragging=this)._preventOutline&&xe(this._element),we(),Wt(),this._moving||(this.fire("down"),e=t.touches?t.touches[0]:t,i=$e(this._element),this._startPoint=new B(e.clientX,e.clientY),this._parentScale=Pe(i),Le(document,ai[t.type],this._onMove,this),Le(document,si[t.type],this._onUp,this))))},_onMove:function(t){var e,i;!t._simulated&&this._enabled&&(t.touches&&1<t.touches.length?this._moved=!0:((i=new B((e=t.touches&&1===t.touches.length?t.touches[0]:t).clientX,e.clientY)._subtract(this._startPoint)).x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,je(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ye(this._element).subtract(i),de(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),de(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,S(this._animRequest),this._lastEvent=t,this._animRequest=P(this._updatePosition,this,!0))))},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ve(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ue(document.body,"leaflet-dragging"),this._lastTarget&&(ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ai)Te(document,ai[t],this._onMove,this),Te(document,si[t],this._onUp,this);be(),Vt(),this._moved&&this._moving&&(S(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ri._dragging=!1}});function li(t,e){if(!e||!t.length)return t.slice();var i=e*e;return function(t,e){var i=t.length,o=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);o[0]=o[i-1]=1,function t(e,i,o,n,s){var a,r,l,c=0;for(r=n+1;r<=s-1;r++)c<(l=pi(e[r],e[n],e[s],!0))&&(a=r,c=l);o<c&&(i[a]=1,t(e,i,o,n,a),t(e,i,o,a,s))}(t,o,e,0,i-1);var n,s=[];for(n=0;n<i;n++)o[n]&&s.push(t[n]);return s}(t=function(t,e){for(var i=[t[0]],o=1,n=0,s=t.length;o<s;o++)(function(t,e){var i=e.x-t.x,o=e.y-t.y;return i*i+o*o})(t[o],t[n])>e&&(i.push(t[o]),n=o);return n<s-1&&i.push(t[s-1]),i}(t,i),i)}function ci(t,e,i){return Math.sqrt(pi(t,e,i,!0))}function hi(t,e,i,o,n){var s,a,r,l=o?ii:ui(t,i),c=ui(e,i);for(ii=c;;){if(!(l|c))return[t,e];if(l&c)return!1;r=ui(a=di(t,e,s=l||c,i,n),i),s===l?(t=a,l=r):(e=a,c=r)}}function di(t,e,i,o,n){var s,a,r=e.x-t.x,l=e.y-t.y,c=o.min,h=o.max;return 8&i?(s=t.x+r*(h.y-t.y)/l,a=h.y):4&i?(s=t.x+r*(c.y-t.y)/l,a=c.y):2&i?(s=h.x,a=t.y+l*(h.x-t.x)/r):1&i&&(s=c.x,a=t.y+l*(c.x-t.x)/r),new B(s,a,n)}function ui(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function pi(t,e,i,o){var n,s=e.x,a=e.y,r=i.x-s,l=i.y-a,c=r*r+l*l;return 0<c&&(1<(n=((t.x-s)*r+(t.y-a)*l)/c)?(s=i.x,a=i.y):0<n&&(s+=r*n,a+=l*n)),r=t.x-s,l=t.y-a,o?r*r+l*l:new B(s,a)}function mi(t){return!_(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function fi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mi(t)}var gi={simplify:li,pointToSegmentDistance:ci,closestPointOnSegment:function(t,e,i){return pi(t,e,i)},clipSegment:hi,_getEdgeIntersection:di,_getBitCode:ui,_sqClosestPointOnSegment:pi,isFlat:mi,_flat:fi};function _i(t,e,i){for(var o,n,s,a,r,l,c,h=[1,4,2,8],d=0,u=t.length;d<u;d++)t[d]._code=ui(t[d],e);for(s=0;s<4;s++){for(l=h[s],o=[],d=0,n=(u=t.length)-1;d<u;n=d++)a=t[d],r=t[n],a._code&l?r._code&l||((c=di(r,a,l,e,i))._code=ui(c,e),o.push(c)):(r._code&l&&((c=di(r,a,l,e,i))._code=ui(c,e),o.push(c)),o.push(a));t=o}return t}var vi,yi={clipPolygon:_i},wi={project:function(t){return new B(t.lng,t.lat)},unproject:function(t){return new O(t.y,t.x)},bounds:new I([-180,-90],[180,90])},bi={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,o=t.lat*e,n=this.R_MINOR/i,s=Math.sqrt(1-n*n),a=s*Math.sin(o),r=Math.tan(Math.PI/4-o/2)/Math.pow((1-a)/(1+a),s/2);o=-i*Math.log(Math.max(r,1e-10));return new B(t.lng*e*i,o)},unproject:function(t){for(var e,i=180/Math.PI,o=this.R,n=this.R_MINOR/o,s=Math.sqrt(1-n*n),a=Math.exp(-t.y/o),r=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&1e-7<Math.abs(c);l++)e=s*Math.sin(r),e=Math.pow((1-e)/(1+e),s/2),r+=c=Math.PI/2-2*Math.atan(a*e)-r;return new O(r*i,t.x*i/o)}},xi={LonLat:wi,Mercator:bi,SphericalMercator:U},Ci=e({},J,{code:"EPSG:3395",projection:bi,transformation:W(vi=.5/(Math.PI*bi.R),.5,-vi,.5)}),$i=e({},J,{code:"EPSG:4326",projection:wi,transformation:W(1/180,1,-1/180,.5)}),Pi=e({},Z,{projection:wi,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(i*i+o*o)},infinite:!0});Z.Earth=J,Z.EPSG3395=Ci,Z.EPSG3857=G,Z.EPSG900913=Y,Z.EPSG4326=$i,Z.Simple=Pi;var Si=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e,i=t.target;i.hasLayer(this)&&(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents&&(e=this.getEvents(),i.on(e,this),this.once("remove",function(){i.off(e,this)},this)),this.onAdd(i),this.getAttribution&&i.attributionControl&&i.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),i.fire("layeradd",{layer:this}))}});Ve.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?_(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var o in this._zoomBoundLayers){var n=this._zoomBoundLayers[o].options;t=void 0===n.minZoom?t:Math.min(t,n.minZoom),e=void 0===n.maxZoom?e:Math.max(e,n.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Li=Si.extend({initialize:function(t,e){var i,o;if(p(this,e),this._layers={},t)for(i=0,o=t.length;i<o;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,o=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:a}),ki=Li.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Li.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Li.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new j;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Ti=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(o,t),o},_setIconStyles:function(t,e){var i=this.options,o=i[e+"Size"];"number"==typeof o&&(o=[o,o]);var n=E(o),s=E("shadow"===e&&i.shadowAnchor||i.iconAnchor||n&&n.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),n&&(t.style.width=n.x+"px",t.style.height=n.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Lt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Ai=Ti.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ai.imagePath||(Ai.imagePath=this._detectIconPath()),(this.options.imagePath||Ai.imagePath)+Ti.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=se("div","leaflet-default-icon-path",document.body),e=ne(t,"background-image")||ne(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Mi=ei.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ri(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),de(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e,i=this._marker,o=i._map,n=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,a=ye(i._icon),r=o.getPixelBounds(),l=o.getPixelOrigin(),c=N(r.min._subtract(l).add(s),r.max._subtract(l).subtract(s));c.contains(a)||(e=E((Math.max(c.max.x,a.x)-c.max.x)/(r.max.x-c.max.x)-(Math.min(c.min.x,a.x)-c.min.x)/(r.min.x-c.min.x),(Math.max(c.max.y,a.y)-c.max.y)/(r.max.y-c.max.y)-(Math.min(c.min.y,a.y)-c.min.y)/(r.min.y-c.min.y)).multiplyBy(n),o.panBy(e,{animate:!1}),this._draggable._newPos._add(e),this._draggable._startPos._add(e),ve(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=P(this._adjustPan.bind(this,t)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=P(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,o=ye(e._icon),n=e._map.layerPointToLatLng(o);i&&ve(i,o),e._latlng=n,t.latlng=n,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Bi=Si.extend({options:{icon:new Ai,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=R(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=R(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var t;return this._icon&&this._map&&(t=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(t)),this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),o=!1;i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),de(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var n=t.icon.createShadow(this._shadow),s=!1;n!==this._shadow&&(this._removeShadow(),s=!0),n&&(de(n,e),n.alt=""),this._shadow=n,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),n&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ae(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ve(this._icon,t),this._shadow&&ve(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){var t;this.options.interactive&&(de(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mi&&(t=this.options.draggable,this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mi(this),t&&this.dragging.enable()))},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&fe(this._icon,t),this._shadow&&fe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),zi=Si.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Ei=zi.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=R(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=R(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return zi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),o=[t+i,e+i];this._pxBounds=new I(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Ii=Ei.extend({initialize:function(t,i,o){if("number"==typeof i&&(i=e({},o,{radius:i})),p(this,i),this._latlng=R(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:zi.prototype.setStyle,_project:function(){var t,e,i,o,n,s,a,r,l=this._latlng.lng,c=this._latlng.lat,h=this._map,d=h.options.crs;d.distance===J.distance?(t=Math.PI/180,e=this._mRadius/J.R/t,i=h.project([c+e,l]),o=h.project([c-e,l]),n=i.add(o).divideBy(2),s=h.unproject(n).lat,a=Math.acos((Math.cos(e*t)-Math.sin(c*t)*Math.sin(s*t))/(Math.cos(c*t)*Math.cos(s*t)))/t,!isNaN(a)&&0!==a||(a=e/Math.cos(Math.PI/180*c)),this._point=n.subtract(h.getPixelOrigin()),this._radius=isNaN(a)?0:n.x-h.project([s,l-a]).x,this._radiusY=n.y-i.y):(r=d.unproject(d.project(this._latlng).subtract([this._mRadius,0])),this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(r).x),this._updateBounds()}}),Ni=zi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,o=1/0,n=null,s=pi,a=0,r=this._parts.length;a<r;a++)for(var l=this._parts[a],c=1,h=l.length;c<h;c++){var d=s(t,e=l[c-1],i=l[c],!0);d<o&&(o=d,n=s(t,e,i))}return n&&(n.distance=Math.sqrt(o)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,o,n,s,a,r=this._rings[0],l=r.length;if(!l)return null;for(e=t=0;t<l-1;t++)e+=r[t].distanceTo(r[t+1])/2;if(0===e)return this._map.layerPointToLatLng(r[0]);for(o=t=0;t<l-1;t++)if(n=r[t],s=r[t+1],e<(o+=i=n.distanceTo(s)))return a=(o-e)/i,this._map.layerPointToLatLng([s.x-a*(s.x-n.x),s.y-a*(s.y-n.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=R(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return mi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=mi(t),o=0,n=t.length;o<n;o++)i?(e[o]=R(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new B(t,t);this._pxBounds=new I([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var o,n,s=t[0]instanceof O,a=t.length;if(s){for(n=[],o=0;o<a;o++)n[o]=this._map.latLngToLayerPoint(t[o]),i.extend(n[o]);e.push(n)}else for(o=0;o<a;o++)this._projectLatlngs(t[o],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var e,i,o,n,s=this._parts,a=0,r=0,l=this._rings.length;a<l;a++)for(e=0,i=(n=this._rings[a]).length;e<i-1;e++)(o=hi(n[e],n[e+1],t,e,!0))&&(s[r]=s[r]||[],s[r].push(o[0]),o[1]===n[e+1]&&e!==i-2||(s[r].push(o[1]),r++))},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,o=t.length;i<o;i++)t[i]=li(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,o,n,s,a,r,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,n=(a=(r=this._parts[i]).length)-1;o<a;n=o++)if((e||0!==o)&&ci(t,r[n],r[o])<=l)return!0;return!1}});Ni._flat=fi;var ji=Ni.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,o,n,s,a,r,l,c=this._rings[0],h=c.length;if(!h)return null;for(t=s=a=r=0,e=h-1;t<h;e=t++)i=c[t],o=c[e],n=i.y*o.x-o.y*i.x,a+=(i.x+o.x)*n,r+=(i.y+o.y)*n,s+=3*n;return l=0===s?c[0]:[a/s,r/s],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=Ni.prototype._convertLatLngs.call(this,t),i=e.length;return 2<=i&&e[0]instanceof O&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Ni.prototype._setLatLngs.call(this,t),mi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new B(e,e);t=new I(t.min.subtract(i),t.max.add(i));if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var o,n=0,s=this._rings.length;n<s;n++)(o=_i(this._rings[n],t,!0)).length&&this._parts.push(o)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,o,n,s,a,r,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(s=0,a=(l=(e=this._parts[n]).length)-1;s<l;a=s++)i=e[s],o=e[a],i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(c=!c);return c||Ni.prototype._containsPoint.call(this,t,!0)}}),Di=ki.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,o,n=_(t)?t:t.features;if(n){for(e=0,i=n.length;e<i;e++)((o=n[e]).geometries||o.geometry||o.features||o.coordinates)&&this.addData(o);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var a=Oi(t,s);return a?(a.feature=qi(t),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Oi(t,e){var i,o,n,s,a="Feature"===t.type?t.geometry:t,r=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,h=e&&e.coordsToLatLng||Fi;if(!r&&!a)return null;switch(a.type){case"Point":return Ri(c,t,i=h(r),e);case"MultiPoint":for(n=0,s=r.length;n<s;n++)i=h(r[n]),l.push(Ri(c,t,i,e));return new ki(l);case"LineString":case"MultiLineString":return o=Zi(r,"LineString"===a.type?0:1,h),new Ni(o,e);case"Polygon":case"MultiPolygon":return o=Zi(r,"Polygon"===a.type?1:2,h),new ji(o,e);case"GeometryCollection":for(n=0,s=a.geometries.length;n<s;n++){var d=Oi({geometry:a.geometries[n],type:"Feature",properties:t.properties},e);d&&l.push(d)}return new ki(l);default:throw new Error("Invalid GeoJSON object.")}}function Ri(t,e,i,o){return t?t(e,i):new Bi(i,o&&o.markersInheritOptions&&o)}function Fi(t){return new O(t[1],t[0],t[2])}function Zi(t,e,i){for(var o,n=[],s=0,a=t.length;s<a;s++)o=e?Zi(t[s],e-1,i):(i||Fi)(t[s]),n.push(o);return n}function Ji(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[h(t.lng,e),h(t.lat,e),h(t.alt,e)]:[h(t.lng,e),h(t.lat,e)]}function Hi(t,e,i,o){for(var n=[],s=0,a=t.length;s<a;s++)n.push(e?Hi(t[s],e-1,i,o):Ji(t[s],o));return!e&&i&&n.push(n[0]),n}function Ui(t,i){return t.feature?e({},t.feature,{geometry:i}):qi(i)}function qi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Wi={toGeoJSON:function(t){return Ui(this,{type:"Point",coordinates:Ji(this.getLatLng(),t)})}};function Vi(t,e){return new Di(t,e)}Bi.include(Wi),Ii.include(Wi),Ei.include(Wi),Ni.include({toGeoJSON:function(t){var e=!mi(this._latlngs);return Ui(this,{type:(e?"Multi":"")+"LineString",coordinates:Hi(this._latlngs,e?1:0,!1,t)})}}),ji.include({toGeoJSON:function(t){var e=!mi(this._latlngs),i=e&&!mi(this._latlngs[0]),o=Hi(this._latlngs,i?2:e?1:0,!0,t);return e||(o=[o]),Ui(this,{type:(i?"Multi":"")+"Polygon",coordinates:o})}}),Li.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),Ui(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,o=[];return this.eachLayer(function(e){var n,s;e.toGeoJSON&&(n=e.toGeoJSON(t),i?o.push(n.geometry):"FeatureCollection"===(s=qi(n)).type?o.push.apply(o,s.features):o.push(s))}),i?Ui(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});var Gi=Vi,Yi=Si.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=D(e),p(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(de(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=D(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:se("img");de(e,"leaflet-image-layer"),this._zoomAnimated&&de(e,"leaflet-zoom-animated"),this.options.className&&de(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=n(this.fire,this,"load"),e.onerror=n(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;_e(this._image,i,e)},_reset:function(){var t=this._image,e=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();ve(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){fe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Ki=Yi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:se("video");if(de(e,"leaflet-image-layer"),this._zoomAnimated&&de(e,"leaflet-zoom-animated"),this.options.className&&de(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=n(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),o=[],s=0;s<i.length;s++)o.push(i[s].src);this._url=0<i.length?o:[e.src]}else{_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var a=0;a<this._url.length;a++){var r=se("source");r.src=this._url[a],e.appendChild(r)}}}}),Qi=Yi.extend({_initImage:function(){var t=this._image=this._url;de(t,"leaflet-image-layer"),this._zoomAnimated&&de(t,"leaflet-zoom-animated"),this.options.className&&de(t,this.options.className),t.onselectstart=c,t.onmousemove=c}}),Xi=Si.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&fe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&fe(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(fe(this._container,0),this._removeTimeout=setTimeout(n(ae,void 0,this._container),200)):ae(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=R(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&ce(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof Si||(i=e,e=t),e instanceof ki)for(var o in t._layers){e=t._layers[o];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){var t,e,i,o,n;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),e=E(this.options.offset),i=this._getAnchor(),this._zoomAnimated?ve(this._container,t.add(i)):e=e.add(t).add(i),o=this._containerBottom=-e.y,n=this._containerLeft=-Math.round(this._containerWidth/2)+e.x,this._container.style.bottom=o+"px",this._container.style.left=n+"px")},_getAnchor:function(){return[0,0]}}),to=Xi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Xi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zi||this._source.on("preclick",Ee))},onRemove:function(t){Xi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zi||this._source.off("preclick",Ee))},getEvents:function(){var t=Xi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",i=this._container=se("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=se("div",e+"-content-wrapper",i);this._contentNode=se("div",e+"-content",o),Ne(i),Ie(this._contentNode),Le(i,"contextmenu",Ee),this._tipContainer=se("div",e+"-tip-container",i),this._tip=se("div",e+"-tip",this._tipContainer),this.options.closeButton&&((t=this._closeButton=se("a",e+"-close-button",i)).href="#close",t.innerHTML="&#215;",Le(t,"click",this._onCloseButtonClick,this))},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth);i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,n=this.options.maxHeight,s="leaflet-popup-scrolled";n&&n<o?(e.height=n+"px",de(t,s)):ue(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();ve(this._container,e.add(i))},_adjustPan:function(){var t,e,i,o,n,s,a,r,l,c,h,d;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),t=this._map,e=parseInt(ne(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,o=this._containerWidth,(n=new B(this._containerLeft,-i-this._containerBottom))._add(ye(this._container)),s=t.layerPointToContainerPoint(n),a=E(this.options.autoPanPadding),r=E(this.options.autoPanPaddingTopLeft||a),l=E(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),d=h=0,s.x+o+l.x>c.x&&(h=s.x+o-c.x+l.x),s.x-h-r.x<0&&(h=s.x-r.x),s.y+i+l.y>c.y&&(d=s.y+i-c.y+l.y),s.y-d-r.y<0&&(d=s.y-r.y),(h||d)&&t.fire("autopanstart").panBy([h,d]))},_onCloseButtonClick:function(t){this._close(),De(t)},_getAnchor:function(){return E(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ve.mergeOptions({closePopupOnClick:!0}),Ve.include({openPopup:function(t,e,i){return t instanceof to||(t=new to(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Si.include({bindPopup:function(t,e){return t instanceof to?(p(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new to(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(De(t),e instanceof zi?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var eo=Xi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Xi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Xi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Xi.prototype.getEvents.call(this);return $t&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=se("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i=this._map,o=this._container,n=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(t),a=this.options.direction,r=o.offsetWidth,l=o.offsetHeight,c=E(this.options.offset),h=this._getAnchor(),d="top"===a?(e=r/2,l):"bottom"===a?(e=r/2,0):(e="center"===a?r/2:"right"===a?0:"left"===a?r:s.x<n.x?(a="right",0):(a="left",r+2*(c.x+h.x)),l/2);t=t.subtract(E(e,d,!0)).add(c).add(h),ue(o,"leaflet-tooltip-right"),ue(o,"leaflet-tooltip-left"),ue(o,"leaflet-tooltip-top"),ue(o,"leaflet-tooltip-bottom"),de(o,"leaflet-tooltip-"+a),ve(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&fe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return E(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ve.include({openTooltip:function(t,e,i){return t instanceof eo||(t=new eo(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Si.include({bindTooltip:function(t,e){return t instanceof eo?(p(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new eo(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){var e,i;!t&&this._tooltipHandlersAdded||(e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),$t&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t)},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ue(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,o=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),o=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(o)}});var io=Ti.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e,i=t&&"DIV"===t.tagName?t:document.createElement("div"),o=this.options;return o.html instanceof Element?(re(i),i.appendChild(o.html)):i.innerHTML=!1!==o.html?o.html:"",o.bgPos&&(e=E(o.bgPos),i.style.backgroundPosition=-e.x+"px "+-e.y+"px"),this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});Ti.Default=Ai;var oo=Si.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ae(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof B?t:new B(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,o=-t(-1/0,1/0),n=0,s=i.length;n<s;n++)e=i[n].style.zIndex,i[n]!==this._container&&e&&(o=t(o,+e));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et){fe(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var o in this._tiles){var n,s=this._tiles[o];s.current&&s.loaded&&(n=Math.min(1,(t-s.loaded)/200),fe(s.el,n),n<1?e=!0:(s.active?i=!0:this._onOpaqueTile(s),s.active=!0))}i&&!this._noPrune&&this._pruneTiles(),e&&(S(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=se("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ae(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var o=this._levels[t],n=this._map;return o||((o=this._levels[t]={}).el=se("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=n.project(n.unproject(n.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,n.getCenter(),n.getZoom()),o.el.offsetWidth,this._onCreateLevel(o)),this._level=o}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,i,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(i=this._tiles[t]).retain=i.current;for(t in this._tiles)(i=this._tiles[t]).current&&!i.active&&(e=i.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2));for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ae(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,o){var n=Math.floor(t/2),s=Math.floor(e/2),a=i-1,r=new B(+n,+s);r.z=+a;var l=this._tileCoordsToKey(r),c=this._tiles[l];return c&&c.active?c.retain=!0:(c&&c.loaded&&(c.retain=!0),o<a&&this._retainParent(n,s,a,o))},_retainChildren:function(t,e,i,o){for(var n=2*t;n<2*t+2;n++)for(var s=2*e;s<2*e+2;s++){var a=new B(n,s);a.z=i+1;var r=this._tileCoordsToKey(a),l=this._tiles[r];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<o&&this._retainChildren(n,s,i+1,o))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,o){var n=Math.round(e),s=(n=void 0!==this.options.maxZoom&&n>this.options.maxZoom||void 0!==this.options.minZoom&&n<this.options.minZoom?void 0:this._clampZoom(n),this.options.updateWhenZooming&&n!==this._tileZoom);o&&!s||(this._tileZoom=n,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==n&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var o=this._map.getZoomScale(i,t.zoom),n=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,i)).round();vt?_e(t.el,n,o):ve(t.el,n)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),o=this._tileZoom,n=this._map.getPixelWorldBounds(this._tileZoom);n&&(this._globalTileRange=this._pxBoundsToTileRange(n)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(i,this._tileZoom),n=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*o);return new I(n.subtract(s),n.add(s))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var o=this._getTiledPixelBounds(t),n=this._pxBoundsToTileRange(o),s=n.getCenter(),a=[],r=this.options.keepBuffer,l=new I(n.getBottomLeft().subtract([r,-r]),n.getTopRight().add([r,-r]));if(!(isFinite(n.min.x)&&isFinite(n.min.y)&&isFinite(n.max.x)&&isFinite(n.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var h=this._tiles[c].coords;h.z===this._tileZoom&&l.contains(new B(h.x,h.y))||(this._tiles[c].current=!1)}if(1<Math.abs(i-this._tileZoom))this._setView(t,i);else{for(var d=n.min.y;d<=n.max.y;d++)for(var u=n.min.x;u<=n.max.x;u++){var p,m=new B(u,d);m.z=this._tileZoom,this._isValidTile(m)&&((p=this._tiles[this._tileCoordsToKey(m)])?p.current=!0:a.push(m))}if(a.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(u=0;u<a.length;u++)this._addTile(a[u],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return D(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),o=t.scaleBy(i),n=o.add(i);return[e.unproject(o,t.z),e.unproject(n,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new j(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new B(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(ae(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){de(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,et&&this.options.opacity<1&&fe(t,this.options.opacity),nt&&!st&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),o=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&P(n(this._tileReady,this,t,null,s)),ve(s,i),this._tiles[o]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var o=this._tileCoordsToKey(t);(i=this._tiles[o])&&(i.loaded=+new Date,this._map._fadeAnimated?(fe(i.el,0),S(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(de(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et||!this._map._fadeAnimated?P(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new B(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new I(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),no=oo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&Lt&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Le(i,"load",n(this._tileOnLoad,this,e,i)),Le(i,"error",n(this._tileOnError,this,e,i)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var i,o={r:Lt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(i=this._globalTileRange.max.y-t.y,this.options.tms&&(o.y=i),o["-y"]=i),g(this._url,e(o,this.options))},_tileOnLoad:function(t,e){et?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var o=this.options.errorTileUrl;o&&e.getAttribute("src")!==o&&(e.src=o),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=y,ae(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return rt||e.el.setAttribute("src",y),oo.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==y))return oo.prototype._tileReady.call(this,t,e,i)}});function so(t,e){return new no(t,e)}var ao=no.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var o=e({},this.defaultWmsParams);for(var n in i)n in this.options||(o[n]=i[n]);var s=(i=p(this,i)).detectRetina&&Lt?2:1,a=this.getTileSize();o.width=a.x*s,o.height=a.y*s,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,no.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,o=N(i.project(e[0]),i.project(e[1])),n=o.min,s=o.max,a=(1.3<=this._wmsVersion&&this._crs===$i?[n.y,n.x,s.y,s.x]:[n.x,n.y,s.x,s.y]).join(","),r=no.prototype.getTileUrl.call(this,t);return r+m(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,i){return e(this.wmsParams,t),i||this.redraw(),this}});no.WMS=ao,so.wms=function(t,e){return new ao(t,e)};var ro=Si.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&de(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),o=ye(this._container),n=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),a=this._map.project(t,e).subtract(s),r=n.multiplyBy(-i).add(o).add(n).subtract(a);vt?_e(this._container,r,i):ve(this._container,r)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new I(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),lo=ro.extend({getEvents:function(){var t=ro.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ro.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Le(t,"mousemove",this._onMouseMove,this),Le(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Le(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,ae(this._container),Te(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){var t,e,i,o;this._map._animatingZoom&&this._bounds||(ro.prototype._update.call(this),t=this._bounds,e=this._container,i=t.getSize(),o=Lt?2:1,ve(e,t.min),e.width=o*i.x,e.height=o*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Lt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update"))},_reset:function(){ro.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[a(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,o=e.prev;i?i.prev=o:this._drawLast=o,o?o.next=i:this._drawFirst=i,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){for(var e,i=t.options.dashArray.split(/[, ]+/),o=[],n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||P(this._redraw,this))},_extendRedrawBounds:function(t){var e;t._pxBounds&&(e=(t.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t,e=this._redrawBounds;e?(t=e.getSize(),this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},_draw:function(){var t,e,i=this._redrawBounds;this._ctx.save(),i&&(e=i.getSize(),this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,e.x,e.y),this._ctx.clip()),this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,o,n,s,a=t._parts,r=a.length,l=this._ctx;if(r){for(l.beginPath(),i=0;i<r;i++){for(o=0,n=a[i].length;o<n;o++)s=a[i][o],l[o?"lineTo":"moveTo"](s.x,s.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){var e,i,o,n;this._drawing&&!t._empty()&&(e=t._point,i=this._ctx,o=Math.max(Math.round(t._radius),1),1!=(n=(Math.max(Math.round(t._radiusY),1)||o)/o)&&(i.save(),i.scale(1,n)),i.beginPath(),i.arc(e.x,e.y/n,o,0,2*Math.PI,!1),1!=n&&i.restore(),this._fillStroke(i,t))},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,o=this._map.mouseEventToLayerPoint(t),n=this._drawFirst;n;n=n.next)(e=n.layer).options.interactive&&e._containsPoint(o)&&(("click"===t.type||"preclick"!==t.type)&&this._map._draggableMoved(e)||(i=e));i&&(Je(t),this._fireEvent([i],t))},_onMouseMove:function(t){var e;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(e=this._map.mouseEventToLayerPoint(t),this._handleMouseHover(t,e))},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ue(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,o,s=this._drawFirst;s;s=s.next)(i=s.layer).options.interactive&&i._containsPoint(e)&&(o=i);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(de(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(n(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e,i,o=t._order;o&&(e=o.next,i=o.prev,e&&((e.prev=i)?i.next=e:e&&(this._drawFirst=e),o.prev=this._drawLast,(this._drawLast.next=o).next=null,this._drawLast=o,this._requestRedraw(t)))},_bringToBack:function(t){var e,i,o=t._order;o&&(e=o.next,(i=o.prev)&&((i.next=e)?e.prev=i:i&&(this._drawLast=i),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)))}});function co(t){return Tt?new lo(t):null}var ho=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),uo={_initContainer:function(){this._container=se("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ro.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ho("shape");de(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ho("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ae(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,o=t.options,n=t._container;n.stroked=!!o.stroke,n.filled=!!o.fill,o.stroke?(e=e||(t._stroke=ho("stroke")),n.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=_(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(n.removeChild(e),t._stroke=null),o.fill?(i=i||(t._fill=ho("fill")),n.appendChild(i),i.color=o.fillColor||o.color,i.opacity=o.fillOpacity):i&&(n.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),o=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+o+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){ce(t._container)}},po=Mt?ho:K,mo=ro.extend({getEvents:function(){var t=ro.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=po("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=po("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ae(this._container),Te(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){var t,e,i;this._map._animatingZoom&&this._bounds||(ro.prototype._update.call(this),e=(t=this._bounds).getSize(),i=this._container,this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),ve(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update"))},_initPath:function(t){var e=t._path=po("path");t.options.className&&de(e,t.options.className),t.options.interactive&&de(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ae(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),o="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",n=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+o+2*i+",0 "+o+2*-i+",0 ";this._setPath(t,n)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){ce(t._path)}});function fo(t){return At||Mt?new mo(t):null}Mt&&mo.include(uo),Ve.include({getRenderer:function(t){var e=(e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer());return this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&co(t)||fo(t)}});var go=ji.extend({initialize:function(t,e){ji.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=D(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});mo.create=po,mo.pointsToPath=Q,Di.geometryToLayer=Oi,Di.coordsToLatLng=Fi,Di.coordsToLatLngs=Zi,Di.latLngToCoords=Ji,Di.latLngsToCoords=Hi,Di.getFeature=Ui,Di.asFeature=qi,Ve.mergeOptions({boxZoom:!0});var _o=ei.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Wt(),we(),this._startPoint=this._map.mouseEventToContainerPoint(t),Le(document,{contextmenu:De,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=se("div","leaflet-zoom-box",this._container),de(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new I(this._point,this._startPoint),i=e.getSize();ve(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ae(this._box),ue(this._container,"leaflet-crosshair")),Vt(),be(),Te(document,{contextmenu:De,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){var e;1!==t.which&&1!==t.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0),e=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})))},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ve.addInitHook("addHandler","boxZoom",_o),Ve.mergeOptions({doubleClickZoom:!0});var vo=ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),o=e.options.zoomDelta,n=t.originalEvent.shiftKey?i-o:i+o;"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}});Ve.addInitHook("addHandler","doubleClickZoom",vo),Ve.mergeOptions({dragging:!0,inertia:!st,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yo=ei.extend({addHooks:function(){var t;this._draggable||(t=this._map,this._draggable=new ri(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))),de(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ue(this._map._container,"leaflet-grab"),ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t,e=this._map;e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(t=D(this._map.options.maxBounds),this._offsetLimit=N(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){var e,i;this._map.options.inertia&&(e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(i),this._times.push(e),this._prunePositions(e)),this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){var t,e;this._viscosity&&this._offsetLimit&&(t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit,t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t))},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,o=this._draggable._newPos.x,n=(o-e+i)%t+e-i,s=(o+e+i)%t-e-i,a=Math.abs(n+i)<Math.abs(s+i)?n:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e,i,o,n,s,a,r,l,c,h=this._map,d=h.options,u=!d.inertia||this._times.length<2;h.fire("dragend",t),u?h.fire("moveend"):(this._prunePositions(+new Date),e=this._lastPos.subtract(this._positions[0]),i=(this._lastTime-this._times[0])/1e3,o=d.easeLinearity,s=(n=e.multiplyBy(o/i)).distanceTo([0,0]),a=Math.min(d.inertiaMaxSpeed,s),r=n.multiplyBy(a/s),l=a/(d.inertiaDeceleration*o),(c=r.multiplyBy(-l/2).round()).x||c.y?(c=h._limitOffset(c,h.options.maxBounds),P(function(){h.panBy(c,{duration:l,easeLinearity:o,noMoveStart:!0,animate:!0})})):h.fire("moveend"))}});Ve.addInitHook("addHandler","dragging",yo),Ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wo=ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Le(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Te(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var t,e,i,o;this._focused||(t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft,this._map._container.focus(),window.scrollTo(o,i))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){for(var e=this._panKeys={},i=this.keyCodes,o=0,n=i.left.length;o<n;o++)e[i.left[o]]=[-1*t,0];for(o=0,n=i.right.length;o<n;o++)e[i.right[o]]=[t,0];for(o=0,n=i.down.length;o<n;o++)e[i.down[o]]=[0,t];for(o=0,n=i.up.length;o<n;o++)e[i.up[o]]=[0,-1*t]},_setZoomDelta:function(t){for(var e=this._zoomKeys={},i=this.keyCodes,o=0,n=i.zoomIn.length;o<n;o++)e[i.zoomIn[o]]=t;for(o=0,n=i.zoomOut.length;o<n;o++)e[i.zoomOut[o]]=-t},_addHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,o=this._map;if(i in this._panKeys)o._panAnim&&o._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=E(e).multiplyBy(3)),o.panBy(e),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds));else if(i in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!o._popup||!o._popup.options.closeOnEscapeKey)return;o.closePopup()}De(t)}}});Ve.addInitHook("addHandler","keyboard",wo),Ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bo=ei.extend({addHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Fe(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(i-(new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),o),De(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(4*this._map.options.wheelPxPerZoomLevel),n=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,s=i?Math.ceil(n/i)*i:n,a=t._limitZoom(e+(0<this._delta?s:-s))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ve.addInitHook("addHandler","scrollWheelZoom",bo),Ve.mergeOptions({tap:!0,tapTolerance:15});var xo=ei.extend({addHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(je(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new B(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&de(i,"leaflet-active"),this._holdTimeout=setTimeout(n(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Le(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){var e,i;clearTimeout(this._holdTimeout),Te(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches&&((i=(e=t.changedTouches[0]).target)&&i.tagName&&"a"===i.tagName.toLowerCase()&&ue(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e))},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new B(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});!$t||Ct&&!dt||Ve.addInitHook("addHandler","tap",xo),Ve.mergeOptions({touchZoom:$t&&!st,bounceAtZoomLimits:!0});var Co=ei.extend({addHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e,i,o=this._map;!t.touches||2!==t.touches.length||o._animatingZoom||this._zooming||(e=o.mouseEventToContainerPoint(t.touches[0]),i=o.mouseEventToContainerPoint(t.touches[1]),this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),"center"!==o.options.touchZoom&&(this._pinchStartLatLng=o.containerPointToLatLng(e.add(i)._divideBy(2))),this._startDist=e.distanceTo(i),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend",this._onTouchEnd,this),je(t))},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),s=i.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&1<s)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==s)return}else{var a=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(1==s&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),S(this._animRequest);var r=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=P(r,this,!0),je(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ve.addInitHook("addHandler","touchZoom",Co),Ve.BoxZoom=_o,Ve.DoubleClickZoom=vo,Ve.Drag=yo,Ve.Keyboard=wo,Ve.ScrollWheelZoom=bo,Ve.Tap=xo,Ve.TouchZoom=Co,t.version="1.7.1",t.Control=Ye,t.control=Ge,t.Browser=zt,t.Evented=M,t.Mixin=oi,t.Util=k,t.Class=T,t.Handler=ei,t.extend=e,t.bind=n,t.stamp=a,t.setOptions=p,t.DomEvent=qe,t.DomUtil=Se,t.PosAnimation=We,t.Draggable=ri,t.LineUtil=gi,t.PolyUtil=yi,t.Point=B,t.point=E,t.Bounds=I,t.bounds=N,t.Transformation=q,t.transformation=W,t.Projection=xi,t.LatLng=O,t.latLng=R,t.LatLngBounds=j,t.latLngBounds=D,t.CRS=Z,t.GeoJSON=Di,t.geoJSON=Vi,t.geoJson=Gi,t.Layer=Si,t.LayerGroup=Li,t.layerGroup=function(t,e){return new Li(t,e)},t.FeatureGroup=ki,t.featureGroup=function(t,e){return new ki(t,e)},t.ImageOverlay=Yi,t.imageOverlay=function(t,e,i){return new Yi(t,e,i)},t.VideoOverlay=Ki,t.videoOverlay=function(t,e,i){return new Ki(t,e,i)},t.SVGOverlay=Qi,t.svgOverlay=function(t,e,i){return new Qi(t,e,i)},t.DivOverlay=Xi,t.Popup=to,t.popup=function(t,e){return new to(t,e)},t.Tooltip=eo,t.tooltip=function(t,e){return new eo(t,e)},t.Icon=Ti,t.icon=function(t){return new Ti(t)},t.DivIcon=io,t.divIcon=function(t){return new io(t)},t.Marker=Bi,t.marker=function(t,e){return new Bi(t,e)},t.TileLayer=no,t.tileLayer=so,t.GridLayer=oo,t.gridLayer=function(t){return new oo(t)},t.SVG=mo,t.svg=fo,t.Renderer=ro,t.Canvas=lo,t.canvas=co,t.Path=zi,t.CircleMarker=Ei,t.circleMarker=function(t,e){return new Ei(t,e)},t.Circle=Ii,t.circle=function(t,e,i){return new Ii(t,e,i)},t.Polyline=Ni,t.polyline=function(t,e){return new Ni(t,e)},t.Polygon=ji,t.polygon=function(t,e){return new ji(t,e)},t.Rectangle=go,t.rectangle=function(t,e){return new go(t,e)},t.Map=Ve,t.map=function(t,e){return new Ve(t,e)};var $o=window.L;t.noConflict=function(){return window.L=$o,this},window.L=t}),function(){"use strict";var t=function(t){return(t="number"==typeof t?{precision:t}:t||{}).precision=t.precision||5,t.factor=t.factor||Math.pow(10,t.precision),t.dimension=t.dimension||2,t},e={encode:function(e,i){i=t(i);for(var o=[],n=0,s=e.length;n<s;++n){var a=e[n];if(2===i.dimension)o.push(a.lat||a[0]),o.push(a.lng||a[1]);else for(var r=0;r<i.dimension;++r)o.push(a[r])}return this.encodeDeltas(o,i)},decode:function(e,i){i=t(i);for(var o=this.decodeDeltas(e,i),n=[],s=0,a=o.length;s+(i.dimension-1)<a;){for(var r=[],l=0;l<i.dimension;++l)r.push(o[s++]);n.push(r)}return n},encodeDeltas:function(e,i){i=t(i);for(var o=[],n=0,s=e.length;n<s;)for(var a=0;a<i.dimension;++a,++n){var r=e[n].toFixed(i.precision),l=r-(o[a]||0);o[a]=r,e[n]=l}return this.encodeFloats(e,i)},decodeDeltas:function(e,i){i=t(i);for(var o=[],n=this.decodeFloats(e,i),s=0,a=n.length;s<a;)for(var r=0;r<i.dimension;++r,++s)n[s]=Math.round((o[r]=n[s]+(o[r]||0))*i.factor)/i.factor;return n},encodeFloats:function(e,i){i=t(i);for(var o=0,n=e.length;o<n;++o)e[o]=Math.round(e[o]*i.factor);return this.encodeSignedIntegers(e)},decodeFloats:function(e,i){i=t(i);for(var o=this.decodeSignedIntegers(e),n=0,s=o.length;n<s;++n)o[n]/=i.factor;return o},encodeSignedIntegers:function(t){for(var e=0,i=t.length;e<i;++e){var o=t[e];t[e]=o<0?~(o<<1):o<<1}return this.encodeUnsignedIntegers(t)},decodeSignedIntegers:function(t){for(var e=this.decodeUnsignedIntegers(t),i=0,o=e.length;i<o;++i){var n=e[i];e[i]=1&n?~(n>>1):n>>1}return e},encodeUnsignedIntegers:function(t){for(var e="",i=0,o=t.length;i<o;++i)e+=this.encodeUnsignedInteger(t[i]);return e},decodeUnsignedIntegers:function(t){for(var e=[],i=0,o=0,n=0,s=t.length;n<s;++n){var a=t.charCodeAt(n)-63;i|=(31&a)<<o,a<32?(e.push(i),i=0,o=0):o+=5}return e},encodeSignedInteger:function(t){return t=t<0?~(t<<1):t<<1,this.encodeUnsignedInteger(t)},encodeUnsignedInteger:function(t){for(var e,i="";t>=32;)e=63+(32|31&t),i+=String.fromCharCode(e),t>>=5;return e=t+63,i+=String.fromCharCode(e)}};if("object"==typeof module&&"object"==typeof module.exports&&(module.exports=e),"object"==typeof L){L.Polyline.prototype.fromEncoded||(L.Polyline.fromEncoded=function(t,i){return L.polyline(e.decode(t),i)}),L.Polygon.prototype.fromEncoded||(L.Polygon.fromEncoded=function(t,i){return L.polygon(e.decode(t),i)});var i={encodePath:function(){return e.encode(this.getLatLngs())}};L.Polyline.prototype.encodePath||L.Polyline.include(i),L.Polygon.prototype.encodePath||L.Polygon.include(i),L.PolylineUtil=e}}();var gmarkers=[],ploygonAr=null,popper=null,circleAr=null,mapJS={gDefaultPos:[28.457372914376748,77.02837868164056],gMap:null,gbounds:null,gAllPolygons:[],polyLines:[],results:[],distanceArr:[],latlngcollections:[],defaultLat:null,defaultLong:null,markers:[],gInfobox:null,rangeArray:[],plotHeatMap:function(t,e,i,o=!1){o&&!$(".priceList").empty()&&$(".priceList").empty(),mapJS.rangeArray=1==o?heatMapJS.generatePriceLegendsFor3dMap(t):heatMapJS.generatePriceLegends(t),mapJS.gInit(t,e,i,o)},gInit:function(t,e,i,o=!1){var n=10;28.446355==i.lat&&77.033043==i.long&&(n=11);var s={center:[i.lat,i.long],zoom:n};let a;mapJS.defaultLat=i.lat,mapJS.defaultLong=i.long,"resale"==i.callerPage?a="Detail_Resale_D10":"rental"==i.callerPage?a="Detail_Rental_D8":"new_project"==i.callerPage?a="Detail_NewProject_D13":null==i.name&&(a="Home_Map_L5"),document.getElementById(e).innerHTML=`<div class="mapOverlay Home_Map_L4">\n\t<a class="btn ${a} " href="javascript:void(0)">Click to View</a></div>\n\t<div id='map' style='width: 100%; height: 100%;'></div>`,mapJS.gMap=new L.map("map",s),mapJS.addControlPlaceholders(mapJS.gMap),mapJS.gMap.zoomControl.setPosition("verticalcenterright"),mapJS.gbounds=L.latLngBounds(i.lat,i.long),i.name&&mapJS.addMarkers({lat:i.lat,lng:i.long},i.name,"home.png"),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(mapJS.gMap),t&&mapJS.drawPloygon(t,i,o)},plotGeoJSONPolygon:function(t,e,i,o,n,s,a="",r){var l="";if(mapJS.gInit(i,o,n,s),"Mumbai"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/subcity_Mumbai.geojson"),"Bangalore"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/Bangalore.geojson"),"Delhi"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/subcity_Delhi.geojson"),"Hyderabad"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/Hyderabad.geojson"),"Kolkata"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/Kolkata.geojson"),"Lucknow"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/Lucknow.geojson"),"Noida"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/Noida.geojson"),"Pune"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/Pune.geojson"),"Gurgaon"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/city_Gurgaon+(1).geojson"),"Goa"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/city_Goa.geojson"),"Jaipur"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/city_Jaipur+(1).geojson"),"Dubai"==e&&(l="https://geojsonsq.s3.ap-south-1.amazonaws.com/city_Dubai.geojson"),""==l)return;let c=new XMLHttpRequest;c.open("GET",l),c.setRequestHeader("Content-Type","application/json"),c.responseType="json",c.onload=function(){if(200===c.status){var e=L.geoJson(c.response,{style:function(e){let i;return t.has(e.properties.location_id.toString())?(i=t.get(e.properties.location_id.toString()),$("[locationid="+e.properties.location_id.toString()+"]").children(".boundary-square").css("background-color",i.colorCode)):i={colorCode:e.properties.colur_code,locationName:e.properties.name,micromarketPrice:""},{fillColor:e.properties.colur_code.toString(),weight:2,opacity:1,color:e.properties.colur_code.toString(),fillOpacity:.5}},onEachFeature:function(e,i){let o;o=t.has(e.properties.location_id.toString())?t.get(e.properties.location_id.toString()):{colorCode:e.properties.colur_code,locationName:e.properties.name,micromarketPrice:""},""!=a&&(a!=e.properties.location_id?i.setStyle({weight:.1,color:"#666",dashArray:"",fillOpacity:0}):mapJS.gMap.fitBounds(i.getBounds())),i.on("mouseover",function(){mapJS.gInfobox&&"object"==typeof mapJS.gInfobox&&(mapJS.gInfobox.close(),$(".infoBox").hide());var t=L.popup(),e=`\n\t\t\t\t\t\t<div class="MapPin3d" style="top:0px; left:-100px">\n\t\t\t\t\t\t<div class="smallToolTip3d heatmapTooltip" style="height:auto !important;"> <a href="javascript:void(0)">\n\t\t\t\t\t\t  <ul>\n\t\t\t\t\t\t  <li>\n\t\t\t\t\t\t\t<h5><span itemprop="name">${o.locationName}</h5>\n\t\t\t\t\t\t  </li>`;""!=o.micromarketPrice&&(e+=`<li class="avgPrice">Avg Price <span> ${o.micromarketPrice} </span></li>`),e+="</ul>\n\t\t\t\t\t\t  </a> </div>\n\t\t\t\t\t\t</div>",t.setLatLng(i.getBounds().getCenter()).setContent(e).openOn(mapJS.gMap)}),i.on("mouseout",function(){mapJS.gInfobox&&"object"==typeof mapJS.gInfobox&&(mapJS.gInfobox.close(),$(".infoBox").hide())}),i.on({click:function(t){mapJS.gMap.fitBounds(t.target.getBounds()),$(".cityHeader[locationid='"+e.properties.location_id+"']").length>0&&$(".cityHeader[locationid='"+e.properties.location_id+"']").click()}})}});null==r&&e.addTo(mapJS.gMap)}else console.log("failed request")},c.send()},fetchLandmarks:function(t,e,i=!1){let o=`${baseUrl}landmarks/${t}/${e}`;mapJS.gbounds=L.latLngBounds(mapJS.defaultLat,mapJS.defaultLong),mapJS.getLandmarkData(o).then(function(o){i?mapJS.loadLandMarks(e,t,o,!0):mapJS.loadLandMarks(e,t,o)})},getLandmarkData:async t=>new Promise(function(e,i){var o={url:t,method:"GET",success:function(t){e(t)},failure:function(t){i(t)},error:function(t){i(t)}};$.ajax(o)}),addMarkers:function(t,e,i){let o=L.icon({iconUrl:_CDN_IMAGES_URL+"ui-assets/images/map-icons/"+i}),n=new L.marker({lat:t.lat,lng:t.lng},{icon:o});return n.bindPopup("<p>"+e+"</p>").addTo(mapJS.gMap),n.on("mouseover",function(t){this.openPopup()}),n.on("mouseout",function(t){this.closePopup()}),mapJS.latlngcollections.push(t),mapJS.markers.push(n),mapJS.gbounds.extend(t),n},loadLandMarks:function(t,e,i,o=!1,n="CityConnections.png"){mapJS.removeAllPolyLines(),mapJS.results=o?i:i.slice(0,10),mapJS.distanceArr=[],mapJS.latlngcollections=[],mapJS.results&&(mapJS.removeMarkers(),$.each(mapJS.results,function(t,e){if(o){switch(e.FilterParentName){case"City Connection":n="railway_station.png";break;case"Shopping Center":n="mall.png";break;case"Business Hub":n="office.png";break;case"Hotel":n="hotels.png";break;case"Hospital":n="hospital.png";break;case"School":n="school.png"}}mapJS.addMarkers({lat:e.Latitude,lng:e.Longitude},e.FilterName,n)}),mapJS.gMap.fitBounds(mapJS.gbounds),mapJS.renderPlacesHTML(mapJS.results,"10",t))},removeAllPolyLines:function(){for(i in mapJS.gMap._layers)if(null!=mapJS.gMap._layers[i]._path)try{mapJS.gMap.removeLayer(mapJS.gMap._layers[i])}catch(t){console.log("problem with "+t+mapJS.gMap._layers[i])}},removeMarkers:function(){for(var t=0;t<mapJS.markers.length;t++)mapJS.gMap.removeLayer(mapJS.markers[t])},renderPlacesHTML:function(t,e,i){var o="";(o=$("#landmarkplaces_"+i)).html("");var n=new L.latLng(mapJS.defaultLat,mapJS.defaultLong);let s=[];$.each(t,function(t,e){let i=new L.latLng(e.Latitude,e.Longitude),o=n.distanceTo(i).toFixed(0)/1e3;s.push({FilterId:e.FilterId,LandmarkUrl:e.LandmarkUrl,FilterName:e.FilterName,distance:o}),s=s.sort(function(t,e){return t.distance-e.distance})}),$.each(s,function(t,e){var i=$("<tr>");o.append(i.append("<td landmarkid='"+e.FilterId+"'><a href='"+e.LandmarkUrl+"' alt='"+e.LandmarkUrl+"' target='_blank'>"+e.FilterName+"</a></td><td>"+e.distance.toFixed(2)+" km</td>"))})},drawPloygon:function(t,e,i){var o,n;t.forEach(function(t,e){var s=t.HM_Polygon,a=t.PricePerSqFt;if(1!=i&&s){if(1==i)return;n=heatMapJS.getPolyColor(parseInt(a),i);var r={id:t.SubLocationId,lid:t.PrimaryLocationId,price:t.PricePerSqFt,strokeColor:n,strokeOpacity:.6,fillColor:n,fillOpacity:.6,map:mapJS.gMap,color:n};if(1==i)return;const e=L.PolylineUtil.decode(s),l=e.filter(function(t,i){return!Number.isNaN(e[i][0])&&!Number.isNaN(e[i][1])});let c=L.polyline(l).getLatLngs();if(1==i)return;o=L.polygon(c,r),mapJS.gAllPolygons.push(o),o.addTo(mapJS.gMap),mapJS.createMarker(t,o,i)}})},createMarker:function(t,e,i=!1){var o=L.popup();e.on("click",function(e){if(mapJS.gInfobox&&"object"==typeof mapJS.gInfobox&&(mapJS.gInfobox.close(),$(".infoBox").hide()),i){var n=$("div.cityHeader[locationid='"+t.PrimaryLocationId+"']").attr("avgprice");t.priceTrendValues>=0?_content=`\n    \t\t\t<div class="MapPin3d" style="top:350px; left:200px">\n    \t\t\t<div class="smallToolTip3d heatmapTooltip" style="height:auto !important;"> <a href="javascript:void(0)">\n    \t\t\t  <ul>\n    \t\t\t\t<li>\n    \t\t\t\t  <h5>\n    \t\t\t\t  <span itemprop="name">${t.PrimaryLocation}</h5>\n    \t\t\t\t</li>\n    \t\t\t\t<li class="avgPrice">Avg Price <span>${n} / Sq. Ft.</span></li>\n    \t\t\t\t\x3c!-- <li class="quickDetails down"><em class="icon-angle-up"></em> <span class="persentBox">-0.37%</span> <span>in last 1 year</span></li> --\x3e\n    \t\t\t  </ul>\n    \t\t\t  </a> </div>\n    \t\t  </div>`:_content=`\n    \t\t\t<div class="MapPin3d" style="top:350px; left:200px">\n    \t\t\t<div class="smallToolTip3d heatmapTooltip" style="height:auto !important;"> <a href="javascript:void(0)">\n    \t\t\t  <ul>\n    \t\t\t\t<li>\n    \t\t\t\t  <h5><span itemprop="name">${t.PrimaryLocation}</h5>\n    \t\t\t\t</li>\n    \t\t\t\t<li class="avgPrice">Avg Price <span>${n} / Sq. Ft.</span></li>\n    \t\t\t\t\x3c!-- <li class="quickDetails down"><em class="icon-angle-up"></em> <span class="persentBox">-0.37%</span> <span>in last 1 year</span></li> --\x3e\n    \t\t\t  </ul>\n    \t\t\t  </a> </div>\n    \t\t  </div>`}else{var s=$("#sl_"+t.SubLocationId).html();if(null==s)return null!=mapJS.gInfobox&&mapJS.gInfobox.close(),$(".infoBox").hide(),!1;_content='<div class="smallToolTip3d priceMicro"><div ckass="topcity-tile">'+s+"</div></div>"}o.setLatLng(this.getBounds().getCenter()).setContent(_content).openOn(mapJS.gMap),i||($(".redirecturl").off("click"),$(".redirecturl").on("click",function(){var t=$(this).attr("redirecturl");window.location.href=t}))}),1==i&&(e.on("mouseover",function(e){mapJS.gInfobox&&"object"==typeof mapJS.gInfobox&&(mapJS.gInfobox.close(),$(".infoBox").hide());var i=$("div.cityHeader[locationid='"+t.PrimaryLocationId+"']").attr("avgprice");t.priceTrendValues>=0?_content=`\n            <div class="MapPin3d" style="top:350px; left:200px">\n            <div class="smallToolTip3d heatmapTooltip" style="height:auto !important;"> <a href="javascript:void(0)">\n              <ul>\n              <li>\n                <h5>\n                <span itemprop="name">${t.PrimaryLocation}</h5>\n              </li>\n              <li class="avgPrice">Avg Price <span>${i} / Sq. Ft.</span></li>\n              \x3c!-- <li class="quickDetails down"><em class="icon-angle-up"></em> <span class="persentBox">-0.37%</span> <span>in last 1 year</span></li> --\x3e\n              </ul>\n              </a> </div>\n            </div>`:_content=`\n            <div class="MapPin3d" style="top:350px; left:200px">\n            <div class="smallToolTip3d heatmapTooltip" style="height:auto !important;"> <a href="javascript:void(0)">\n              <ul>\n              <li>\n                <h5><span itemprop="name">${t.PrimaryLocation}</h5>\n              </li>\n              <li class="avgPrice">Avg Price <span>${i} / Sq. Ft.</span></li>\n              \x3c!-- <li class="quickDetails down"><em class="icon-angle-up"></em> <span class="persentBox">-0.37%</span> <span>in last 1 year</span></li> --\x3e\n              </ul>\n              </a> </div>\n            </div>`,o.setLatLng(this.getBounds().getCenter()).setContent(_content).openOn(mapJS.gMap)}),e.on("mouseout",function(t){mapJS.gInfobox&&"object"==typeof mapJS.gInfobox&&(mapJS.gInfobox.close(),$(".infoBox").hide())}))},addControlPlaceholders:function(t){var e=t._controlCorners,i="leaflet-",o=t._controlContainer;function n(t,n){var s=i+t+" "+i+n;e[t+n]=L.DomUtil.create("div",s,o)}n("verticalcenter","left"),n("verticalcenter","right")}},heatMapJS={legendColorArr:["#63be7b","#b6d87b","#fee582","#f6b579","#ef676a"],legendColorArrFor3d:["#e52165","#b20238","#d72631","#322e2f","#077b8a","#5c3c92","#12a4d9","#d9138a"],roundnum:function(t,e="L"){return"U"==e?50*Math.round((t+50)/50):50*Math.round(t/50)},generatePriceLegendsV1:function(t){for(_min=t[0].PricePerSqFt,_max=0,t.forEach(function(t,e){t.PricePerSqFt&&parseInt(t.PricePerSqFt)<parseInt(_min)&&(_min=parseInt(t.PricePerSqFt)),t.PricePerSqFt>_max&&(_max=parseInt(t.PricePerSqFt))}),_factor=(_max-_min)/5,_rangeArr=[],_lRange=0,_rRange=0,i=0;i<5;i++)0==i?_lRange=heatMapJS.roundnum(_min):_lRange=_rRange,_rRange=heatMapJS.roundnum(_lRange+_factor,"U"),_rangeArr[i]={min:_lRange,max:_rRange},$(".priceList").append(`<li data-min='${_lRange}' data-max='${_rRange}'>${_lRange.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}-${_rRange.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}</li>`);return _rangeArr},generatePriceLegends:function(t){for(t.sort(heatMapJS.sortByProperty("PricePerSqFt")),_min=t[0].PricePerSqFt,_max=t[t.length-1].PricePerSqFt,_chunkSize=Math.trunc(t.length/5),_rangeArr=[],_lRange=0,_rRange=0,i=0;i<5;i++){if(0==i?_lRange=heatMapJS.roundnum(_min):_lRange=_rRange,4==i)_rRange=heatMapJS.roundnum(_max,"U");else{var e=_chunkSize*(i+1);e>=t.length&&(e=t.length-1),_rRange=heatMapJS.roundnum(parseInt(t[e].PricePerSqFt),"U")}_rangeArr[i]={min:_lRange,max:_rRange},$(".priceList").append(`<li class="Home_Map_L3" data-min='${_lRange}' data-max='${_rRange}'>${_lRange.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}-${_rRange.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}</li>`)}return _rangeArr},generatePriceLegendsFor3dMap:function(t){for(t.forEach(function(t,e){var i=$("div.cityHeader[locationid='"+t.PrimaryLocationId+"']").attr("avgprice");null!=i&&""!=i||(i=0),t.avgprice=i}),t.sort(heatMapJS.sortByProperty("avgprice")),_min=t[0].avgprice,_max=t[t.length-1].avgprice,_chunkSize=Math.trunc(t.length/5),_rangeArr=[],_lRange=0,_rRange=0,i=0;i<5;i++){if(0==i?_lRange=heatMapJS.roundnum(_min):_lRange=_rRange,5==i)_rRange=heatMapJS.roundnum(_max,"U");else{var e=_chunkSize*(i+1);e>=t.length&&(e=t.length-1),_rRange=heatMapJS.roundnum(parseInt(t[e].avgprice),"U")}_rangeArr[i]={min:_lRange,max:_rRange},$(".priceList").append(`<li class="Home_Map_L3" data-min='${_lRange}' data-max='${_rRange}'>${_lRange.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}-${_rRange.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}</li>`)}return _rangeArr},getPolyColor:function(t,e){return _color="",t?mapJS.rangeArray.forEach(function(i,o){if(t>=i.min&&t<i.max)return _color=1==e?heatMapJS.legendColorArrFor3d[o]:heatMapJS.legendColorArr[o],!1}):_color="#ccc",_color},getPolyColorFor3d:function(t){return _color=heatMapJS.legendColorArrFor3d[t],_color},sortByProperty:function(t){return function(e,i){return parseInt(e[t])-parseInt(i[t])}}},dsemapfunction={type:"dsenew",types:["dsenew","resale","rental"],filters:{},landmark:!1,landmarkLat:null,landmarkLong:null,init:function(t){var e=new URL(window.location.href).searchParams.get("viewport"),i={};if(e||window.viewportUp){e||(e=window.viewportUp);var o={northeast:{lat:(e=e.split("|").map(function(t){return t.split(",")}))[0][0],lng:e[0][1]},southwest:{lat:e[1][0],lng:e[1][1]}};i={lat:(parseFloat(o.southwest.lat)+parseFloat(o.northeast.lat))/2,lng:(parseFloat(o.southwest.lng)+parseFloat(o.northeast.lng))/2}}window.dse_map_obj||$.when(dsemapfunction.init_dse_map(t,i)).then(function(){dsemapfunction.addMarkers(t),dsemapfunction.defaultFunction(),setTimeout(function(){"dsenew"==dsemapfunction.type?null==dsemapfunction.subtype&&0==dsemapfunction.landmark&&dsemapfunction.loadMoreDots(!1):dsemapfunction.loadMoreDotsRentalResale(!1)},100)})},defaultFunction:function(){$("#dseprojectdata .tileBox").hover(function(){var t="mprop_"+$(this).attr("id").split("_")[1];if($("#"+t).length>0){$("#"+t).addClass("hoverTile");var e=$("#"+t).data("srcset");e.id=t,dsemapfunction.makeTooltip(e)}},function(){var t="mprop_"+$(this).attr("id").split("_")[1];$("#"+t).length>0&&($("#"+t).removeClass("hoverTile"),$("#"+t).html(""),null!=popper&&popper.destroy())}),window.autorefresh=!0,window.mapMoved=!1,$("#map_auto_refresh_checkbox").change(function(){$(this).is(":checked")?window.autorefresh=!0:window.autorefresh=!1}),$("#map_search_check button").click(function(){setTimeout(function(){"dsenew"==dsemapfunction.type?dsemapfunction.loadMoreAjax():"resale"!=dsemapfunction.type&&"rental"!=dsemapfunction.type||dsemapfunction.loadMoreDotsRentalResale(!0),$("#map_search_check label").show(),$("#map_search_check button").hide(),$("#map_auto_refresh_checkbox").attr("checked",!0),$("#map_auto_refresh_checkbox").prop("checked",!0)})})},init_dse_map:function(t,e){var i=window._zoomLevel.CITY;if(i=null!=i&&i>0?parseInt(i):11,void 0!==window.L&&null!==window.L){var o,n,s,a;if($.isEmptyObject(e))if("dsenew"==dsemapfunction.type?t.forEach(t=>null!=t._source.cityLat&&null!=t._source.cityLong&&window.zoom_level==i?(o=t._source.cityLat,n=t._source.cityLong,!1):(null!=s||(s=t._source.latitude,a=t._source.longitude,window.zoom_level!=i))&&void 0):t.forEach(t=>{if(null!=t.localityLatitude&&null!=t.localityLongitude&&null==o&&0!=t.localityLatitude&&0!=t.localityLongitude)return o=t.localityLatitude,n=t.localityLongitude,!1}),null!=o)e={lat:o,lng:n};else e={lat:s,lng:a};new URL(window.location.href);var r=window.zoom_level;r=null!=r&&r>0?parseInt(r):i;var l=e;return 1==dsemapfunction.landmark&&null!=dsemapfunction.landmarkLat&&(l={lat:dsemapfunction.landmarkLat,lng:dsemapfunction.landmarkLong},r=12),window.dse_map_obj=new L.map(document.getElementById("map"),{zoom:r,center:l}),dsemapfunction.addControlPlaceholders(window.dse_map_obj),window.dse_map_obj.zoomControl.setPosition("verticalcenterright"),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(window.dse_map_obj),dsemapfunction.mapConfigureEvents(),!0}return dsemapfunction.init()},addControlPlaceholders:function(t){var e=t._controlCorners,i="leaflet-",o=t._controlContainer;function n(t,n){var s=i+t+" "+i+n;e[t+n]=L.DomUtil.create("div",s,o)}n("verticalcenter","left"),n("verticalcenter","right")},mapConfigureEvents:function(){window.dse_map_obj.on("click",function(t){$(".mapPointer").removeClass("active")}),window.mapEventChanged=!1;var t=!0,e={};window.dse_map_obj.on("move",function(){window.map_bound=window.dse_map_obj.getBounds()}),window.dse_map_obj.on("moveend",function(){if(window.map_bound=window.dse_map_obj.getBounds(),window.mapEventChanged)return window.mapEventChanged=!1,void(t=!1);t=!0,e=window.dse_map_obj.getBounds()}),"dsenew"!=dsemapfunction.type&&"resale"!=dsemapfunction.type&&"rental"!=dsemapfunction.type||window.dse_map_obj.on("moveend",function(){if(t&&!$.isEmptyObject(e)){window.map_bound=e;var i=e.getNorthEast().lat+","+e.getNorthEast().lng+"|"+(e.getSouthWest().lat+","+e.getSouthWest().lng);window.viewportUp=i,1==window.autorefresh?setTimeout(function(){window.mapMoved=!0,"dsenew"==dsemapfunction.type?dsemapfunction.loadMoreAjax():"resale"!=dsemapfunction.type&&"rental"!=dsemapfunction.type||dsemapfunction.loadMoreDotsRentalResale(!0)}):($("#map_search_check label").hide(),$("#map_search_check button").show())}})},loadMoreAjax:function(){if(null!=dsemapfunction.subtype&&"coliving"==dsemapfunction.subtype)return!1;let t=dsefunction.getFilters(),e={viewport:window.viewportUp,urlFilter:t};dsemapfunction.removeMarkers(),dsemapfunction.loadMoreDots(!0),$.ajax({async:!0,global:!1,url:"/getdsetile",data:e,dataType:"html",method:"POST",beforeSend:function(){$(".progressMap").show()},complete:function(){$(".progressMap").hide()},success:function(t){t=JSON.parse(t),dsemapfunction.addMarkers(t.data),$("#mapTilediv").html(t.view),dsemapfunction.defaultFunction(),dsefunction.init()}})},loadMoreDots:function(t){if(null!=window.map_bound){let i=dsefunction.getFilters();if(null==window.viewportUp){var e=window.map_bound.getNorthEast().lat+","+window.map_bound.getNorthEast().lng+"|"+(window.map_bound.getSouthWest().lat+","+window.map_bound.getSouthWest().lng);window.viewportUp=e}let o={viewport:1==t?window.viewportUp:void 0,urlFilter:i,dotPage:!0};$.ajax({async:!0,global:!1,url:"/getdsedots",data:o,dataType:"html",method:"POST",success:function(t){t=JSON.parse(t),dsemapfunction.addMarkers(t.data),dsefunction.init()}})}else setTimeout(function(){dsemapfunction.loadMoreDots(t)},100)},loadMoreDotsRentalResale:function(t=!1){var e=dsemapfunction.filters;if(null==window.viewportUp&&1==t){let t=window.map_bound.getNorthEast().lat+","+window.map_bound.getNorthEast().lng,e=window.map_bound.getSouthWest().lat+","+window.map_bound.getSouthWest().lng;window.viewportUp=t+"|"+e}1==t&&dsemapfunction.removeMarkers(),e.viewport=1==t?window.viewportUp:void 0;var i={async:!0,global:!1,url:"/"+dsemapfunction.type+"/listing-map-data",data:e,dataType:"html",method:"POST",success:function(t){var e=(t=JSON.parse(t)).data.data.map(t=>t._source);dsemapfunction.addMarkers(e),$("#mapTilediv").html(t.view)}};1==t&&(i.beforeSend=function(){$(".progressMap").show()},i.complete=function(){$(".progressMap").hide()}),$.ajax(i)},addPopper:function(t){var e=$("#"+t),i=$(e).find(".mapPointerDetails");i.parent().parent().css("z-index","9999999");var o=$("#map");(popper=new Popper(e,i,{placement:"right-mid",boundariesPadding:10,offset:10,boundariesElement:o,modifiers:{boundariesElement:o,preventOverflow:{enabled:!0,padding:"20"},flip:{enabled:!0,priority:["right","top","left","bottom"],padding:"20"},flip:{padding:0},offset:{enabled:!0,offset:"0,5"}}})).update()},dataTooltip:function(t){if("dsenew"==dsemapfunction.type)if("coliving"==dsemapfunction.subtype)var e={latitude:t.latitude,longitude:t.longitude,projectId:t.projectId,projectName:t.projectName,subLocation:t.subLocation.replace(/([\.\?\*\&\+\^\$\[\]\\\(\)\{\}\|\-\'])/g,""),city:t.city,flagshipImage:t.flagshipImage,isAssured:t.isAssured,property_price:t.property_price,projectUrl:t.projectUrl};else e={latitude:t.latitude,longitude:t.longitude,projectId:t.projectId,projectName:t.projectName,subLocation:t.subLocation.replace(/([\.\?\*\&\+\^\$\[\]\\\(\)\{\}\|\-\'])/g,""),city:t.city,flagshipImage:t.flagshipImage,isAssured:t.isAssured,lowCostText:t.lowCostText,highCostText:t.highCostText,projectUrl:t.projectUrl};else e={latitude:t.loc_positions.lat,longitude:t.loc_positions.long,projectId:t.propertyId,projectName:t.propertyTitle,subLocation:t.locality,city:t.cityName,flagshipImage:t.imageName,isAssured:0,lowCostText:0,highCostText:t.totalPrice,projectUrl:"google.com",pType:t.propertyType};return JSON.stringify(e)},makeTooltip:function(t){null!=t&&""==$("#"+t.id).html()&&($("#"+t.id).append(dsemapfunction.getTooltip(t)),dsemapfunction.addPopper(t.id))},addMarkers:function(t){if("dsenew"==dsemapfunction.type?t.forEach(t=>{if(0==$("#mprop_"+t._source.projectId).length){var e="<a target='_blank' data-srcset='"+dsemapfunction.dataTooltip(t._source)+"' id='mprop_"+t._source.projectId+"' class='mapDot' href='"+window.location.origin+"/"+t._source.projectUrl+"'></a>",i={lat:parseFloat(t._source.latitude),lng:parseFloat(t._source.longitude)};dsemapfunction.marker_maker(window.dse_map_obj,i,e)}}):t.forEach(t=>{if(0==$("#mprop_"+t.propertyId).length){if(""!=t.buildingLatitude&&""!=t.buildingLongitude)var e={lat:parseFloat(t.buildingLatitude),lng:parseFloat(t.buildingLongitude)};else e={lat:parseFloat(t.localityLatitude),lng:parseFloat(t.localityLongitude)};t.loc_positions=e;var i="<a target='_blank' id='mprop_"+t.propertyId+"' class='mapDot' href='"+window.location.origin+"/"+t.url+"' data-srcset='"+dsemapfunction.dataTooltip(t)+"'></a>";dsemapfunction.marker_maker(window.dse_map_obj,e,i)}}),1==dsemapfunction.landmark){loc_positions={lat:dsemapfunction.landmarkLat,lng:dsemapfunction.landmarkLong};dsemapfunction.marker_maker(window.dse_map_obj,loc_positions,"<a target='_blank' class='mapDot' style='background-color: #F44336;'></a>",!0)}if(null!=window.encodedStr&&null==ploygonAr&&0==dsemapfunction.landmark){const t={geodesic:!0,strokeColor:"#132285",strokeOpacity:1,strokeWeight:2,fillColor:"#13228585",map:window.dse_map_obj,color:"#132285"},e=L.PolylineUtil.decode(window.encodedStr),i=e.filter(function(t,i){return!Number.isNaN(e[i][0])&&!Number.isNaN(e[i][1])});let o=L.polyline(i).getLatLngs();(ploygonAr=L.polygon(o,t)).addTo(window.dse_map_obj)}},marker_maker:function(t,e,i,o=!1){var n=L.divIcon({className:"custom-div-icon",html:i,iconSize:[30,42],iconAnchor:[15,42]});mpos=new L.latLng(e);var s=L.marker(mpos,{icon:n,content:i});(s.id=$(i).attr("id"),s.on({mouseover:function(t){var e="";if(t.target.id?e=t.target.id:t.target.parentElement&&(e=$(t.target.parentElement.parentElement).attr("id")),null!=e&&""!=e){var i=$("#"+e).data("srcset");i.id=e,dsemapfunction.makeTooltip(i)}}}),s.addTo(t),1==o&&null==circleAr)&&(circleAr=!0,L.circleMarker(mpos,{radius:3e3,fillColor:"#AA0000",strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillOpacity:.35}).bindPopup(i).addTo(t));return gmarkers.push(s),s},removeMarkers:function(){for(i=0;i<gmarkers.length;i++)window.dse_map_obj.removeLayer(gmarkers[i])},getTooltip:function(t){var e=t.flagshipImage?"":"noImage",i=[];return t.subLocation&&i.push('<span itemprop="addressLocality">'+t.subLocation+"</span>"),t.city&&i.push('<span itemprop="addressRegion">'+t.city+"</span>"),'<div class="mapPointerDetails"><div class="tileBox '+e+'" itemscope="" itemtype="https://schema.org/ApartmentComplex"> <div class="tileBody" > '+dsemapfunction.getPicture(t)+' <strong itemprop="name">'+t.projectName+'</strong> <p itemprop="address" itemscope="" itemtype="//schema.org/PostalAddress">'+i.join(", ")+'</p> <div class="priceBox" itemscope="" itemtype="//schema.org/PriceSpecification"> <span class="price"> '+dsemapfunction.getPrice(t)+" </span> </div></div></div></div>"},getPrice:function(t,e=!1){if("dsenew"!=dsemapfunction.type)return t.highCostText>0?"&#8377; "+dsemapfunction.priceModify(t.highCostText):"Price on Request";if(null!=dsemapfunction.subtype&&"coliving"==dsemapfunction.subtype)return t.property_price>0?" "+t.property_price+" /month onwards":"Price on Request";if(t.highCostText!=t.lowCostText&&0==e)if("Dubai"==t.city)var i='<small itemprop="minPrice">'+t.lowCostText+'</small> to <small itemprop="maxPrice">'+t.highCostText+'</small> <small itemprop="priceCurrency">AED</small>';else i='<small itemprop="priceCurrency">&#8377;</small> <small itemprop="minPrice">'+t.lowCostText+'</small> to <small itemprop="maxPrice">'+t.highCostText+"</small>";else if(0!=t.lowCostText)if("Dubai"==t.city)i=t.lowCostText+" AED";else i="Starting From &#8377;"+t.lowCostText;else i="Price on Request";return i},priceModify:function(t){var e=t;isNaN(t)&&(e=t.replace(/\s/g,""));var i=Math.round(e).toString().length;return i<6?e.toString().replace(/(\d)(?=(\d\d)+\d(?!\d))/g,"$1,"):(i<=7?(e/=Math.pow(10,5),e=Math.floor(100*e)/100,e+=" Lac"):(e/=Math.pow(10,7),e=Math.floor(100*e)/100,e+=" Cr."),e.toString())},getPicture:function(t){return"dsenew"!=dsemapfunction.type?t.flagshipImage?(t.flagshipImage=t.flagshipImage.replace("http://sqy.s3-website-ap-southeast-1.amazonaws.com/","https://s3-ap-southeast-1.amazonaws.com/sqy/"),'<div class="figureBox" itemscope="" itemtype="http://schema.org/ImageObject"><picture> <source class="img-responsive" srcset="'+t.flagshipImage+'" type="image/webp"> <source class="img-responsive" srcset="'+t.flagshipImage+'" type="image/jpeg"> <img itemprop="image" class="img-responsive" src="'+t.flagshipImage+'" alt="'+t.projectName+' Flagship"> </picture></div>'):"":null==dsemapfunction.subtype?'<div class="figureBox" itemscope="" itemtype="http://schema.org/ImageObject"><picture> <source class="img-responsive" srcset="'+_CDN_IMAGES_URL+t.flagshipImage+'" type="image/webp"> <source class="img-responsive" srcset="'+_CDN_IMAGES_URL+t.flagshipImage+'" type="image/jpeg"> <img itemprop="image" class="img-responsive" src="'+_CDN_IMAGES_URL+t.flagshipImage+'" alt="'+t.projectName+' Flagship"> </picture></div>':"coliving"==dsemapfunction.subtype?'<div class="figureBox" itemscope="" itemtype="http://schema.org/ImageObject"><picture> <source class="img-responsive" srcset="'+t.flagshipImage+'?d=150x125" type="image/webp"> <source class="img-responsive" srcset="'+t.flagshipImage+'?d=150x125" type="image/jpeg"> <img itemprop="image" class="img-responsive" src="'+t.flagshipImage+'?d=150x125" alt="'+t.projectName+' Flagship" onerror="loaddefaultimage(this)"> </picture></div>':void 0}},dseAgentMap={init:function(t){if(t.length){var e={lat:t[0].latitude,lng:t[0].longitude};window.map_loc_obj=L.map(document.getElementById("mapAgent"),{zoom:13,center:e}),dseAgentMap.addControlPlaceholders(window.map_loc_obj),window.map_loc_obj.zoomControl.setPosition("verticalcenterright"),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(window.map_loc_obj);var i=new L.latLngBounds;t.forEach(t=>{dseAgentMap.marker_maker(window.map_loc_obj,t),i.extend(L.latLng(t.latitude,t.longitude))}),window.map_loc_obj.fitBounds(i)}},marker_maker:function(t,e){mpos=L.latLng(e.latitude,e.longitude);var i=`<div class="pointerBox">\n\t\t<pointer>\n\t\t\t${e.agentPremium?'<div class="tagBox premium"></div>':"Employee"==e.userType||"agent"==e.userType?'<div class="tagBox sy"></div>':""}\n\t\t  <figure class="clr ${e.profilePicture?"":"clr"+getColorNum(e.userId)}"> `+(e.profilePicture?`<picture><img src="${e.profilePicture}" alt="" class="img-responsive" onerror="this.src='${_CDN_IMAGES_URL}ui-assets/images/avatar2.png';"></picture>`:e.userName[0].toUpperCase())+`\t\t\t\n\t\t  </figure>\n\t\t</pointer>\n\t\t<div class="tooltipBox">\n\t\t  <div class="agentTileBody"><em class="icon-close"></em>\n\t\t\t<div class="box"><a href="${baseUrl+pageType+"/"+makeSlug(e.userName)+"/"+e.userId}"> <strong>${e.userName}</strong></a>\n\t\t\t  <p class="city"><em class="icon-location-pointer"></em>${[e.cityName,e.stateName].filter(function(t){return t}).join(", ")}</p>\n\t\t\t  ${Math.round(e.experience)||e.listingCount||e.languageName?"<hr>":""}\n\t\t\t  <ul class="discBox">\n\t\t\t\t  ${Math.round(e.experience)?"<li><span>"+Math.round(e.experience)+"</span> Year"+(e.experience>1?"s":"")+" Experience</li>":""}\n\t\t\t\t  ${e.listingCount?"<li><span>"+e.listingCount+"</span> "+("expert"==pageType?"Transaction":"Listing")+(e.listingCount>1?"s":"")+"</li>":""}\n\t\t\t\t  ${e.languageName?"<li>Speaks: <span>"+e.languageName+"</span></li>":""}`;if(e.startDate){var o=new Date(e.startDate);i+='<li><span class="ellipsisBox">Agent Since: <span title="<%= v.startDate %>">'+o.toLocaleString("default",{month:"short"})+" "+o.getFullYear()+"</span></span></li>"}i+=`</ul>\n\t\t\t  <div class="starBox">\n\t\t\t\t<div class="starRating">\n\t\t\t\t  <div class="rating" style="width:calc(20%*${e.agentRating?e.agentRating:0})"></div>\n\t\t\t\t  <img src="${_CDN_IMAGES_URL}ui-assets/images/gray-star.jpg" alt=""></div>\n\t\t\t  </div>\n\t\t\t</div>\n\t\t  </div>\n\t\t</div>\n\t  </div>`;var n=L.divIcon({className:"custom-div-icon",html:i,iconSize:[30,42],iconAnchor:[15,42]});let s=L.marker(mpos,{icon:n,content:i});return s.addTo(t),s},removeMarkers:function(){for(i=0;i<gmarkers.length;i++)gmarkers[i].removeLayer(gmarkers[i])},addControlPlaceholders:function(t){var e=t._controlCorners,i="leaflet-",o=t._controlContainer;function n(t,n){var s=i+t+" "+i+n;e[t+n]=L.DomUtil.create("div",s,o)}n("verticalcenter","left"),n("verticalcenter","right")}},onesAndTeens=["","one ","two ","three ","four ","five ","six ","seven ","eight ","nine ","ten ","eleven ","twelve ","thirteen ","fourteen ","fifteen ","sixteen ","seventeen ","eighteen ","nineteen "],tens=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];const helperJS={setCookie:(t,e,i=24)=>{const o=new Date;o.setTime(o.getTime()+60*i*60*1e3),"object"==typeof e&&(e=JSON.stringify(e));const n=t+"="+e+";"+("expires="+o.toUTCString())+";path=/";document.cookie=n},getCookie:t=>{const e=document.cookie.split(";");let i=null;for(var o=0;o<e.length;o++){let n=e[o];if(n.split("=")[0].trim()==t){let t=n.split("=")[1].trim();try{try{i=JSON.parse(t)}catch(e){i=t}}catch{i=[]}break}}return i},setLocalItem:(t,e)=>{const i=JSON.stringify(e);localStorage.setItem(t,i)},getLocalItem:t=>{let e=localStorage.getItem(t);return e&&(e=JSON.parse(e)),e},setSessionItem:(t,e)=>{const i=JSON.stringify(e);sessionStorage.setItem(t,i)},getSessionItem:t=>{let e=sessionStorage.getItem(t);return e&&(e=JSON.parse(e)),e},ajaxGetData:async t=>new Promise(function(e,i){var o={url:t,method:"GET",success:function(t){e(t)},failure:function(t){console.log("failure",t),i(t)},error:function(t){console.log("error",t),i(t)}};$.ajax(o)}),bindCompare:()=>{let t=helperJS.getCookie("selected_fav_tab").type||"PROJECT",e=helperJS.getCookie("checkedFavs")||[],i=helperJS.getCookie("rental_checkedFavs")||[],o=helperJS.getCookie("resale_checkedFavs")||[];"RENTAL"==t&&i.length>1||"RESALE"==t&&o.length>1||"PROJECT"==t&&e.length>1?($("#shortlist-compare").removeAttr("disabled"),$("#shortlist-error").hide()):($("#shortlist-compare").attr("disabled","disabled"),$("#shortlist-error").hide())},addCheckedShortlist:(t,e)=>{checkedFavs=helperJS.getCookie(e+"_checkedFavs")||[],""==e&&(checkedFavs=helperJS.getCookie("checkedFavs")||[]);let i=-1;for(let e=0;e<checkedFavs.length;e++)checkedFavs[e]==t&&(i=e);i<0&&checkedFavs.push(t),""==e?helperJS.setCookie("checkedFavs",checkedFavs):helperJS.setCookie(e+"_checkedFavs",checkedFavs),helperJS.addShortListInUserDB(t,e)},addShortListInUserDB:(t,e)=>{var i="new";""!=e&&(i=e,"resale"==e.toLowerCase()&&(i="sale"),"rental"==e.toLowerCase()&&(i="rent")),$.ajax({type:"POST",url:"/user/shortlist/add",dataType:"json",data:{type:i,projectId:t},success:function(t){console.log(t)},failure:function(t){console.log(`error: ${t}`)}})},removeCheckedShortlist:(t,e)=>{if(""==e){let e=helperJS.getCookie("checkedFavs")||[],i=-1;for(let o=0;o<e.length;o++)e[o]==t&&(i=o);i>-1&&e.splice(i,1),helperJS.setCookie("checkedFavs",e)}else{let i=helperJS.getCookie(e+"_checkedFavs")||[],o=-1;for(let e=0;e<i.length;e++)i[e]==t&&(o=e);o>-1&&i.splice(o,1),helperJS.setCookie(e+"_checkedFavs",i)}helperJS.removeShortListInUserDB(t,e)},removeShortListInUserDB:(t,e)=>{var i="new";""!=e&&(i=e,"resale"==e.toLowerCase()&&(i="sale"),"rental"==e.toLowerCase()&&(i="rent")),$.ajax({type:"POST",url:"/user/shortlist/delete",dataType:"json",data:{type:i,projectId:t},success:function(t){console.log(t)},failure:function(t){console.log(`error: ${t}`)}})},addOrRemoveFav:(t,e,i,o)=>{if(""==i&&""==o){let o=helperJS.getCookie("favs")||[],n=-1;for(let i=0;i<o.length;i++)o[i].projectId==t&&o[i].unitId==e&&(n=i);let s="";if("undefined"!=typeof dataLayer)for(let t=0;t<dataLayer.length;t++)if(dataLayer[t].PageType){s=dataLayer[t].PageType;break}let a={projectId:t,type:"New Projects",pageType:s};n>-1?(o.splice(n,1),helperJS.removeShortListInUserDB(t,i),_paq.push(["trackEvent","shortlist","remove",JSON.stringify(a)])):(o.push({projectId:t,unitId:e}),helperJS.addCheckedShortlist(t,i,"add"),_paq.push(["trackEvent","shortlist","add",JSON.stringify(a)])),helperJS.setCookie("favs",o)}else{let e=helperJS.getCookie(i+"_favs")||[],n=-1;for(let i=0;i<e.length;i++)e[i].propertyid==t&&(n=i);let s="";if("undefined"!=typeof dataLayer)for(let t=0;t<dataLayer.length;t++)if(dataLayer[t].PageType){s=dataLayer[t].PageType;break}let a={propertyId:t,type:"resale"==i?"Resale":"Rental",agentName:$("#prop_"+t+" .infoBox strong span ").html(),agentId:$("#prop_"+t).attr("data-user"),pageType:s};n>-1?(e.splice(n,1),helperJS.removeShortListInUserDB(t,i),_paq.push(["trackEvent","shortlist","remove",JSON.stringify(a)])):(e.push(o),helperJS.addCheckedShortlist(t,i,""),_paq.push(["trackEvent","shortlist","add",JSON.stringify(a)])),helperJS.setCookie(i+"_favs",e)}},removeFavByProjectId:(t,e)=>{if(""==e){let e=(helperJS.getCookie("favs")||[]).filter(e=>e.projectId!=t);helperJS.setCookie("favs",e)}else{let i=(helperJS.getCookie(e+"_favs")||[]).filter(e=>e.propertyid!=t);helperJS.setCookie(e+"_favs",i)}},bindShortlistWindow:()=>{var t=(Math.floor(1e4*Math.random())+1e4).toString().substring(1);let e=baseUrl+"shortlist/"+t;var i=$("header").attr("page");null!=i&&null!=i&&""!=i&&("DSE"!=i&&"DSE-SEARCH"!=i&&"LISTING"!=i&&"AZURO_LISTING"!=i||(e=baseUrl+"shortlistDSE/"+t)),helperJS.ajaxGetData(e).then(function(t){let e=helperJS.getCookie("favs")||[],i=helperJS.getCookie("resale_favs")||[],o=helperJS.getCookie("rental_favs")||[],n=(helperJS.getCookie("selected_fav_tab").type,e.length+i.length+o.length);n>0?$("header .topNav ul li#Favorite_Icon em").addClass("active"):$("header .topNav ul li#Favorite_Icon em").removeClass("active"),$("#favnumber").length>0&&(n>0?$("#favnumber").show().html(n):$("#favnumber").hide()),$("#favnumber").length>0&&(n>0?($(".countNum").html(n),screen.width<800&&$(".countNum").show()):$(".countNum").hide()),$("#shortlist-error").hide(),$("#projectTiles").html(t),$("#shotlistPopup .projectcheckboxes").click(function(){$(this);let t=$(this).data("projectid");this.checked?helperJS.addCheckedShortlist(t,""):helperJS.removeCheckedShortlist(t,""),helperJS.bindCompare()}),$("#shotlistPopup .resalecheckboxes").click(function(){$(this);let t=$(this).data("projectid");this.checked?helperJS.addCheckedShortlist(t,"resale"):helperJS.removeCheckedShortlist(t,"resale"),helperJS.bindCompare()}),$("#shotlistPopup .rentalcheckboxes").click(function(){$(this);let t=$(this).data("projectid");this.checked?helperJS.addCheckedShortlist(t,"rental"):helperJS.removeCheckedShortlist(t,"rental"),helperJS.bindCompare()}),$("#shotlistPopup .deleteItem em").click(function(){let t=$(this).data("projectid"),e="";e=void 0!==$(this).data("type")?$(this).data("type"):"",$(this).parents(".projectTile").remove(),helperJS.removeFavByProjectId(t,e),helperJS.removeCheckedShortlist(t,e),helperJS.bindShortlistWindow()});let s=helperJS.getCookie("checkedFavs")||[],a=$("#shotlistPopup .projectcheckboxes");a.removeAttr("checked"),$.each(a,function(t,e){$projectCheckbox=$(e);let i=$projectCheckbox.data("projectid");for(let t=0;t<s.length;t++)i==s[t]&&$projectCheckbox.attr("checked","checked")});let r=helperJS.getCookie("resale_checkedFavs")||[],l=$("#shotlistPopup .resalecheckboxes");l.removeAttr("checked"),$.each(l,function(t,e){$resaleCheckbox=$(e);let i=$resaleCheckbox.data("projectid");for(let t=0;t<r.length;t++)i==r[t]&&$resaleCheckbox.attr("checked","checked")});let c=helperJS.getCookie("rental_checkedFavs")||[],h=$("#shotlistPopup .rentalcheckboxes");h.removeAttr("checked"),$.each(h,function(t,e){$rentalCheckbox=$(e);let i=$rentalCheckbox.data("projectid");for(let t=0;t<c.length;t++)i==c[t]&&$rentalCheckbox.attr("checked","checked")}),helperJS.bindShortlistColors(),helperJS.bindRentalResaleShortlistColors(),helperJS.bindCompare()})},bindShortlistColors:()=>{let t=$(".shortlistcontainerlink"),e=helperJS.getCookie("favs");t.removeClass("active"),$.each(t,(t,i)=>{$shortlistIcon=$(i);let o=$shortlistIcon.data("projectid"),n=$shortlistIcon.data("unitid")||0;if(e)for(let t=0;t<e.length;t++)o==e[t].projectId&&n==e[t].unitId&&$shortlistIcon.addClass("active")})},bindRentalResaleShortlistColors:()=>{let t=$(".shortlistcontainerlink1"),e=helperJS.getCookie("rental_favs"),i=helperJS.getCookie("resale_favs");t.removeClass("active"),$.each(t,(t,i)=>{$shortlistIcon=$(i);let o=$shortlistIcon.data("propertyid");if(e)for(let t=0;t<e.length;t++)o==e[t].propertyid&&$shortlistIcon.addClass("active")}),$.each(t,(t,e)=>{$shortlistIcon=$(e);let o=$shortlistIcon.data("propertyid");if(i)for(let t=0;t<i.length;t++)o==i[t].propertyid&&$shortlistIcon.addClass("active")})},bindResaleShortlistColors:()=>{let t=$(".shortlistcontainerlink1"),e=helperJS.getCookie("resale_favs");t.removeClass("active"),$.each(t,(t,i)=>{$shortlistIcon=$(i);let o=$shortlistIcon.data("propertyid");if(e)for(let t=0;t<e.length;t++)o==e[t].propertyid&&$shortlistIcon.addClass("active")})},bindRentalShortlistColors:()=>{let t=$(".shortlistcontainerlink1"),e=helperJS.getCookie("rental_favs");t.removeClass("active"),$.each(t,(t,i)=>{$shortlistIcon=$(i);let o=$shortlistIcon.data("propertyid");if(e)for(let t=0;t<e.length;t++)o==e[t].propertyid&&$shortlistIcon.addClass("active")})},initializeInputs:()=>{let t=helperJS.getCookie("favs")||[],e=helperJS.getCookie("resale_favs")||[],i=helperJS.getCookie("rental_favs")||[],o=t.length+e.length+i.length;$("#favnumber").length>0&&(o>0?$("#favnumber").show().html(o):$("#favnumber").hide()),$("#favnumber").length>0&&(o>0?($(".countNum").html(o),screen.width<800&&$(".countNum").show()):$(".countNum").hide()),helperJS.bindShortlistWindow();let n="";$("#shotlistPopup").hover(function(){n&&(clearTimeout(n),n="")},function(){n=setTimeout(function(){$("#shotlistPopup").removeClass("active")},2e3)}),$(".shortlistcontainerlink").off("click"),$(".shortlistcontainerlink").on("click",function(t){helperJS.setCookie("notification",1),helperJS.setCookie("selected_fav_tab",{type:"PROJECT"}),helperJS.initializeShortlisting(),n&&(clearTimeout(n),n="");let e=$(this).data("projectid"),i=$(this).data("unitid")||0,o=helperJS.getCookie("checkedFavs")||[],s=[];o.length>0&&(s=o.filter(t=>e!=t)),helperJS.isMobileBrowser()&&(o.length==s.length?($(".Shorttlis").show(),setTimeout(function(){$(".Shorttlis").hide()},2e3)):($(".Shorttlis1").show(),setTimeout(function(){$(".Shorttlis1").hide()},2e3))),helperJS.setCookie("checkedFavs",s),helperJS.addOrRemoveFav(e,i,"",""),helperJS.bindShortlistWindow(),helperJS.bindShortlistColors(),helperJS.isMobileBrowser()||($("#shotlistPopup").addClass("active"),n=setTimeout(function(){$("#shotlistPopup").removeClass("active")},2e3)),$(".shortlistDiv").addClass("shake-horizontal"),setTimeout(function(){$(".shortlistDiv").removeClass("shake-horizontal")},300),$(this).toggleClass("active"),helperJS.bindCompare(),helperJS.isMobileBrowser()&&$("#Favorite_Icon").click(),t.stopPropagation()}),$(".sortList").on("click",function(){helperJS.setCookie("notification",0)}),$(".shortlistheader .icon-close").on("click",function(){helperJS.getNotified()}),$(".shortlistcontainerlink1").off("click"),$(".shortlistcontainerlink1").on("click",function(t){t.preventDefault(),t.stopPropagation(),helperJS.setCookie("notification",1),n&&(clearTimeout(n),n="");let e=$(this).data("propertyid"),i={},o=$(this).data("price"),s=$(this).data("name"),a=$(this).data("locality"),r=$(this).data("propertyid"),l=$(this).data("image");null!=l&&null!=l&&-1!=l.indexOf("?")&&(l=l.split("?")[0]);let c,h,d=$(this).data("type");$(this).data("url");i={price:o,name:s,locality:a,propertyid:r,image:l,type:d};let u=[];"resale"==d?(c=helperJS.getCookie("resale_checkedFavs")||[]).length>0&&(u=c.filter(t=>r!=t),helperJS.setCookie("resale_checkedFavs",u)):(h=helperJS.getCookie("rental_checkedFavs")||[]).length>0&&(u=h.filter(t=>r!=t),helperJS.setCookie("rental_checkedFavs",u)),helperJS.isMobileBrowser()&&(("resale"==d?c.length==u.length:h.length==u.length)?($(".Shorttlis").show(),setTimeout(function(){$(".Shorttlis").hide()},2e3)):($(".Shorttlis1").show(),setTimeout(function(){$(".Shorttlis1").hide()},2e3))),helperJS.addOrRemoveFav(e,0,d,i),helperJS.bindShortlistWindow(),"resale"==d?(helperJS.setCookie("selected_fav_tab",{type:"RESALE"}),helperJS.bindResaleShortlistColors(),helperJS.initializeShortlisting()):(helperJS.setCookie("selected_fav_tab",{type:"RENTAL"}),helperJS.bindRentalShortlistColors(),helperJS.initializeShortlisting()),helperJS.isMobileBrowser()||($("#shotlistPopup").addClass("active"),n=setTimeout(function(){$("#shotlistPopup").removeClass("active")},2e3)),$(".shortlistDiv").addClass("shake-horizontal"),setTimeout(function(){$(".shortlistDiv").removeClass("shake-horizontal")},300),$(this).toggleClass("active"),helperJS.bindCompare(),helperJS.isMobileBrowser()&&$("#Favorite_Icon").click(),t.stopPropagation(),t.preventDefault()}),$("#resale_shortlist_tab").off("click"),$("#resale_shortlist_tab").on("click",function(){helperJS.setCookie("selected_fav_tab",{type:"RESALE"}),$("#project_shortlist_tab").removeClass("active"),$("#rental_shortlist_tab").removeClass("active"),$("#resale_shortlist_tab").addClass("active"),$('div[id^="shortlistProject"]').hide(),$('div[id^="shortlistRental"]').hide(),$('div[id^="shortlistResale"]').show(),helperJS.initializeShortlisting()}),$("#rental_shortlist_tab").off("click"),$("#rental_shortlist_tab").on("click",function(){helperJS.setCookie("selected_fav_tab",{type:"RENTAL"}),$("#project_shortlist_tab").removeClass("active"),$("#rental_shortlist_tab").addClass("active"),$("#resale_shortlist_tab").removeClass("active"),$('div[id^="shortlistProject"]').hide(),$('div[id^="shortlistRental"]').show(),$('div[id^="shortlistResale"]').hide(),helperJS.initializeShortlisting()}),$("#project_shortlist_tab").off("click"),$("#project_shortlist_tab").on("click",function(){helperJS.setCookie("selected_fav_tab",{type:"PROJECT"}),$("#project_shortlist_tab").addClass("active"),$("#rental_shortlist_tab").removeClass("active"),$("#resale_shortlist_tab").removeClass("active"),$('div[id^="shortlistProject"').show(),$('div[id^="shortlistRental"').hide(),$('div[id^="shortlistResale"').hide(),helperJS.initializeShortlisting()}),$("#shortlist-compare").click(function(){let t=helperJS.getCookie("selected_fav_tab").type||"PROJECT";if("RESALE"==t){let t=helperJS.getCookie("resale_checkedFavs")||[];if(t.length>4)$("#shortlist-error").show().html("Maximum 4 properties can be compared at one go."),$("#shortlist-compare").removeAttr("disabled");else{let e=baseUrl+`resale/compare/${t[0]}/`;t.length>1&&(e=e+t[1]+"/"),t.length>2&&(e=e+t[2]+"/"),t.length>3&&(e+=t[3]),$("#shortlist-compare").attr("disabled","disabled").data("href",e),$("#shortlist-error").hide(),window.location=e}}else if("RENTAL"==t){let t=helperJS.getCookie("rental_checkedFavs")||[];if(t.length>4)$("#shortlist-error").show().html("Maximum 4 properties can be compared at one go."),$("#shortlist-compare").removeAttr("disabled");else{let e=baseUrl+`rental/compare/${t[0]}/`;t.length>1&&(e=e+t[1]+"/"),t.length>2&&(e=e+t[2]+"/"),t.length>3&&(e+=t[3]),$("#shortlist-compare").attr("disabled","disabled").data("href",e),$("#shortlist-error").hide(),window.location=e}}else{let t=helperJS.getCookie("checkedFavs")||[];if(t.length>4)$("#shortlist-error").show().html("Maximum 4 projects can be compared at one go."),$("#shortlist-compare").removeAttr("disabled");else{let e=baseUrl+`compare/${t[0]}/`;t.length>1&&(e=e+t[1]+"/"),t.length>2&&(e=e+t[2]+"/"),t.length>3&&(e+=t[3]),$("#shortlist-compare").attr("disabled","disabled").data("href",e),$("#shortlist-error").hide(),window.location=e}}})},hideOrShowTabs:()=>{let t="PROJECT";null==helperJS.getCookie("selected_fav_tab")?(helperJS.setCookie("selected_fav_tab",{type:"PROJECT"}),$('div[id^="shortlistProject"]').show(),$('div[id^="shortlistResale"]').hide(),$('div[id^="shortlistRental"]').hide(),$("#project_shortlist_tab").addClass("active"),$("#rental_shortlist_tab").removeClass("active"),$("#resale_shortlist_tab").removeClass("active")):"RESALE"==(t=helperJS.getCookie("selected_fav_tab").type)?($('div[id^="shortlistProject"]').hide(),$('div[id^="shortlistResale"]').show(),$('div[id^="shortlistRental"]').hide(),$("#project_shortlist_tab").removeClass("active"),$("#rental_shortlist_tab").removeClass("active"),$("#resale_shortlist_tab").addClass("active")):"RENTAL"==t?($('div[id^="shortlistProject"]').hide(),$('div[id^="shortlistResale"]').hide(),$('div[id^="shortlistRental"]').show(),$("#project_shortlist_tab").removeClass("active"),$("#rental_shortlist_tab").addClass("active"),$("#resale_shortlist_tab").removeClass("active")):($('div[id^="shortlistProject"]').show(),$('div[id^="shortlistResale"]').hide(),$('div[id^="shortlistRental"]').hide(),$("#project_shortlist_tab").addClass("active"),$("#rental_shortlist_tab").removeClass("active"),$("#resale_shortlist_tab").removeClass("active"))},getNotified:()=>{1==helperJS.getCookie("notification")?screen.width<800&&$(".notification").show():screen.width<800&&$(".notification").hide()},initializeShortlist:()=>{helperJS.getNotified(),helperJS.hideOrShowTabs(),helperJS.initializeInputs(),$(".shortlistDiv").off("click"),$(document).on("click",".shortlistDiv",function(){$(".shotlistPopup").hasClass("active")?$(".shotlistPopup").removeClass("active"):$(".shotlistPopup").addClass("active"),helperJS.bindShortlistWindow()}),$(".shotlistPopup .projectTiles .shortlistheader em,.bannerBox,.cityContainer,.ourToolsBox").on("click",function(){$(".shotlistPopup,body,header .navToggle #nav-toggle, header nav, .navOverlay").removeClass("active")})},initializeShortlisting:()=>{helperJS.getNotified(),helperJS.hideOrShowTabs(),helperJS.initializeInputs()},isMobileBrowser:()=>{var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},goToURL:(t,e)=>(e?1==(e=e.split("/")).length&&"_blank"==e[0]?window.open(t,e):$(document).width()<=800&&"_self"==e[1]?window.location.href=t:window.open(t,e):window.location.href=t,!1),initializeLazyLoad:()=>{const t=new IntersectionObserver((t,e)=>{t.forEach(t=>{if(t.isIntersecting){const e=t.target;e.src.replace(baseUrl,"")!=encodeURI(e.dataset.src?e.dataset.src.replace(baseUrl,""):"")&&(e.src=e.dataset.src)}})});document.querySelectorAll("img.lazy").forEach(e=>{t.observe(e)})},ucfirst:t=>0==t?"":t.charAt(0).toUpperCase()+t.slice(1),reportListing:function(t,e){let i=t.serializeArray(),o=t.children("input#propertyId").attr("data-propertyid"),n=(i=i.map(t=>t.value))[2]+"-"+i[3],s=i[4];if(""==i[0])return t.children("span#error").show(),t.children("span#error").html("Please select a reason"),!1;if("others"==i[0]&&""==i[1])return t.children("span#error").show(),t.children("span#error").html("Please provide a reason."),!1;{t.children("span#error").hide();let a=i[0];"others"==a&&(a=i[1]),$.ajax({type:"POST",url:"/"+e+"/reportListing",dataType:"json",data:{remarks:a,propertyId:o,customerPhoneNumber:n,customerEmail:s,source:"DOTCOM"},success:function(e){if(!e.status)return console.log("error from api..."),!1;t.removeClass("active"),$(".thankYouReport").addClass("active"),$("form#reportListingForm .input-group-mobile").hide(),$("form#reportListingForm .input-group-email").hide()},failure:function(t){console.log(`error: ${t}`)}})}},restrictAlphabets:t=>{var e=t.which||t.keycode;return e>=48&&e<=57||8==e||e>=35&&e<=40||46==e},convertAmountToWord:(t,e)=>{e=e||!1;var i=t;isNaN(t)&&(i=t.replace(/\s/g,""));var o=Math.round(i).toString().length;return o<6?i.toString().replace(/(\d)(?=(\d\d)+\d(?!\d))/g,"$1,"):(o<=7?(i/=Math.pow(10,5),i=e?Math.round(i):Math.floor(100*i)/100,i+=" Lac"):(i/=Math.pow(10,7),i=e?Math.round(i):Math.floor(100*i)/100,i+=" Cr."),i.toString())},convertWordToAmount:t=>((t=t.replace("","")).indexOf(",")>=0?t=t.replace(/\,/g,""):t.indexOf(" Lac")>=0?t=1e5*t.replace(" Lac",""):t.indexOf(" Cr.")>=0&&(t=1e7*t.replace(" Cr.","")),t),indiaNumberWordFormat:t=>{if((t=t.toString()).length>9)return"max limit reached";if(n=("000000000"+t).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/),n){var e="";return e+=0!=n[1]?(onesAndTeens[Number(n[1])]||tens[n[1][0]]+" "+onesAndTeens[n[1][1]])+"crore ":"",e+=0!=n[2]?(onesAndTeens[Number(n[2])]||tens[n[2][0]]+" "+onesAndTeens[n[2][1]])+"lakh ":"",e+=0!=n[3]?(onesAndTeens[Number(n[3])]||tens[n[3][0]]+" "+onesAndTeens[n[3][1]])+"thousand ":"",e+=0!=n[4]?(onesAndTeens[Number(n[4])]||tens[n[4][0]]+" "+onesAndTeens[n[4][1]])+"hundred ":"",e+=0!=n[5]?(""!=e?"and ":"")+(onesAndTeens[Number(n[5])]||tens[n[5][0]]+" "+onesAndTeens[n[5][1]]):""}},changeNumberFormat(t,e,i){const o=e||2,n=t/1e5;let s;function a(t){return+t.toLocaleString(void 0,{minimumFractionDigits:o,maximumFractionDigits:o})}if(n>=1&&n<=99){s=`${a(n)} L`}else if(n>=100){const t=a(n/100);s=`${t>=1e5?changeNumberFormat(t,e,!0):t} Cr`}else s=a(+t);return s},internationalNumberWordFormat:t=>{let e=["thousand","million",""],i="";t=("000000000"+t.toString()).substr(-9).match(/.{3}/g);for(var o=0;o<e.length;o++){var n=t[o],s="";s+=""!=i?" "+e[e.length-1-o]+" ":"",s+=0!=n[0]?onesAndTeens[Number(n[0])]+"hundred ":"",i+=s+=0!=(n=n.substr(1))?(""!=s?"and ":"")+(onesAndTeens[Number(n)]||tens[n[0]]+" "+onesAndTeens[n[1]]):""}return i.replace(/ +/g," ").replace(/ $/,"")},indiaNumberFormat:t=>t.toString().replace(/(\d)(?=(\d\d)+\d(?!\d))/g,"$1,"),internationalNumberFormat:t=>t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),alertBox(t,e){$(".alertMsg.active").remove(),$("body").append($("<div/>",{class:"alertMsg "+t+" active"}).append($("<div/>",{class:"iconBox"}).append($("<span/>").append($("<img/>",{class:"img-responsive",src:"/assets/images/alert/"+t+".svg"}))),$("<div/>",{class:"msgBody"}).append($("<em/>",{class:"icon-close"}).on("click",function(){$(this).closest(".alertMsg").remove()}),$("<strong/>",{text:t}),$("<p/>",{text:e}))).delay(1e4).queue(function(){$(this).remove()}))},generateRandomString:t=>{t=t||5;let e="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=i.length;for(var n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*o));return e},convertWordToFullText:(t,e="in")=>{switch(t=t.toString().replace(/,/g,""),e.toLowerCase()){case"in":return helperJS.indiaNumberWordFormat(t);case"uae":default:return helperJS.internationalNumberWordFormat(t)}},numberFormat:(t,e="in")=>{switch(t=t.toString().replace(/,/g,""),e.toLowerCase()){case"in":return helperJS.indiaNumberFormat(t);case"uae":default:return helperJS.internationalNumberFormat(t)}},pushUserHistory:()=>{$(".UMHeader .col.col1 span").text(document.title);let t=helperJS.getCookie("userHistory");if(t||(t=[]),t.length>=1&&t[t.length-1].url==location.href)return!1;t.length>=20&&(t=t.splice(t.length-19)),t.push({title:document.title,url:location.href}),helperJS.setCookie("userHistory",t)},initUserHistoryBack:()=>{let t=helperJS.getCookie("userHistory");$(".UMHeader .col.col1 .back-btn").on("click",function(){if($("#loaderBox").show(),!t||1===t.length)return void(window.location.href=_BASE_URL);t.pop();let e=t.pop();helperJS.setCookie("userHistory",t),window.location.href=e.url})},firepixel_detail:(t,e)=>{if(1==isfirepixel){ta("send","lead"),gtag_report_conversion(window.location.href);var i=0;t.apiResp&&t.apiResp[0]&&parseInt(t.apiResp[0].leadId)&&(i=parseInt(t.apiResp[0].leadId)),i>0&&fbq("track","Lead"),_tfa.push({notify:"event",name:"lead",id:1125593}),$("#dev_taboola_lead_noscript").html(taboolanoscript),$.getScript("/assets/lib/js/colombiapixel.js",function(){$("#dev_colombia_lead_noscript").html(colombianoscript)}),window.dotq=window.dotq||[],window.dotq.push({projectId:"10000",properties:{pixelId:"10066198",qstrings:{et:"custom",ec:"SQY_YahooG_Sec_Leads",ea:"Yahoo_Lead"}}})}}};var countryLocationData,dev_usercurrentloc="";async function getAPIData(t){let e={};return await fetch(t).then(function(t){if(t.ok)return t.json();throw new Error("Request failed.")}).then(function(t){e=t}).catch(function(e){console.log(t),console.log(e)}),e}async function getLmsCountryLocation(){let t=helperJS.getSessionItem("countrylocation");t||(t=await getAPIData("/getcountrylocation"),helperJS.setSessionItem("countrylocation",t));let e=helperJS.getCookie("_selcity");countryLocationData=t;var i=[];$.each(t,function(t,e){-1==i.indexOf(e.code)&&($(".ddlCountryCode").append('<option value="'+e.code+'">+'+e.code+"</option>"),i.push(e.code))}),$(".ddlLocation").not(".property-m").append('<option value="" readonly>Select City</option>'),countryLocationData[0].locations.length>0&&(countryLocationData[0].locations.forEach(function(t){$(".ddlLocation").append('<option value="'+t.name+'">'+t.name+"</option>")}),e&&parseInt(e.id)>0&&(e.name=e.name.charAt(0).toUpperCase()+e.name.slice(1),$(".ddlLocation,.dev_inputelement").val(e.name),$("#ClientCallForm_location").val(e.name),$("#ClientCallForm_location_city").val(e.name))),e&&36==parseInt(e.id)&&$(".ddlCountryCode").val("971").change()}async function populateMobileCodesField(){let t=await getAPIData("/getcountrylocation");helperJS.getCookie("_selcity");countryLocationData=t;var e=[];$.each(t,function(t,i){-1==e.indexOf(i.code)&&($(".ddlCountryCode").append('<option value="'+i.code+'">+'+i.code+"</option>"),e.push(i.code))})}function onChangeLmsCountryCode(t,e,i){let o=$(t).find("option:selected").val();if(void 0!==countryLocationData&&countryLocationData){$("#"+i+" #"+e).empty();let t=countryLocationData.filter(t=>t.code==o)[0];if(t.locations.length>0){t.locations.forEach(function(t){$("#"+i+" #"+e).append('<option value="'+t.name+'">'+t.name+"</option>")});let o=helperJS.getCookie("_selcity");o&&parseInt(o.id)>0&&(o.name=o.name.charAt(0).toUpperCase()+o.name.slice(1)),$("#"+i+" #"+e).val(o.name)}else $("#"+i+" #"+e).append('<option value="'+t.name.split("(",1)[0]+'">'+t.name.split("(",1)[0]+"</option>")}}var imageUnitGalleryUI={init:function(){$("#jsGallery").jsGallery({showAlbums:!0,connectAlbums:!0}).jsGallery("show","Unit Image",0),$(".jsg-name").text("Unit Image"),$(".jsg-nav > .jsg-prev,.jsg-nav > .jsg-next,.jsg-albums > span.jsg-album").off("click"),$(".jsg-nav > .jsg-prev,.jsg-nav > .jsg-next,.jsg-albums > span.jsg-album").on("click",function(){var t=$(".jsg-albums > span.jsg-album.active").attr("data-title"),e=parseInt($(".jsg-images > img").attr("data-image-index")),i=$("#jsGallery span[data-album-name = '"+t+"']").eq(e).attr("data-alt");$(".jsg-name").text(i)}),$(".jsg-thumbnails").off("click"),$(".jsg-thumbnails").on("click",function(){var t=$(".jsg-albums > span.jsg-album.active").attr("data-title"),e=parseInt($(".jsg-images > img").attr("data-image-index")),i=$("#jsGallery span[data-album-name = '"+t+"']").eq(e).attr("data-alt");$(".jsg-name").text(i)}),$(".jsg-thumbnails").length>0&&$(".jsg-thumbnails")[0].click()}};const copyToClipboard=t=>{var e=document.getElementById(t);e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")};var googlePlacesAutocomplete={init:function(t){if("undefined"==typeof google&&"undefined"!=typeof googleMapKey)return $.getScript("https://maps.googleapis.com/maps/api/js?key="+googleMapKey+"&libraries=drawing,places,geometry",function(){googlePlacesAutocomplete.init(t)}),!1;var e,i={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",country:"long_name",postal_code:"short_name"};function o(){for(var o=e.getPlace(),n=0;n<o.address_components.length;n++){var s=o.address_components[n].types[0];if(i[s]&&"locality"==s){var a=o.address_components[n][i[s]];"Gurugram"==a&&(a="Gurgaon"),"Bengaluru"==a&&(a="Bangalore"),document.getElementById(t+"_city").value=a}}}(e=new google.maps.places.Autocomplete(document.getElementById(t),{})).setFields(["address_component"]),e.addListener("place_changed",o)}};function getQueryStringValue(t){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function setDataFromSharerCode(t){if(""!=getQueryStringValue("share")){var e="https://www.squareyards.com/micro/assets/SharerApi.php?share="+getQueryStringValue("share");$.ajax({headers:{Accept:"application/json; charset=utf-8"},async:!1,url:e,type:"GET",dataType:"json",success:function(e){if("200"==e.code){var i=e.data.SharerCode,o=e.data.SharerName,n=e.data.SharerEmail,s=e.data.SharerContactNo,a=e.data.SharerId,r=e.data.SharerType;$("#"+t).find("#SharerCode").val(i),$("#"+t).find("#SharerName").val(o),$("#"+t).find("#SharerEmail").val(n),$("#"+t).find("#SharerContactNo").val(s),$("#"+t).find("#SharerId").val(a),$("#"+t).find("#SharerType").val(r)}},error:function(t){}})}}$(document).ready(function(){$(document).on("input","input[type='tel']",function(t){-1==$(this).attr("name").indexOf("otp")&&(this.value=this.value.replace(/([^0-9])|(^[0]+)/g,""))}),$(document).on("keypress","input[type='tel']",function(t){let e=t.keyCode?t.keyCode:t.which?t.which:t.charCode;return!(48==e&&!$(this).val()&&-1==$(this).attr("name").indexOf("otp"))&&(e>=48&&e<=57||8==e||9==e||37==e||38==e||39==e||40==e||46==e)}),$(document).on("keyup","input[data-type='name']",function(t){let e=$(this).val().replace(/[^a-zA-Z ]/g,"").replace(/\s+/g," ");$(this).val(e)}),$("input[type='email']").each(function(){$(this)[0].oninvalid=function(){this.setCustomValidity("Please enter valid email address")},$(this)[0].oninput=function(){this.setCustomValidity("")}}),$(document).on("paste","input[type='tel']",function(t){t.preventDefault()})});var pluginfn={init:function(t,e){$.getScript("/assets/lib/js/moment.min.js",function(){$.getScript("/assets/lib/js/moment-range.js",function(){$.getScript("/assets/lib/js/lodash.min.js",function(){var i=pluginfn.getDates(1,10),o=pluginfn.getTimeSlots("10:00","19:00",30),n="",s="";$.each(i,function(t,e){var i="";0==t&&(i="active"),n=n+'<div class="item"><div class="list '+i+'" value="'+e.sd+'" shortDate="'+e.shortDate+'">'+e.dayDisplay+"<span>"+e.dateDisplay+"</span></div></div>"}),$.each(o,function(t,e){var i="";0==t&&(i="active"),s=s+'<div class="item"><div class="list '+i+'" value="'+e.sd+'">'+e.timeSlot+"<span>"+e.timePeriod+"</span></div></div>"}),$("#"+t+" #dateSlider").html(n),$("#"+t+" #timeSlider").html(s),$("#"+t+" #scheduleMeeting").click(function(){$(this).is(":checked")?($("#"+t+" .formSlider").show(),"function"==typeof owlCarousel?$("#"+t+" #dateSlider,#"+t+" #timeSlider").owlCarousel({loop:!1,margin:0,nav:!0,dots:!1,responsive:{0:{items:5},600:{items:5},1025:{items:6}}}):(pluginfn.loadcssfile("/assets/lib/css/owl.carousel.min.css"),pluginfn.loadcssfile("/assets/lib/css/owl.theme.default.min.css"),$.getScript("/assets/lib/js/owl.carousel.min.js",function(){$("#"+t+" #dateSlider,#"+t+" #timeSlider").owlCarousel({loop:!1,margin:0,nav:!0,dots:!1,responsive:{0:{items:5},600:{items:5},1025:{items:6}}})}))):$("#"+t+" .formSlider").hide()}),1==e&&($("#"+t+" .formSlider").show(),"function"==typeof owlCarousel?$("#"+t+" #dateSlider,#"+t+" #timeSlider").owlCarousel({loop:!1,margin:0,nav:!0,dots:!1,responsive:{0:{items:5},600:{items:5},1025:{items:6}}}):(pluginfn.loadcssfile("/assets/lib/css/owl.carousel.min.css"),pluginfn.loadcssfile("/assets/lib/css/owl.theme.default.min.css"),$.getScript("/assets/lib/js/owl.carousel.min.js",function(){$("#"+t+" #dateSlider,#"+t+" #timeSlider").owlCarousel({loop:!1,margin:0,nav:!0,dots:!1,responsive:{0:{items:5},600:{items:5},1025:{items:6}}})}))),$("#"+t+" #dateSlider").find("div.list").off("click"),$("#"+t+" #dateSlider").find("div.list").on("click",function(){$("#"+t+" #dateSlider").find("div.list").removeClass("active"),$(this).addClass("active"),pluginfn.setActivityTime(t)}),$("#"+t+" #timeSlider").find("div.list").off("click"),$("#"+t+" #timeSlider").find("div.list").on("click",function(){$("#"+t+" #timeSlider").find("div.list").removeClass("active"),$(this).addClass("active"),pluginfn.setActivityTime(t)}),pluginfn.setActivityTime(t)})})})},loadcssfile:function(t){var e=document.getElementsByTagName("HEAD")[0],i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=t,e.appendChild(i)},setActivityTime:function(t){if($("#"+t+" #dateSlider").find("div.list.active").length>0&&$("#"+t+" #timeSlider").find("div.list.active").length>0){var e=$("#"+t+" #dateSlider").find("div.list.active").attr("value"),i=$("#"+t+" #timeSlider").find("div.list.active").attr("value"),o=moment(e+" "+i,"YYYY-MM-DD HH:mm").utc().format("YYYY-MM-DD HH:mm:ss");$("#"+t+" #ActivityTime").val(o)}else $("#"+t+" #ActivityTime").val("")},getTimeSlots:function(t,e,i){var o=moment(t,"HH:mm"),n=moment(e,"HH:mm");n.isBefore(o)&&n.add(1,"day");for(var s=[];o<=n;){var a=moment(o);s.push({sd:a.format("HH:mm"),timeSlot:a.format("hh:mm"),timePeriod:a.format("A")}),o.add(i,"minutes")}s[0].sd;return s},getDates:function(t,e){var i=moment(),o=moment(i).add(1,"days"),n=_.range(t,t+e),s=[];_.map(n,function(t,e){var n=moment(i).add(t,"days"),a="";a=n.format("DD MMM YYYY")===i.format("DD MMM YYYY")?"Today, ":n.format("DD MMM YYYY")===o.format("DD MMM YYYY")?"Tomorrow, ":"",s.push({sd:n.format("YYYY-MM-DD"),dateDisplay:n.format("DD"),dayDisplay:n.format("ddd").toUpperCase(),shortDate:a+n.format("DD MMM")}),0===e&&$("#dev_today").text(s[0].shortDate)});return s}};const initializeChatForm=function(t,e){initializeCityAutocompleteComboBox("ClientChatForm","ddlLocation","ddlLocation_div"),""==$("#ClientChatForm #ddlLocation").html()&&"function"==typeof getLmsCountryLocation&&getLmsCountryLocation(),$("#ClientChatForm #ddlCountryCode").change(function(){onChangeLmsCountryCode(this,"ddlLocation","ClientChatForm")}),$("#ClientChatForm #mobile,#ClientCallForm #mobile").on("input",function(t){this.value=this.value.replace(/[^0-9]/g,"")}),$("form#ClientChatForm,form#ClientCallForm").on("submit",function(i){var o=$(this);"ClientChatForm"==$(o).attr("id")?($(".showProfile.desktopcase").find("#saleloadertext").text("Please wait, Connecting to Sales executive"),$(".bottomCTA .showProfile").find("#saleloadertext").text("Please wait, Connecting to Sales executive")):($(".showProfile.desktopcase").find("#saleloadertext").text("Please wait, We are setting up your meeting"),$(".bottomCTA .showProfile").find("#saleloadertext").text("Please wait, We are setting up your meeting")),$(o).find("#dev_errormsg").css("display","none"),$(".bottomCTA .callFlexBox,.flexFormBox").css("display","none"),$(".bottomCTA .showProfile").addClass("profileBox"),$(".bottomCTA .showProfile").addClass("active"),$(".bottomCTA em").addClass("profileCase"),$(".bottomCTA .showProfile.profileBox .pic .lds-ring").css("display","inline-block"),$(".bottomCTA .showProfile").find("#salescontactnolink").css("display","none"),$(".bottomCTA .showProfile").find("#salescontactnoerror").css("display","none"),$(".bottomCTA .showProfile").find("#saleloadertext").css("display","block"),$(".bottomCTA .showProfile").find("#salespic").attr("src",_CDN_IMAGES_URL+"ui-assets/images/profilePic.png"),$(".bottomCTA .showProfile").find("#salepersonname").text(""),$(".bottomCTA .showProfile").find("#saleslocation").text(""),$(".bottomCTA .showProfile").find("#salescontactno").text(""),$(o).css("display","none"),$(".showProfile.desktopcase").css("display","inline"),i.preventDefault();var n={};$(this).serializeArray().map(function(t){n[t.name]=t.value});let s="";if("undefined"!=typeof dataLayer)for(let t=0;t<dataLayer.length;t++)if(dataLayer[t].PageType){s=dataLayer[t].PageType;break}let a={mobile:n.mobile,city:n.location,pageType:s};_paq.push(["trackEvent","product","enquired",JSON.stringify(a)]),$.ajax({type:"post",url:"/thank-you-chat",data:$(this).serialize(),success:function(i){var n=$(o).find("#CommunicationMode").attr("value"),s=$(o).find("#pageCategory").attr("value");if(i.beatsContactId>0){(window.dataLayer||[]).push({CPageType:s});var a={contactId:i.beatsContactId,CommunicationMode:n},r={async:!0,crossDomain:!0,url:t,method:"POST",headers:{API_KEY:e,"Content-Type":"application/json"},data:JSON.stringify(a)};$.ajax(r).done(function(t){var e;if($(".bottomCTA .showProfile.profileBox .pic .lds-ring").css("display","none"),$(".bottomCTA .showProfile").find("#saleloadertext").css("display","none"),""==t.SalesPersonContact)$(o).find("#mobile").val(""),window.location.href="https://m.squareyards.com/"+t.Identifier;else if($(o).find("#mobile").val(""),null!=t.SalesPersonName&&""!=t.SalesPersonName&&$(".bottomCTA .showProfile").find("#salepersonname").text(t.SalesPersonName),null!=t.SalesPersonProfilePic&&""!=t.SalesPersonProfilePic&&$(".bottomCTA .showProfile").find("#salespic").attr("src",t.SalesPersonProfilePic),null!=t.SalesPersonLocation&&""!=t.SalesPersonLocation&&$(".bottomCTA .showProfile").find("#saleslocation").text(t.SalesPersonLocation),null!=t.SalesPersonCountryCode&&""!=t.SalesPersonCountryCode?(e=t.SalesPersonCountryCode+t.SalesPersonContact,$(".bottomCTA .showProfile").find("#salescontactno").text("+"+t.SalesPersonCountryCode+"-"+t.SalesPersonContact)):(e=$(o).find("#ddlCountryCode").attr("value")+t.SalesPersonContact,$(".bottomCTA .showProfile").find("#salescontactno").text(t.SalesPersonContact)),"Whatsapp"==n)if(null!=t.SalesPersonName&&""!=t.SalesPersonName){var i="Hi "+t.SalesPersonName+",%0A%0AI got connected to you on Squareyards.com.%0A%0ALook forward to your assistance in my home search and ownership journey. Please get back to me so we can take this ahead. Thanks.";window.location.href="https://api.whatsapp.com/send?phone="+e+"&text="+i+"&source=&data="}else window.location.href="https://m.squareyards.com/"+t.Identifier;else window.location.href="https://m.squareyards.com/"+t.Identifier}).fail(function(t,e){})}else $(o).removeAttr("style"),$(".showProfile.desktopcase").css("display","none"),$(".bottomCTA .callFlexBox,.flexFormBox").css("display","inherit"),$(".bottomCTA .showProfile").removeClass("profileBox"),$(".bottomCTA .showProfile").removeClass("active"),$(".bottomCTA em").removeClass("profileCase"),$(o).find("#dev_errormsg").text("Error! Invalid Number"),$(o).find("#dev_errormsg").css("display","inline"),setTimeout(function(){$(o).find("#dev_errormsg").css("display","none"),$(o).find("#mobile").val("")},3e3)}})})},BindProfileMenuData=function(t,e){if(1==t.status&&null!=t.data&&null!=t.data.menuItems){var i="",o=!1;if($.each(t.data.menuItems,function(t,e){"Logout"==e.name?o=e:i=i+"<li><a href='"+e.url+"'>"+e.name+"</a></li>"}),$("#dev_pwa_menuitems").html(i),1==t.data.authenticate){if($("#dev_pwa_signup").html("<strong>Hi, "+t.data.name+"</strong> <span>"+t.data.email+"</span> <span>"+t.data.mobile+"</span>"),0!=o){var n="<a href='"+o.url+"'>Logout</a>";$("#dev_pwa_logout").html(n),$("#dev_pwa_logout").css("display","block")}$("#dev_pwa_signup").css("display","block")}else{var s="<strong>Welcome</strong> <span>You can access your personal portal here</span><div class='btnBox'><a class='btn btn-signup' href='"+e+"user/login'>Signup</a><a class='btn btn-login'  href='"+e+"user/login'>Login</a></div>";$("#dev_pwa_signin").html(s),$("#dev_pwa_signin").css("display","block")}}},initializeCityAutocompleteComboBox=function(t,e,i){$.getScript("/assets/lib/js/jquery-ui.js",function(){$.widget("custom.combobox",{_create:function(){this.wrapper=$("<span>").addClass("custom-combobox").insertAfter(this.element),this.element.hide(),this._createAutocomplete(),this._createShowAllButton();var i=!1;$("#"+t+" #dev_drodownarrow").hover(function(){0==i&&null!=$("#"+t+" #"+e).val()&&""!=$("#"+t+" #"+e).val()&&($("#"+t+" #dev_inputelement").attr("placeholder",$("#"+t+" #"+e).val()),i=!0),1==i&&(null==$("#"+t+" #dev_inputelement").val()||""==$("#"+t+" #dev_inputelement").val()?$("#"+t+" #dev_inputelement").val($("#"+t+" #dev_inputelement").attr("placeholder")):($("#"+t+" #dev_inputelement").val(""),i=!1))})},_createAutocomplete:function(){var o=this.element.children(":selected"),n=o.val()?o.text():"";this.input=$("<input id='dev_inputelement' required>").appendTo(this.wrapper).val(n).attr("title","").addClass("custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left dev_inputelement").autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source"),appendTo:$("#"+t+" #"+i)}).tooltip({classes:{"ui-tooltip":"ui-state-highlight"}}),this._on(this.input,{autocompleteselect:function(i,o){o.item.option.selected=!0,this._trigger("select",i,{item:o.item.option}),$("#"+t+" #dev_inputelement").attr("placeholder",$("#"+t+" #"+e).val())},autocompletechange:"_removeIfInvalid"}),$("#"+t+" #"+i).find("ul").addClass("drop-downcity")},_createShowAllButton:function(){var t=this.input,e=!1;$("<a id='dev_drodownarrow'>").attr("tabIndex",-1).appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").on("mousedown",function(){e=t.autocomplete("widget").is(":visible")}).on("click",function(){t.trigger("focus"),e||t.autocomplete("search","")})},_source:function(t,e){var i=new RegExp($.ui.autocomplete.escapeRegex(t.term),"i"),o=[];e(this.element.children("option").map(function(){var e=$(this).text();if(-1==o.indexOf(e)&&(o.push(e),this.value&&(!t.term||i.test(e))))return{label:e,value:e,option:this}}))},_removeIfInvalid:function(t,e){if(!e.item){var i=this.input.val().toLowerCase(),o=!1;this.element.children("option").each(function(){if($(this).text().toLowerCase()===i)return this.selected=o=!0,!1}),o||(this.input.val(""),this.element.val(""),this.input.autocomplete("instance").term="")}},_destroy:function(){this.wrapper.remove(),this.element.show()}}),$("#"+t+" #"+e).combobox()})},global_time_remaining=t=>{let e=Date.parse(t)-Date.now(),i=Math.floor(e/1e3%60),o=Math.floor(e/1e3/60%60),n=Math.floor(e/36e5%24);return{total:e,days:Math.floor(e/864e5),hours:n,minutes:o,seconds:i}},numberWithCommas=t=>t.toString().split(".")[0].length>3?t.toString().substring(0,t.toString().split(".")[0].length-3).replace(/\B(?=(\d{2})+(?!\d))/g,",")+","+t.toString().substring(t.toString().split(".")[0].length-3):t.toString();var globaltimeinterval;const global_run_clock=(t,e)=>{console.log(globaltimeinterval),globaltimeinterval&&(console.log("clearing interval"),clearInterval(globaltimeinterval)),e=new Date(Date.now()+60*e*1e3);let i=$("#"+t+" #countDownTimer_contactform");const o=()=>{let t=global_time_remaining(e);i.html(t.minutes.toString().padStart(2,0)+":"+t.seconds.toString().padStart(2,0)),t.total<=0&&(i.html("Expired"),clearInterval(globaltimeinterval))};o(),globaltimeinterval=setInterval(o,1e3)};let building_id;const global_submitContactForm=function(t,e,i,o,n,s,a,r){$("#"+e).off("submit"),$("#"+e).on("submit",function(s){s.preventDefault(),globalsendOtp(t,e,i,o,r,n)}),$("#"+o+" ul.fillOtp input").on("input",function(t){if(this.value=this.value.replace(/[^0-9]/g,""),""!=this.value){var e=$(this).attr("next");$("#"+o+" input[devid="+e+"]").focus()}}),$("#"+o+" ul.fillOtp input").keydown(function(){var t=event.keyCode||event.charCode;if(8==t||46==t){var e=$(this).attr("prev");setTimeout(function(){$("#"+o+" input[devid="+e+"]").focus()})}}),$("#"+i).on("submit",function(s){s.preventDefault();var a=$("#"+i).find("input[name='countryCode']").val(),l=$("#"+i).find("input[name='mobile']").val();$("#"+e).find("input[name='countryCode']").val(a),$("#"+e).find("input[name='mobile']").val(l),globalsendOtp(t,e,i,o),1==r&&($("#"+e).addClass("active"),$("#"+o).addClass("active"),$("#"+i).removeClass("active"),$("#"+n).removeClass("active"))}),$("#"+o+" span.resend").off("click"),$("#"+o+" span.resend").on("click",function(){globalsendOtp(t,e,i,o)}),$("#"+o+" #confirmOtp_contactform").off("click"),$("#"+o+" #confirmOtp_contactform").on("click",function(){let l=$("#"+o).serializeArray(),c="";l.filter(t=>{c+=t.value}),(c.length=4)&&globalconfirmOtp(c,t,e,i,o,n,s,a,r,building_id)}),$("#"+o+" #changeNumber_contactform").off("click"),$("#"+o+" #changeNumber_contactform").on("click",function(){$("#"+t).addClass("active"),$("#"+t).addClass("changenumber"),1==r&&($("#"+e).addClass("active"),$("#"+o).removeClass("active"),$("#"+i).addClass("active"),$("#"+n).removeClass("active"))})},globalconfirmOtp=(t,e,i,o,n,s,a,r,l,c)=>{$("#loaderBox").show(),$("#"+n+" .otpError").html("");var h=$("#"+i+" input[name='mobile']").val(),d=$("#"+i+" select[name='countryCode']").val(),u=$("#"+i+" input[name='name']").val(),p=$("#"+i+" input[name='email']").val(),m=$("#"+i+" select[name='location']").val(),f=$("#"+i).find('input[name="DotcomProjectId"]').val(),g=$('input[name="type"]').val();var _=JSON.stringify(function(t){var e="{";for(var i in t){var o=t[i];e+='"'+o.name+'":"'+o.value+'",'}var n=e.length-1;return e=e.substr(0,n),e+="}",console.log("_string: ",e),JSON.parse(e)}($("#"+i).serializeArray()));console.log(_),$.ajax({type:"POST",url:"/lead/globalverifyotp",data:{mobile:h,countryCode:d,otp:t,formdata:_,buildingId:c,type:g},success:function(t){if(t.redirectUrl){let a="";if("undefined"!=typeof dataLayer)for(let t=0;t<dataLayer.length;t++)if(dataLayer[t].PageType){a=dataLayer[t].PageType;break}let c={name:u,emailId:p,mobile:t.encr,city:m,type:"",projectId:f,pageType:a};void 0!==r&&""!=r&&(c.type="AGENT_DSE"==r?"Agents":"SALE_DSE"==r?"Resale":"RENT_DSE"==r?"Rental":"New Projects"),propAmcData=t.propamcdata,beatsresponse=t.beatsapires,null!=beatsresponse.length&&0==beatsresponse.length?($("#"+n+" .otpError").html("something went wrong"),$("#loaderBox").hide()):void 0!==beatsresponse.Status&&1==beatsresponse.Status?(afterglobalVerification(d,h,beatsresponse,r,e,i,o,n,s,t.redirectUrl,l,propAmcData,g),c.name&&c.emailId&&c.mobile&&_paq.push(["trackEvent","product","enquired",JSON.stringify(c)])):(void 0!==beatsresponse.ErrorMessage&&null!=beatsresponse.ErrorMessage&&null!=beatsresponse.ErrorMessage&&""!=beatsresponse.ErrorMessage?$("#"+n+" .otpError").html(beatsresponse.ErrorMessage):$("#"+n+" .otpError").html("something went wrong"),$("#loaderBox").hide())}else $("#"+n+" .otpError").html("something went wrong"),$("#loaderBox").hide()},error:function(t,e){$("#"+n+" .otpError").html("something went wrong"),$("#loaderBox").hide()}})},getglobalAgentPopupHtml=(t,e,i,o)=>{if(null!=t.SalesPersonName&&null!=t.SalesPersonContact&&""!=t.SalesPersonName&&""!=t.SalesPersonContact){var n='<div class="agentModalBox active"><div class="agentModalBody"><div class="closeAgentModalPopup"><em class="icon-close"></em></div><div class="figureBox"><picture>';return n=null!=t.SalesPersonProfilePic&&""!=t.SalesPersonProfilePic?n+'<img itemprop="image" class="img-responsive" src="'+t.SalesPersonProfilePic+'" alt="'+(void 0!==t.SalesPersonName?t.SalesPersonName:"N/A")+'">':n+'<span class="clr clr31">'+(void 0!==t.SalesPersonName?t.SalesPersonName.charAt(0).toUpperCase():"N/A")+"</span>",n=(n+="</picture></div>")+'<strong class="name">'+(void 0!==t.SalesPersonName?t.SalesPersonName:"N/A")+'</strong><span class="phone">'+t.SalesPersonCountryCode+"-"+t.SalesPersonContact+'</span><ul class="leadBtnBox"><li><a class="in-call" href="tel:'+t.SalesPersonCountryCode+t.SalesPersonContact+'"><em class="icon-phone-o"></em>Call Now</a></li><li><a class="in-whatsapp" href="'+i+'"><em class="icon-whatsapp"></em>WhatsApp</a></li></ul>',e&&(n=n+'<div class="btnBox"><a href="'+e+'" class="btn btn-primary">Take to My Personal Profile <em class="icon-angle-right"></em></a></div>'),n+="</div></div>"}n='<div class="agentModalBox active"><div class="agentModalBody"><div class="closeAgentModalPopup"><em class="icon-close"></em></div><div class=""></div><span class="phone" style="white-space: normal !important;">'+o+"</span>";return e&&(n=n+'<div class="btnBox"><a href="'+e+'" class="btn btn-primary">Take to My Personal Profile <em class="icon-angle-right"></em></a></div>'),n+="</div></div>"},getglobalAgentPopupHtmlForDSE=(t,e,i,o)=>{if(null!=t.SalesPersonName&&null!=t.SalesPersonContact&&""!=t.SalesPersonName&&""!=t.SalesPersonContact){var n='<div class="ldBx"><div class="ldBxClsBtn"><em class="icon-close"></em></div><div class="ldBdy"><div class="ldBxfigureBox">';return n=(n=null!=t.SalesPersonProfilePic&&""!=t.SalesPersonProfilePic?n+'<img itemprop="image" class="img-responsive" src="'+t.SalesPersonProfilePic+'" alt="'+(void 0!==t.SalesPersonName?t.SalesPersonName:"N/A")+'">':n+'<span class="clr clr31">'+(void 0!==t.SalesPersonName?t.SalesPersonName.charAt(0).toUpperCase():"N/A")+"</span>")+'</div><strong class="ldBxAgntName">'+(void 0!==t.SalesPersonName?t.SalesPersonName:"N/A")+'</strong><span class="ldBxAgntPhone">'+t.SalesPersonCountryCode+"-"+t.SalesPersonContact+'</span><ul class="ldBxAgntLdBxBtnBox"><li><a class="in-call" href="tel:'+t.SalesPersonCountryCode+t.SalesPersonContact+'"><em class="icon-phone-o"></em>Call Now</a></li><li><a class="in-whatsapp" href="'+i+'"><em class="icon-whatsapp"></em>WhatsApp</a></li></ul></div>',e&&(n=n+'<a href="'+e+'" class="btn btn-primary ldBtnPrmry">Take to My Personal Profile <em class="icon-angle-right"></em></a>'),n+="</div><div class='gblOrflw'></div>"}return n=(n='<div class="ldBx"><div class="ldBxClsBtn"><em class="icon-close"></em></div><div class="ldBdy">')+"<p>"+o+"</p></div>",e&&(n=n+'<a href="'+e+'" class="btn btn-primary ldBtnPrmry">Take to My Personal Profile <em class="icon-angle-right"></em></a>'),n+="</div><div class='gblOrflw'></div>"},afterglobalVerification=(t,e,i,o,n,s,a,r,l,c,h,d,u)=>{if((window.dataLayer||[]).push({CPageType:o}),globaltimeinterval&&clearInterval(globaltimeinterval),$("#"+r).removeClass("active"),$("#"+n).removeClass("active"),$(".overLayBox,body").addClass("active"),1==h&&($("#"+s).addClass("active"),$("#"+r).removeClass("active"),$("#"+a).removeClass("active"),$("#"+l).removeClass("active")),"PROJECT-FACTSHEET"==o)$.ajax({type:"POST",url:"/client-doc-list",data:{projectId:$("#hd_pid").val()},success:function(t){if(console.log(t),1==t.status&&null!=t.data){var e=t.data.filter(function(t){return 4==t.Id});if(e.length>0&&null!=e[0].Documents&&e[0].Documents.length>0){var i=e[0].Documents[0].Url;window.open(i,"_blank")}}$("#dev_popupform_factsheet,div.overLayBox,body").removeClass("active")},error:function(t,e){$("#"+r+" .otpError").html("something went wrong"),$("#loaderBox").hide()}});else if("PROPAMC"==o||"propamcProject"==o)d.success?("propamcProject"==u&&($(".gblPpup.transactionLogin").removeClass("active"),$(".gblPpup.transactionLogin .formBox").removeClass("active"),$(".transactionLoginBox").hide(),$(".overLayBox").removeClass("active")),renderTransactionData(d.data,u)):renderTransactionData(d.data={},u),isMobileBrowser&&$(".position-sticky").removeClass("active");else if("COMPARE"==o){let t=$("#ClientInfoForm");if("disabled"==t.find("button").attr("disabled"))return $("#loaderBox").hide(),!1;if(t.find("button").attr("disabled","disabled"),"pdfSubmit"!=t.data("action"))return $("#loaderBox").hide(),!0;let e=t.closest("form").serializeArray(),i={};e.forEach(t=>{i[t.name]=t.value});i.email,i.name;let o=[];$(".grid.available").each(function(){o.push($(this).data("id"))});let n=`/compare-pdf?projectIds=${o.join(",")}`;$.ajax({url:n,dataType:"json",type:"GET",async:!1,contentType:"application/json; charset=utf-8",success:function(t){if(t.STATUS){t.DATA.url,t.DATA.data;window.open(t.DATA.url,"_blank"),$("#dev_popupform_compare,div.overLayBox,body").removeClass("active")}else helperJS.alertBox("error",t.MESSAGE)}})}else if(null!=i.SalesPersonName&&null!=i.SalesPersonContact&&""!=i.SalesPersonName&&""!=i.SalesPersonContact){var p="Hi "+i.SalesPersonName+",%0A%0AI got connected to you on Squareyards.com.%0A%0ALook forward to your assistance in my home search and ownership journey. Please get back to me so we can take this ahead. Thanks.",m="https://api.whatsapp.com/send?phone="+i.SalesPersonCountryCode+i.SalesPersonContact+"&text="+p+"&source=&data=",f="";f=1==h?getglobalAgentPopupHtmlForDSE(i,c,m):getglobalAgentPopupHtml(i,c,m),$("#"+l).html(f),$("body").on("click","div.closeAgentModalPopup",function(){$("div.agentModalBox").removeClass("active"),$("div.overLayBox,body").removeClass("active")}),1==h?($("#"+l).addClass("active"),$(".gblPpup .gblOrflw, .ldBxClsBtn").off("click"),$(".gblPpup .gblOrflw, .ldBxClsBtn").on("click",function(){$(".gblPpup, body").removeClass("active"),$("#"+s).removeClass("active")}),-1==s.indexOf("_dsepopup")&&$("#"+s).removeClass("active")):$("#"+n).parent(".popupForm.active").removeClass("active")}else{var g="Thank You For Showing Interest, We'll Assign One Of Our Property Expert and Get Back to You Shortly.";f="";f=1==h?getglobalAgentPopupHtmlForDSE(i,c,m,g):getglobalAgentPopupHtml(i,c,m,g),$("#"+l).html(f),$("body").on("click","div.closeAgentModalPopup",function(){$("div.agentModalBox").removeClass("active"),$("div.overLayBox,body").removeClass("active")}),1==h?($("#"+l).addClass("active"),-1==s.indexOf("_dsepopup")&&$("#"+s).removeClass("active"),$(".gblPpup .gblOrflw, .ldBxClsBtn").off("click"),$(".gblPpup .gblOrflw, .ldBxClsBtn").on("click",function(){$(".gblPpup, body").removeClass("active"),$("#"+s).removeClass("active")})):$("#"+n).parent(".popupForm.active").removeClass("active")}$("#"+s)[0].reset();let _=$("#"+s+" input#dev_inputelement").attr("placeholder");$("#ddlLocation").val(_),$("#"+r)[0].reset(),$("#"+a)[0].reset(),$("body").removeClass("active"),1==isfirepixel&&(ta("send","lead"),gtag_report_conversion(window.location.href),fbq("track","Lead"),_tfa.push({notify:"event",name:"lead",id:1125593}),$("#dev_taboola_lead_noscript").html(taboolanoscript),$.getScript("/assets/lib/js/colombiapixel.js",function(){$("#dev_colombia_lead_noscript").html(colombianoscript)}),window.dotq=window.dotq||[],window.dotq.push({projectId:"10000",properties:{pixelId:"10066198",qstrings:{et:"custom",ec:"SQY_YahooG_Sec_Leads",ea:"Yahoo_Lead"}}})),$("#loaderBox").hide()},renderTransactionData=(t,e)=>{if(t&&Object.keys(t).length>0){$(".priceHistory.empty").hide();let i="",o="",n="",s="",a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r="";r="lease"==e?"Transaction_3":"sale"==e?"Transaction_5":"gv"==e?"Transaction_10":"propamcProject"==e?"":"Transaction_9";let l='<div class="priceTime">';t.sale.length>0?(t.sale.forEach((t,e)=>{let o="",n="";0==e?(n=" first",o=`<div class="unlock ${r}"><img class="${r}" src="/assets/images/lock.svg"><span class="${r}">Verify to Unlock</span></div>`):9==e?(n=" last",o='<div class="unlock"><img src="/assets/images/lock.svg"></div>'):(n="",o='<div class="unlock"><img src="/assets/images/lock.svg"></div>');let s=helperJS.changeNumberFormat(t.value),l=numberWithCommas(t.rate_per_sft);0==s&&0==l||(o=""),i=i+'<div id="sale" style="display: none;" class="priceDetails'+n+'"><div class="datelisting"><p class="price">'+a[t.month-1]+" , "+t.year+'</p>\n<p class="priceId">Floor '+t.floor+" , Unit "+t.unit_no+'</p></div><div class="priceListing"><p class="priceList">Registered '+t.transaction_type+'</p><p class="priceValue"><span class="valueIn">Area(Sqft)</span>\n<span class="option ">'+t.area+'</span></p><p class="priceValue"><span class="valueIn">Value</span>\n<span class="option '+(0==s?"blur":"")+'"><span>&#8377;</span>'+s+'</span></p><p class="priceValue"><span class="valueIn">Rate/Sqft</span>\n<span class="option '+(0==l?"blur":"")+'">'+l+"</span></p>"+o+"</div></div>"}),l+=i):l+=i='<div id="saleEmpty" style="display: none;" class="priceTime"><div class="priceHistory empty"><img src="/assets/images/historyEmpty.png" class="img-responsive"><h2>No Transaction History Found</h2></div></div>',t.lease.length>0?(t.lease.forEach((t,e)=>{let i="",n="";0==e?(n=" first",i=`<div class="unlock ${r}"><img class="${r}" src="/assets/images/lock.svg"><span class="${r}">Verify to Unlock</span></div>`):9==e?(n=" last",i='<div class="unlock"><img src="/assets/images/lock.svg"></div>'):(n="",i='<div class="unlock"><img src="/assets/images/lock.svg"></div>');let s=numberWithCommas(t.value),l=numberWithCommas(t.rate_per_sft);0==s&&0==l||(i=""),o=o+'<div id="lease" style="display: none;" class="priceDetails'+n+'"><div class="datelisting"><p class="price">'+a[t.month-1]+" , "+t.year+'</p>\n<p class="priceId">Floor '+t.floor+" , Unit "+t.unit_no+'</p></div><div class="priceListing"><p class="priceList">Registered '+t.transaction_type+'</p><p class="priceValue"><span class="valueIn">Area(Sqft)</span>\n<span class="option ">'+t.area+'</span></p><p class="priceValue"><span class="valueIn">Value</span>\n<span class="option '+(0==s?"blur":"")+'"><span>&#8377;</span>'+s+'</span></p><p class="priceValue"><span class="valueIn">Rate/Sqft</span>\n<span class="option '+(0==l?"blur":"")+'">'+l+"</span></p>"+i+"</div></div>"}),l+=o):l+=o='<div id="leaseEmpty" style="display: none;" class="priceTime"><div class="priceHistory empty"><img src="/assets/images/historyEmpty.png" class="img-responsive"><h2>No Transaction History Found</h2></div></div>',t.mortgage.length>0?(t.mortgage.forEach((t,e)=>{let i="",o="";0==e?(o=" first",i=`<div class="unlock ${r}"><img class="${r}" src="/assets/images/lock.svg"><span class="${r}">Verify to Unlock</span></div>`):9==e?(o=" last",i='<div class="unlock"><img src="/assets/images/lock.svg"></div>'):(o="",i='<div class="unlock"><img src="/assets/images/lock.svg"></div>');let s=helperJS.changeNumberFormat(t.value);0!=s&&(i=""),n=n+'<div id="mortgage" style="display: none;" class="priceDetails'+o+'"><div class="datelisting"><p class="price">'+a[t.month-1]+" , "+t.year+'</p>\n<p class="priceId">Floor '+t.floor+" , Unit "+t.unit_no+'</p></div><div class="priceListing bank-rgi"><p class="priceList">Registered '+t.transaction_type+'</p><p class="priceValue"><span class="valueIn">Area(Sqft)</span>\n<span class="option ">'+t.area+'</span></p><p class="priceValue"><span class="valueIn">Value</span>\n<span class="option '+(0==s?"blur":"")+'"><span>&#8377;</span>'+s+'</span></p><p class="priceValue"><span class="valueIn">Lender </span>\n<span class="option bank-name'+(0==t.first_party?"blur":"")+'">'+(""==t.first_party?"-":t.first_party)+"</span></p>"+i+"</div></div>"}),l+=n):l+=n='<div id="mortageEmpty" style="display: none;"class="priceTime"><div class="priceHistory empty"><img src="/assets/images/historyEmpty.png" class="img-responsive"><h2>No Transaction History Found</h2></div></div>',Object.keys(t.gv).length>0&&t.gv.residential.length>0?(t.gv.residential.forEach((t,e)=>{let i="",o="";0==e?(o=" first",i=`<div class="unlock ${r}"><img class="${r}" src="/assets/images/lock.svg"><span class="${r}">Verify to Unlock</span></div>`):9==e?(o=" last",i='<div class="unlock"><img src="/assets/images/lock.svg"></div>'):(o="",i='<div class="unlock"><img src="/assets/images/lock.svg"></div>');let n=numberWithCommas(t.value);0!=n&&(i=""),s=s+'<div id="gv" style="display: none;" class="priceDetails'+o+'"><div class="datelisting"><p class="price">'+t.year+'</p>\n</div><div class="priceListing govtValue"><p class="priceList">Government Value </p>\n<p class="priceValue"><span class="valueIn">Value/Sq.Ft</span>\n<span class="option '+(0==n?"blur":"")+'"><span>&#8377;</span>'+n+"</span></p>"+i+"</div></div>"}),l+=s):l+=s='<div id="gvEmpty" style="display: none;" class="priceTime"><div class="priceHistory empty"><img src="/assets/images/historyEmpty.png" class="img-responsive"><h2>No Transaction History Found</h2></div></div>',""!=l&&$(".priceHistory").html(l),"sale"==e?$("#sale,#saleEmpty").show():"lease"==e?$("#lease,#leaseEmpty").show():"gv"==e?$("#gv,#gvEmpty").show():"propamcProject"==e?($("#sale,#saleEmpty").show(),$(".priceTabfilter #sale").addClass("active"),$(".priceTabfilter #lease").removeClass("active"),$(".priceTabfilter #gv").removeClass("active"),$(".priceTabfilter #mortgage").removeClass("active")):$("#mortgage,#mortageEmpty").show()}else{let t='<div class="priceTime"><div class="priceHistory empty"><img src="/assets/images/historyEmpty.png" class="img-responsive"><h2>No Transaction History Found</h2></div></div>';$(".priceHistory").html(t)}},globalsendOtp=(t,e,i,o,n,s)=>{$("#loaderBox").show();let a=[];$("#"+o+" .otpError").html("");var r=$("input[name='buildingId']").val();$("#"+e+" .sendotpError").html(""),a=$("#"+e).serializeArray(),null!=r&&a.push({name:"builderId",value:r});let l={};a.filter(t=>{l[t.name]=t.value}),$.ajax({type:"POST",url:"/resale/send-broker-detail-otp",data:l,success:function(a){if(a.status){let c;if($("#"+t).removeClass("changenumber"),$("#"+o+" #otpMobile_contactform").html("+"+l.countryCode+"-"+l.mobile),$("#"+t).removeClass("active").addClass("active"),1==n&&($("#"+e).addClass("active"),$("#"+o).addClass("active"),$("#"+i).removeClass("active"),$("#"+s).removeClass("active")),global_run_clock(o,15),$("#"+o+" span.resend").hide(),setTimeout(function(){$("#"+o+" span.resend").show()},12e4),c=$("#"+t),building_id=a.builderId,a.otp){var r=a.otp.toString().split("");4==r.length&&(c.find("input[name=otp_contactform\\[\\]]:eq(0)").val(r[0]),c.find("input[name=otp_contactform\\[\\]]:eq(1)").val(r[1]),c.find("input[name=otp_contactform\\[\\]]:eq(2)").val(r[2]),c.find("input[name=otp_contactform\\[\\]]:eq(3)").val(r[3]))}else c.find("input[name=otp_contactform\\[\\]]:eq(0)").val(""),c.find("input[name=otp_contactform\\[\\]]:eq(1)").val(""),c.find("input[name=otp_contactform\\[\\]]:eq(2)").val(""),c.find("input[name=otp_contactform\\[\\]]:eq(3)").val("")}else helperJS.alertBox("error",a.message);$("#loaderBox").hide()}})},checkPWALogin=function(t,e){$("header .topNav ul li.login").mouseover(function(){if($("#dev_pwa_menuitems li").length>0)return!1;var i={async:!0,crossDomain:!0,xhrFields:{withCredentials:!0},url:t,method:"GET",headers:{"Content-Type":"application/json"}};$.ajax(i).done(function(t){BindProfileMenuData(t,e)}).fail(function(t,e){console.log(t),console.log(e)})})};var globalfn={init:function(){if(isMobileBrowser()){if($("#myVideo").on("ended",function(){$(".bannerBox .videoBox .btnBox").addClass("active")}),$(".flexFormBox").length<=0)return"function"==typeof getLmsCountryLocation&&getLmsCountryLocation(),!1;$(".callFlexBox .icon-close").on("click",function(){$(".callFlexBox").addClass("hide")}),$("#flexWhatsapp").on("click",function(){if(chatBot.active){const t=helperJS.getCookie("_selcity");const e="Hi Square Yards"+(t&&null!=t.name?" "+t.name:"")+", help me get started!";window.open("https://api.whatsapp.com/send?phone="+chatBot.number+"&text="+e,"_blank")}else globalfn.loadctamobileform("flexWhatsapp")}),$("#flexMeeting").on("click",function(){globalfn.loadctamobileform("flexMeeting")}),$("#flexCallback").on("click",function(){globalfn.loadctamobileform("flexCallback")})}else{let t=0;$(window).resize(function(){$(window).height()<768?$("body").addClass("freePossition"):$("body").removeClass("freePossition")}),$("#myVideo").on("ended",function(){$(".bannerBox .videoBox .btnBox").addClass("active")}),$(window).scroll(function(){$(this).scrollTop()>20&&0==t&&$(".meriwalihomestoryVideo").length<=0&&($(".navPanel,.intercomCloseBtn").addClass("active"),$(".intercom").removeClass("active"),$(".intercom").click())}),$(".intercom").on("click",function(){if(t=1,$(".navPanel,.intercomCloseBtn").addClass("active"),$(".intercom").removeClass("active"),$(".formBox.intercomFormBox").find("div.whatsappOpenForm").length>0)return!1;$.ajax({async:!0,data:JSON.stringify({pageCategory1:$(".formBox.intercomFormBox").attr("pageCategory1"),pageCategory2:$(".formBox.intercomFormBox").attr("pageCategory2"),pageCategory3:$(".formBox.intercomFormBox").attr("pageCategory3")}),dataType:"html",contentType:"application/json",success:function(t,e){$(".formBox.intercomFormBox").html(t),pluginfn.init("ClientCallForm",!0),"function"==typeof initializeContactForm_desktop&&initializeContactForm_desktop(),initializeChatForm(_cappurl,_apikey)},error:function(t){console.log(t)},type:"POST",url:"/getctadesktopform"})}),$(".intercomCloseBtn").on("click",function(){t=1,$(".navPanel,.intercomCloseBtn,.intercomFormBox.active").removeClass("active"),$(".intercom").addClass("active")}),$(".navPanel .link1").on("click",function(){$(".navPanel,.whatsappOpenForm,.meetingOpenForm").removeClass("active"),$(".intercomFormBox,.callbackOpenForm").addClass("active")}),$(".navPanel .link2").on("click",function(){$(".navPanel,.whatsappOpenForm,.callbackOpenForm").removeClass("active"),$(".intercomFormBox,.meetingOpenForm").addClass("active"),$("#ClientCallForm_location").length>0&&googlePlacesAutocomplete.init("ClientCallForm_location")}),$(".navPanel .link3").on("click",function(){if(chatBot.active){const t=helperJS.getCookie("_selcity");const e="Hi Square Yards"+(t&&null!=t.name?" "+t.name:"")+", help me get started!";window.open("https://api.whatsapp.com/send?phone="+chatBot.number+"&text="+e,"_blank")}else $(".navPanel,.meetingOpenForm,.callbackOpenForm").removeClass("active"),$(".intercomFormBox,.whatsappOpenForm").addClass("active")})}$("#youtubePopupOpen").on("click",function(){$("#youtube").attr("src")||$("#youtube").attr("src",$(this).data("source")),$("#youtube")[0].src=$(this).data("source")+"?autoplay=1",$(".youtubePopUp").addClass("active")}),$(".youtubePopUp .youtubeVideo .close").on("click",function(){$(".youtubePopUp").removeClass("active"),$("#youtube")[0].src+="?autoplay=0"})},loadctamobileform:function(t){if($(".flexFormBox").find("div.whatsappForm").length>0)return globalfn.ctamobilecallbaack(t),!1;$.ajax({async:!0,data:JSON.stringify({pageCategory1:$(".flexFormBox").attr("pageCategory1"),pageCategory2:$(".flexFormBox").attr("pageCategory2"),pageCategory3:$(".flexFormBox").attr("pageCategory3")}),dataType:"html",contentType:"application/json",success:function(e,i){$(".flexFormBox").html(e),pluginfn.init("ClientCallForm",!0),globalfn.ctamobilecallbaack(t),"function"==typeof initializeContactForm_mobile&&initializeContactForm_mobile(),initializeChatForm(_cappurl,_apikey)},error:function(t){console.log(t)},type:"POST",url:"/getctamobileform"})},ctamobilecallbaack:function(t){"flexWhatsapp"==t&&($(".overlayCTA,.whatsappForm,.bottomCTA em.icon-close").addClass("active"),$(".bottomCTA").addClass("activeWhatsapp"),$(".meetingForm,.callbackForm").removeClass("active"),$("#flexMeeting,#flexCallback").addClass("disabled"),$("#flexWhatsapp").removeClass("disabled")),"flexMeeting"==t&&($(".overlayCTA,.meetingForm,.bottomCTA em.icon-close").addClass("active"),$(".bottomCTA").addClass("activeMeeting"),$(".whatsappForm,.callbackForm").removeClass("active"),$("#flexWhatsapp,#flexCallback").addClass("disabled"),$("#flexMeeting").removeClass("disabled"),$("#ClientCallForm_location").length>0&&googlePlacesAutocomplete.init("ClientCallForm_location")),"flexCallback"==t&&($(".overlayCTA,.callbackForm,.bottomCTA em.icon-close").addClass("active"),$(".bottomCTA").addClass("activeCallback"),$(".meetingForm,.whatsappForm").removeClass("active"),$("#flexWhatsapp,#flexMeeting").addClass("disabled"),$("#flexCallback").removeClass("disabled")),$(".bottomCTA em.icon-close").on("click",function(){$(".overlayCTA,.whatsappForm,.meetingForm,.callbackForm,.bottomCTA em.icon-close").removeClass("active"),$("#flexWhatsapp,#flexMeeting,#flexCallback").removeClass("disabled")}),$(".closePop em.icon-close").on("click",function(){$(".bottomCTA .callFlexBox,.flexFormBox").css("display","inherit"),$(".bottomCTA .showProfile").removeClass("profileBox"),$(".bottomCTA .showProfile").removeClass("active"),$(".bottomCTA em").removeClass("profileCase"),$(".bottomCTA .formBoxx form").removeAttr("style")})},searchfocus:!1,loadheadercitypopup:function(){if($("#dev_headeroverlay").off("click"),$("#dev_headeroverlay").on("click",function(){return $("#gblCityBox, .gblOverflow, #gblCityBtn").toggleClass("active"),$("#dev_headeroverlay").toggle(),!1}),$("#gblCityBox").length>0){if($("#gblCityBox, .gblOverflow, #gblCityBtn, #dev_headercitypopup_container").toggleClass("active"),$("#dev_headeroverlay").toggle(),$("li.headercityli").show(),1==$("#SearchMobile").hasClass("partialactive"))"new_project"==$("input[name='mobileSearchCityType']").val()?($("li.sec_cities").hide(),$("li.headercityli[connectid=0]").hide(),$("li.headercityli[dotcomCityId=0]").hide()):$("li.headercityli[connectid=0]").hide();return!1}$("em.icon-close.gblCtyBoHdrEm").off("click"),$("em.icon-close.gblCtyBoHdrEm").on("click",function(){$("#gblCityBox, .gblOverflow, #gblCityBtn, #dev_headercitypopup_container").removeClass("active")}),$.ajax({async:!0,dataType:"html",contentType:"application/json",data:JSON.stringify({page:$("header").attr("page"),currenturl:window.location.href}),success:function(t,e){$("#dev_headercitypopup_container").html(t),helperJS.initializeLazyLoad(),$.getScript("/assets/lib/js/jquery-ui.js",function(){$.getScript("/assets/js/header_city_popup.js",function(){($("#gblCityBox, .gblOverflow, #gblCityBtn, #dev_headercitypopup_container").addClass("active"),$("em.icon-close.gblCtyBoHdrEm").off("click"),$("em.icon-close.gblCtyBoHdrEm").on("click",function(){$("#gblCityBox, .gblOverflow, #gblCityBtn, #dev_headercitypopup_container").removeClass("active")}),$("#dev_headeroverlay").show(),$(".gblCityBox .gblCityBody .box .formRadioBox").off("click"),$(".gblCityBox .gblCityBody .box .formRadioBox").on("click",function(){var t=$(this).attr("redirecturl");null!=t&&null!=t&&""!=t&&(window.location.href=t)}),$("a.redirect_to").off("click"),$("a.redirect_to").on("click",function(){if(1==$("#SearchMobile").hasClass("partialactive")){$("#loaderBox").show();var t=$(this).attr("cityid"),e=$("input[name='mobileSearchCityType']").val();"new_project"!=e&&"homeInterior"!=e&&(t=$(this).closest("li").attr("connectid"));var i=$(this).attr("cityname");$("input[name='mobileSearchCityId']").val(t),$("input[name='mobileSearchCityName']").val(i),$("#gblCityBox , #dev_headercitypopup_container").removeClass("active"),$("#SearchMobile").removeClass("partialactive"),$("#SearchMobile").addClass("active"),$("#dev_headeroverlay").css("display","none"),newMobileSearchProp.showFilterPopup()}else{var o=$(this).attr("redirect_to");window.location.href=o}}),$("li.headercityli").show(),1==$("#SearchMobile").hasClass("partialactive"))&&("new_project"==$("input[name='mobileSearchCityType']").val()?($("li.sec_cities").hide(),$("li.headercityli[connectid=0]").hide(),$("li.headercityli[dotcomCityId=0]").hide()):$("li.headercityli[connectid=0]").hide());var t=helperJS.getCookie("_selcity");null!=t&&null!=t&&null!=t.name&&"dubai"==t.name.toLowerCase()&&$("#Emirates").click()})})},error:function(t){console.log(t)},type:"POST",url:"/getheadercitypopup"})},setUserHeaderMenu:function(){$.ajax({url:baseUrl+"user/session",method:"GET",success:function(t){console.log("render logedin user details"),$(".headerProfileBoxParent").html(t.header),helperJS.initializeLazyLoad()},error:function(){}})}};function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t}).apply(this,arguments)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}$(document).ready(function(){$("#conversionTab1").on("click",function(t){$(".conversionTab, .conversionLinkBox").removeClass("active"),$("#conversionTab1,#conversionLinkBox1").addClass("active"),t.stopPropagation()}),$("#conversionTab2").on("click",function(t){$(".conversionTab, .conversionLinkBox").removeClass("active"),$("#conversionTab2,#conversionLinkBox2").addClass("active"),t.stopPropagation()}),$("#conversionTab3").on("click",function(t){$(".conversionTab, .conversionLinkBox").removeClass("active"),$("#conversionTab3,#conversionLinkBox3").addClass("active"),t.stopPropagation()}),$("#conversionTab4").on("click",function(t){$(".conversionTab, .conversionLinkBox").removeClass("active"),$("#conversionTab4,#conversionLinkBox4").addClass("active"),t.stopPropagation()}),$("#conversionTab5").on("click",function(t){$(".conversionTab, .conversionLinkBox").removeClass("active"),$("#conversionTab5,#conversionLinkBox5").addClass("active"),t.stopPropagation()}),setTimeout(function(){if(0==$("#gblCityBtn").hasClass("dev_globalcountry")){var t=helperJS.getCookie("_selcity");if(null!=t&&t.id>0){let e=t.name.includes("-")?helperJS.ucfirst(t.name.split("-")[0])+" "+helperJS.ucfirst(t.name.split("-")[1]):helperJS.ucfirst(t.name);null!=e&&""!=e&&$("#gblCityBtn").text(e)}null!=t&&null!=t&&null!=t.country&&"UAE"==t.country&&$("#Global_Header_Homeloan a").attr("href","https://capital.squareyards.ae")}},2e3),$("#allCites").off("click"),$(document).on("click","#allCites",function(){$(".syAlCtyBx,.syLeftNav,body").addClass("active"),$("header .navToggle #nav-toggle,.navOverlay,header nav").removeClass("active")}),$(".syLeftNav .syNavBody ul li.next").on("click",function(){$(".syLeftNav .syNavSubBody").addClass("active")}),$(".syLeftNav .syNavBody .syHeading em").on("click",function(){$(".syAlCtyBx,.syLeftNav,body").removeClass("active")}),$(".syLeftNav .syNavSubBody .syHeading em").on("click",function(){$(".syLeftNav .syNavSubBody,.syLeftNav .syTab").removeClass("active")}),$(".syLeftNav .syOverlay").on("click",function(){$("body,.syLeftNav,.syLeftNav .syNavSubBody").removeClass("active")}),$(".syLeftNav .syNavBody ul li.mumbai").on("click",function(){$(".syLeftNav .syTab.mumbai").addClass("active")}),$(".syLeftNav .syNavBody ul li.noida").on("click",function(){$(".syLeftNav .syTab.noida").addClass("active")}),$(".syLeftNav .syNavBody ul li.gurgaon").on("click",function(){$(".syLeftNav .syTab.gurgaon").addClass("active")}),$(".syLeftNav .syNavBody ul li.pune").on("click",function(){$(".syLeftNav .syTab.pune").addClass("active")}),$(".syLeftNav .syNavBody ul li.bangalore").on("click",function(){$(".syLeftNav .syTab.bangalore").addClass("active")}),$(".syLeftNav .syNavBody ul li.hyderabad").on("click",function(){$(".syLeftNav .syTab.hyderabad").addClass("active")}),$(".syLeftNav .syNavBody ul li.kolkata").on("click",function(){$(".syLeftNav .syTab.kolkata").addClass("active")}),$(".syLeftNav .syNavBody ul li.chennai").on("click",function(){$(".syLeftNav .syTab.chennai").addClass("active")}),$(".syLeftNav .syNavBody ul li.lucknow").on("click",function(){$(".syLeftNav .syTab.lucknow").addClass("active")}),$(".syLeftNav .syNavBody ul li.vizag").on("click",function(){$(".syLeftNav .syTab.vizag").addClass("active")}),$(".syLeftNav .syNavBody ul li.jaipur").on("click",function(){$(".syLeftNav .syTab.jaipur").addClass("active")}),$(".syLeftNav .syNavBody ul li.vijayawada").on("click",function(){$(".syLeftNav .syTab.vijayawada").addClass("active")}),$(".syLeftNav .syNavBody ul li.ghaziabad").on("click",function(){$(".syLeftNav .syTab.ghaziabad").addClass("active")}),$(".syLeftNav .syNavBody ul li.faridabad").on("click",function(){$(".syLeftNav .syTab.faridabad").addClass("active")}),$(".syLeftNav .syNavBody ul li.dehradun").on("click",function(){$(".syLeftNav .syTab.dehradun").addClass("active")}),$(".syLeftNav .syNavBody ul li.bhopal").on("click",function(){$(".syLeftNav .syTab.bhopal").addClass("active")}),$(".syLeftNav .syNavBody ul li.goa").on("click",function(){$(".syLeftNav .syTab.goa").addClass("active")}),$(".syLeftNav .syNavBody ul li.patna").on("click",function(){$(".syLeftNav .syTab.patna").addClass("active")}),$(".syLeftNav .syNavBody ul li.guwahati").on("click",function(){$(".syLeftNav .syTab.guwahati").addClass("active")}),$(".syLeftNav .syNavBody ul li.bhubaneswar").on("click",function(){$(".syLeftNav .syTab.bhubaneswar").addClass("active")}),$(".syLeftNav .syNavBody ul li.rajkot").on("click",function(){$(".syLeftNav .syTab.rajkot").addClass("active")}),$(".syLeftNav .syNavBody ul li.allahabad").on("click",function(){$(".syLeftNav .syTab.allahabad").addClass("active")}),$(".syLeftNav .syNavBody ul li.agra").on("click",function(){$(".syLeftNav .syTab.agra").addClass("active")}),$(".syLeftNav .syNavBody ul li.chandigarh").on("click",function(){$(".syLeftNav .syTab.chandigarh").addClass("active")});var t=!1;$("#nav-toggle,.hdrNvTglBo").off("click"),$("#nav-toggle,.hdrNvTglBo").on("click",function(){if(isMobileBrowser()&&0==t){t=!0;var e=$("header").attr("page"),i={};"DSE"!=e&&"DSE-SEARCH"!=e&&"LISTING"!=e||(i={navsrc:"new-header"}),$.ajax({async:!0,data:JSON.stringify(i),dataType:"html",contentType:"application/json",success:function(t,e){$.ajax({async:!0,data:JSON.stringify({headerSrc:"outer"}),dataType:"html",contentType:"application/json",success:function(t,e){$("body").append(t),$.getScript("/assets/js/layout-header-nav.js",function(){windowloadfn.init()})},error:function(t){console.log(t)},type:"POST",url:"/getheadernavform"}),$("#dev_layout_header_nav").html(t),$(".navOverlay").toggleClass("active"),$(".hdrNav,.hdrNvTglSpn, body").toggleClass("active")},error:function(t){console.log(t)},complete:function(){},type:"POST",url:"/getnavpopup"})}else $(".navOverlay").toggleClass("active"),$(".hdrNav,.hdrNvTglSpn, body").toggleClass("active")});let e=$("div.loaderBox img");function i(){var t=navigator.userAgent.toLowerCase();return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|ipad|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))}e&&e.addClass("lazy"),$("header nav ul li.toolsBox small").on("click",function(){$("header nav ul li.toolsBox").toggleClass("active"),$("header nav ul li.solutionsBox").removeClass("active")}),$("header nav ul li.solutionsBox small").on("click",function(){$("header nav ul li.solutionsBox").toggleClass("active"),$("header nav ul li.toolsBox").removeClass("active")}),$("header nav ul li.more ul li#recentProjectlink").on("click",function(){$(".pannel#recentProjects, body").addClass("active"),$(".menuOverLayBox").addClass("active"),$("#nav-toggle,.cityContainer").removeClass("active")}),$(".floatTag").on("click",function(){$(".outerPannel").addClass("active"),$(".menuOverLayBox").addClass("active"),$(this).hide()}),$(".menuOverLayBox, .outerPannel .pannelHeader em, .pannel#recentProjects .pannelHeader em").on("mousedown",function(){$(".outerPannel, .pannel#recentProjects, header nav, small#nav-toggle, body").removeClass("active"),$(".menuOverLayBox").removeClass("active"),$(".floatTag").removeAttr("style")}),$("#profileBox").on("click",function(){$(".profileDropdown").addClass("active")}),$(".navOverlay").on("click",function(){$(".navOverlay,#nav-toggle, header nav, body,.profileDropdown").removeClass("active")}),$("body").on("click",".profileDropdown .profileHeading .close",function(){$(".profileDropdown").removeClass("active")}),$(".shortlistDiv").on("click",function(){$("header #nav-toggle,nav").removeClass("active")}),$("#blogSlider").length>0&&$("#blogSlider").owlCarousel({loop:!1,nav:!1,dots:!0,lazyLoad:!0,responsive:{0:{items:1},600:{items:2,margin:15},1000:{items:1}}}),$("#SearchParent .saerchFocus").on("focus",function(t){if(screen.width<800||1==i()){var e=$(this).attr("id");e={searchtext:"new_project",SaleSearchTxt:"resale",RentSearchTxt:"rental",agentSearchText:"agent",homeLoanSearchText:"homeLoan",homeInteriorSearchText:"homeInterior"}[e],t.preventDefault(),0==globalfn.searchfocus&&newMobileSearchProp.init(e)}}),$("#newProjectHomeMob ,#resaleHomeMob, #rentHomeMob , #agentHomeMob,#homeLoanHomeMob,#homeInteriorHomeMob,#dseagentNP,#dseagentSale,#dseagentRent,#dsenpSale,#dsenpRent,#dsenpAgent,#rrDSEnp,#rrDSEsale,#rrDSErent,#rrDSEagent").on("click",function(t){if(screen.width<800||1==i()){var e=$(this).attr("id");"dseagentNP"==e||"dseagentSale"==e||"dseagentRent"==e?(console.log("in if case"),$(".gblHalfPopup.agentDSEfilterBy").removeClass("active")):"dsenpSale"==e||"dsenpRent"==e||"dsenpAgent"==e?$(".gblHalfPopup.npDSEfilterBy").removeClass("active"):"rrDSEnp"!=e&&"rrDSEsale"!=e&&"rrDSErent"!=e&&"rrDSEagent"!=e||$(".gblHalfPopup.rrDSEfilterBy").removeClass("active");e={newProjectHomeMob:"new_project",resaleHomeMob:"resale",rentHomeMob:"rental",agentHomeMob:"agent",homeLoanHomeMob:"homeLoan",homeInteriorHomeMob:"homeInterior",dseagentNP:"new_project",dseagentSale:"resale",dseagentRent:"rental",dsenpSale:"resale",dsenpRent:"rental",dsenpAgent:"agent",rrDSEnp:"new_project",rrDSEsale:"resale",rrDSErent:"rental",rrDSEagent:"agent"}[e],t.preventDefault(),0==globalfn.searchfocus&&newMobileSearchProp.init(e)}}),$(".newMobileSearchBtn").on("click",function(t){t.preventDefault(),isMobileBrowser&&$("body").append($("<link/>",{href:"/assets/css/new_search_popup.css",rel:"preload",type:"text/css"}),$("<link/>",{href:"/assets/css/new_search_popup.css",rel:"stylesheet",type:"text/css",defer:""})),newMobileSearchProp.init()}),$("#gblCityBtn").off("click"),$("#gblCityBtn").on("click",function(t){t.stopPropagation(),isMobileBrowser&&$("body").append($("<link/>",{href:"/assets/css/header_city_popup.css",rel:"preload",type:"text/css"}),$("<link/>",{href:"/assets/css/header_city_popup.css",rel:"stylesheet",type:"text/css",defer:""})),globalfn.loadheadercitypopup()}),globalfn.init(),$(document).on("click",".changeArea",function(t){t.preventDefault(),t.stopPropagation(),$(".Area-menu").removeClass("active"),$(this).find(".Area-menu").addClass("active")}),$(document).on("click",function(t){var e=$(".changeArea");e===t.target||e.has(t.target).length||$(".Area-menu").removeClass("active")}),$(document).on("click",".Area-menu ul li",function(t){$(this).addClass("active");var e=$(this).data("value");$(this).closest("li.areaMain").find("span.changeArea").find("span.sqfitSelect").html(e),$(this).closest("ul.areaDetails").find("span.changeArea").find("span.sqfitSelect").html(e);var i=$(this).closest("li.areaMain").find("span.avArea").data("value")||$(this).closest("ul.areaDetails").find("span.avArea").data("value")||$(this).closest("div.sqfit").find("span.avArea").data("value"),o=0;if(i>0)switch(e){case"Sq.Ft":o=i,$(this).closest("li.areaMain").find("span.avArea").html(o),$(this).closest("ul.areaDetails").find("span.avArea").html(o),$(this).closest("div.sqfit").find("span.avArea").html(o);break;case"Sq.Yd.":o=(i/9).toFixed(2),$(this).closest("li.areaMain").find("span.avArea").html(o),$(this).closest("ul.areaDetails").find("span.avArea").html(o),$(this).closest("div.sqfit").find("span.avArea").html(o);break;case"Sq.Mt.":o=(i/10.7).toFixed(2),$(this).closest("li.areaMain").find("span.avArea").html(o),$(this).closest("ul.areaDetails").find("span.avArea").html(o),$(this).closest("div.sqfit").find("span.avArea").html(o);break;case"Acre":o=(i/43560).toFixed(2),$(this).closest("li.areaMain").find("span.avArea").html(o),$(this).closest("ul.areaDetails").find("span.avArea").html(o),$(this).closest("div.sqfit").find("span.avArea").html(o)}setTimeout(()=>{$(this).closest(".Area-menu").removeClass("active")},0)}),$(document).on("change",".areaDropdown",function(t){var e=$(this).find("#areaSelect option:selected").text();$(this).closest("li.areaMain").find("span.changeArea").find("span.sqfitSelect").html(e),$(this).closest("ul.areaDetails").find("span.changeArea").find("span.sqfitSelect").html(e);var i=$(this).closest("li.areaMain").find("span.avArea").data("value")||$(this).closest("ul.areaDetails").find("span.avArea").data("value")||$(this).closest("div.sqfit").find("span.avArea").data("value"),o=0;if(i>0)switch(e){case"Sq.Ft":o=i,$(this).closest("li.areaMain").find("span.avArea").html(o),$(this).closest("ul.areaDetails").find("span.avArea").html(o),$(this).closest("div.sqfit").find("span.avArea").html(o);break;case"Sq.Yd.":o=(i/9).toFixed(2),$(this).closest("li.areaMain").find("span.avArea").html(o),$(this).closest("ul.areaDetails").find("span.avArea").html(o),$(this).closest("div.sqfit").find("span.avArea").html(o);break;case"Sq.Mt.":o=(i/10.7).toFixed(2),$(this).closest("li.areaMain").find("span.avArea").html(o),$(this).closest("ul.areaDetails").find("span.avArea").html(o),$(this).closest("div.sqfit").find("span.avArea").html(o);break;case"Acre":o=(i/43560).toFixed(2),$(this).closest("li.areaMain").find("span.avArea").html(o),$(this).closest("ul.areaDetails").find("span.avArea").html(o),$(this).closest("div.sqfit").find("span.avArea").html(o)}}),$("body").on("click","ul.lgnDsktpDrpdwnUl li.userLogout",function(){_paq.push(["resetUserId"]),_paq.push(["appendToTrackingUrl","new_visit=1"]),_paq.push(["trackPageView"]),_paq.push(["appendToTrackingUrl",""]),window.location.href=baseUrl+"user/logout"}),globalfn.setUserHeaderMenu()}),$("header nav").hover(function(){$("#gblCityBox , #dev_headercitypopup_container").removeClass("active"),$("#dev_headeroverlay").css("display","none"),$(".header .gblCityDropdown .dropdown-toggle").removeClass("active")}),$(document).mouseup(function(t){var e=$(".profileDropdown");e.is(t.target)||0!==e.has(t.target).length||e.removeClass("active")}),function(t,e,i){function o(t,e){return typeof t===e}function n(t,e){if("object"==typeof t)for(var i in t)l(t,i)&&n(i,t[i]);else{var o=(t=t.toLowerCase()).split("."),s=r[o[0]];if(2==o.length&&(s=s[o[1]]),void 0!==s)return r;e="function"==typeof e?e():e,1==o.length?r[o[0]]=e:(!r[o[0]]||r[o[0]]instanceof Boolean||(r[o[0]]=new Boolean(r[o[0]])),r[o[0]][o[1]]=e),function(t){var e=h.className,i=r._config.classPrefix||"";if(d&&(e=e.baseVal),r._config.enableJSClass){var o=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");e=e.replace(o,"$1"+i+"js$2")}r._config.enableClasses&&(e+=" "+i+t.join(" "+i),d?h.className.baseVal=e:h.className=e)}([(e&&0!=e?"":"no-")+o.join("-")]),r._trigger(t,e)}return r}var s=[],a={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var i=this;setTimeout(function(){e(i[t])},0)},addTest:function(t,e,i){s.push({name:t,fn:e,options:i})},addAsyncTest:function(t){s.push({name:null,fn:t})}},r=function(){};r.prototype=a,r=new r;var l,c=[],h=e.documentElement,d="svg"===h.nodeName.toLowerCase();!function(){var t={}.hasOwnProperty;l=o(t,"undefined")||o(t.call,"undefined")?function(t,e){return e in t&&o(t.constructor.prototype[e],"undefined")}:function(e,i){return t.call(e,i)}}(),a._l={},a.on=function(t,e){this._l[t]||(this._l[t]=[]),this._l[t].push(e),r.hasOwnProperty(t)&&setTimeout(function(){r._trigger(t,r[t])},0)},a._trigger=function(t,e){if(this._l[t]){var i=this._l[t];setTimeout(function(){var t;for(t=0;t<i.length;t++)(0,i[t])(e)},0),delete this._l[t]}},r._q.push(function(){a.addTest=n}),r.addAsyncTest(function(){function t(t,e,i){function o(e){var o=!(!e||"load"!==e.type)&&1==s.width;n(t,"webp"===t&&o?new Boolean(o):o),i&&i(e)}var s=new Image;s.onerror=o,s.onload=o,s.src=e}var e=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],i=e.shift();t(i.name,i.uri,function(i){if(i&&"load"===i.type)for(var o=0;o<e.length;o++)t(e[o].name,e[o].uri)})}),function(){var t,e,i,n,a,l;for(var h in s)if(s.hasOwnProperty(h)){if(t=[],(e=s[h]).name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(n=o(e.fn,"function")?e.fn():e.fn,a=0;a<t.length;a++)1===(l=t[a].split(".")).length?r[l[0]]=n:(!r[l[0]]||r[l[0]]instanceof Boolean||(r[l[0]]=new Boolean(r[l[0]])),r[l[0]][l[1]]=n),c.push((n?"":"no-")+l.join("-"))}}(),delete a.addTest,delete a.addAsyncTest;for(var u=0;u<r._q.length;u++)r._q[u]();t.Modernizr=r}(window,document),function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.LazyLoad=e()}(this,function(){"use strict";var t="undefined"!=typeof window,e=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),i=t&&"IntersectionObserver"in window,o=t&&"classList"in document.createElement("p"),n={elements_selector:"img",container:e||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},s=function(t,e){var i,o=new t(e);try{i=new CustomEvent("LazyLoad::Initialized",{detail:{instance:o}})}catch(t){(i=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:o})}window.dispatchEvent(i)},a=function(t,e){return t.getAttribute("data-"+e)},r=function(t,e,i){var o="data-"+e;null!==i?t.setAttribute(o,i):t.removeAttribute(o)},l=function(t){return"true"===a(t,"was-processed")},c=function(t,e){return r(t,"ll-timeout",e)},h=function(t){return a(t,"ll-timeout")},d=function(t,e){t&&t(e)},u=function(t,e){t._loadingCount+=e,0===t._elements.length&&0===t._loadingCount&&d(t._settings.callback_finish)},p=function(t){for(var e,i=[],o=0;e=t.children[o];o+=1)"SOURCE"===e.tagName&&i.push(e);return i},m=function(t,e,i){i&&t.setAttribute(e,i)},f=function(t,e){m(t,"sizes",a(t,e.data_sizes)),m(t,"srcset",a(t,e.data_srcset)),m(t,"src",a(t,e.data_src))},g={IMG:function(t,e){var i=t.parentNode;i&&"PICTURE"===i.tagName&&p(i).forEach(function(t){f(t,e)}),f(t,e)},IFRAME:function(t,e){m(t,"src",a(t,e.data_src))},VIDEO:function(t,e){p(t).forEach(function(t){m(t,"src",a(t,e.data_src))}),m(t,"src",a(t,e.data_src)),t.load()}},_=function(t,e){o?t.classList.add(e):t.className+=(t.className?" ":"")+e},v=function(t,e,i){t.addEventListener(e,i)},y=function(t,e,i){t.removeEventListener(e,i)},w=function(t,e,i){y(t,"load",e),y(t,"loadeddata",e),y(t,"error",i)},b=function(t,e,i){var n=i._settings,s=e?n.class_loaded:n.class_error,a=e?n.callback_loaded:n.callback_error,r=t.target;!function(t,e){o?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")}(r,n.class_loading),_(r,s),d(a,r),u(i,-1)},x=["IMG","IFRAME","VIDEO"],C=function(t,e){var i=e._observer;P(t,e),i&&e._settings.auto_unobserve&&i.unobserve(t)},$=function(t){var e=h(t);e&&(clearTimeout(e),c(t,null))},P=function(t,e,i){var o=e._settings;!i&&l(t)||(x.indexOf(t.tagName)>-1&&(function(t,e){var i=function i(n){b(n,!0,e),w(t,i,o)},o=function o(n){b(n,!1,e),w(t,i,o)};!function(t,e,i){v(t,"load",e),v(t,"loadeddata",e),v(t,"error",i)}(t,i,o)}(t,e),_(t,o.class_loading)),function(t,e){var i,o,n=e._settings,s=t.tagName,r=g[s];if(r)return r(t,n),u(e,1),void(e._elements=(i=e._elements,o=t,i.filter(function(t){return t!==o})));!function(t,e){var i=a(t,e.data_src),o=a(t,e.data_bg);i&&(t.style.backgroundImage='url("'.concat(i,'")')),o&&(t.style.backgroundImage=o)}(t,n)}(t,e),function(t){r(t,"was-processed","true")}(t),d(o.callback_reveal,t),d(o.callback_set,t))},S=function(t){return!!i&&(t._observer=new IntersectionObserver(function(e){e.forEach(function(e){return function(t){return t.isIntersecting||t.intersectionRatio>0}(e)?function(t,e){var i=e._settings;d(i.callback_enter,t),i.load_delay?function(t,e){var i=e._settings.load_delay,o=h(t);o||(o=setTimeout(function(){C(t,e),$(t)},i),c(t,o))}(t,e):C(t,e)}(e.target,t):function(t,e){var i=e._settings;d(i.callback_exit,t),i.load_delay&&$(t)}(e.target,t)})},{root:(e=t._settings).container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),!0);var e},L=["IMG","IFRAME"],k=function(t,e){return function(t){return t.filter(function(t){return!l(t)})}((i=t||function(t){return t.container.querySelectorAll(t.elements_selector)}(e),Array.prototype.slice.call(i)));var i},T=function(t,e){this._settings=function(t){return _extends({},n,t)}(t),this._loadingCount=0,S(this),this.update(e)};return T.prototype={update:function(t){var i,o=this,n=this._settings;this._elements=k(t,n),!e&&this._observer?(n.use_native&&"loading"in HTMLImageElement.prototype&&((i=this)._elements.forEach(function(t){-1!==L.indexOf(t.tagName)&&(t.setAttribute("loading","lazy"),P(t,i))}),this._elements=k(t,n)),this._elements.forEach(function(t){o._observer.observe(t)})):this.loadAll()},destroy:function(){var t=this;this._observer&&(this._elements.forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function(t,e){P(t,this,e)},loadAll:function(){var t=this;this._elements.forEach(function(e){C(e,t)})}},t&&function(t,e){if(e)if(e.length)for(var i,o=0;i=e[o];o+=1)s(t,i);else s(t,e)}(T,window.lazyLoadOptions),T}),function(t,e,i,o){function n(e,i){this.settings=null,this.options=t.extend({},n.Defaults,i),this.$element=t(e),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},t.each(["onResize","onThrottledResize"],t.proxy(function(e,i){this._handlers[i]=t.proxy(this[i],this)},this)),t.each(n.Plugins,t.proxy(function(t,e){this._plugins[t.charAt(0).toLowerCase()+t.slice(1)]=new e(this)},this)),t.each(n.Workers,t.proxy(function(e,i){this._pipe.push({filter:i.filter,run:t.proxy(i.run,this)})},this)),this.setup(),this.initialize()}n.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:e,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},n.Width={Default:"default",Inner:"inner",Outer:"outer"},n.Type={Event:"event",State:"state"},n.Plugins={},n.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(t){var e=this.settings.margin||"",i=!this.settings.autoWidth,o=this.settings.rtl,n={width:"auto","margin-left":o?e:"","margin-right":o?"":e};!i&&this.$stage.children().css(n),t.css=n}},{filter:["width","items","settings"],run:function(t){var e=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,o=this._items.length,n=!this.settings.autoWidth,s=[];for(t.items={merge:!1,width:e};o--;)i=this._mergers[o],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,t.items.merge=i>1||t.items.merge,s[o]=n?e*i:this._items[o].width();this._widths=s}},{filter:["items","settings"],run:function(){var e=[],i=this._items,o=this.settings,n=Math.max(2*o.items,4),s=2*Math.ceil(i.length/2),a=o.loop&&i.length?o.rewind?n:Math.max(n,s):0,r="",l="";for(a/=2;a>0;)e.push(this.normalize(e.length/2,!0)),r+=i[e[e.length-1]][0].outerHTML,e.push(this.normalize(i.length-1-(e.length-1)/2,!0)),l=i[e[e.length-1]][0].outerHTML+l,a-=1;this._clones=e,t(r).addClass("cloned").appendTo(this.$stage),t(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var t=this.settings.rtl?1:-1,e=this._clones.length+this._items.length,i=-1,o=0,n=0,s=[];++i<e;)o=s[i-1]||0,n=this._widths[this.relative(i)]+this.settings.margin,s.push(o+n*t);this._coordinates=s}},{filter:["width","items","settings"],run:function(){var t=this.settings.stagePadding,e=this._coordinates,i={width:Math.ceil(Math.abs(e[e.length-1]))+2*t,"padding-left":t||"","padding-right":t||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(t){var e=this._coordinates.length,i=!this.settings.autoWidth,o=this.$stage.children();if(i&&t.items.merge)for(;e--;)t.css.width=this._widths[this.relative(e)],o.eq(e).css(t.css);else i&&(t.css.width=t.items.width,o.css(t.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(t){t.current=t.current?this.$stage.children().index(t.current):0,t.current=Math.max(this.minimum(),Math.min(this.maximum(),t.current)),this.reset(t.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var t,e,i,o,n=this.settings.rtl?1:-1,s=2*this.settings.stagePadding,a=this.coordinates(this.current())+s,r=a+this.width()*n,l=[];for(i=0,o=this._coordinates.length;i<o;i++)t=this._coordinates[i-1]||0,e=Math.abs(this._coordinates[i])+s*n,(this.op(t,"<=",a)&&this.op(t,">",r)||this.op(e,"<",a)&&this.op(e,">",r))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],n.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=t("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(t("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},n.prototype.initializeItems=function(){var e=this.$element.find(".owl-item");if(e.length)return this._items=e.get().map(function(e){return t(e)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},n.prototype.initialize=function(){var t,e,i;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(t=this.$element.find("img"),e=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:o,i=this.$element.children(e).width(),t.length&&i<=0&&this.preloadAutoWidthImages(t));this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},n.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},n.prototype.setup=function(){var e=this.viewport(),i=this.options.responsive,o=-1,n=null;i?(t.each(i,function(t){t<=e&&t>o&&(o=Number(t))}),"function"==typeof(n=t.extend({},this.options,i[o])).stagePadding&&(n.stagePadding=n.stagePadding()),delete n.responsive,n.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+o))):n=t.extend({},this.options),this.trigger("change",{property:{name:"settings",value:n}}),this._breakpoint=o,this.settings=n,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},n.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},n.prototype.prepare=function(e){var i=this.trigger("prepare",{content:e});return i.data||(i.data=t("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(e)),this.trigger("prepared",{content:i.data}),i.data},n.prototype.update=function(){for(var e=0,i=this._pipe.length,o=t.proxy(function(t){return this[t]},this._invalidated),n={};e<i;)(this._invalidated.all||t.grep(this._pipe[e].filter,o).length>0)&&this._pipe[e].run(n),e++;this._invalidated={},!this.is("valid")&&this.enter("valid")},n.prototype.width=function(t){switch(t=t||n.Width.Default){case n.Width.Inner:case n.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},n.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},n.prototype.onThrottledResize=function(){e.clearTimeout(this.resizeTimer),this.resizeTimer=e.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},n.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},n.prototype.registerEventHandlers=function(){t.support.transition&&this.$stage.on(t.support.transition.end+".owl.core",t.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(e,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",t.proxy(this.onDragEnd,this)))},n.prototype.onDragStart=function(e){var o=null;3!==e.which&&(t.support.transform?o={x:(o=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===o.length?12:4],y:o[16===o.length?13:5]}:(o=this.$stage.position(),o={x:this.settings.rtl?o.left+this.$stage.width()-this.width()+this.settings.margin:o.left,y:o.top}),this.is("animating")&&(t.support.transform?this.animate(o.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===e.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=t(e.target),this._drag.stage.start=o,this._drag.stage.current=o,this._drag.pointer=this.pointer(e),t(i).on("mouseup.owl.core touchend.owl.core",t.proxy(this.onDragEnd,this)),t(i).one("mousemove.owl.core touchmove.owl.core",t.proxy(function(e){var o=this.difference(this._drag.pointer,this.pointer(e));t(i).on("mousemove.owl.core touchmove.owl.core",t.proxy(this.onDragMove,this)),Math.abs(o.x)<Math.abs(o.y)&&this.is("valid")||(e.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},n.prototype.onDragMove=function(t){var e=null,i=null,o=null,n=this.difference(this._drag.pointer,this.pointer(t)),s=this.difference(this._drag.stage.start,n);this.is("dragging")&&(t.preventDefault(),this.settings.loop?(e=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-e,s.x=((s.x-e)%i+i)%i+e):(e=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),o=this.settings.pullDrag?-1*n.x/5:0,s.x=Math.max(Math.min(s.x,e+o),i+o)),this._drag.stage.current=s,this.animate(s.x))},n.prototype.onDragEnd=function(e){var o=this.difference(this._drag.pointer,this.pointer(e)),n=this._drag.stage.current,s=o.x>0^this.settings.rtl?"left":"right";t(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==o.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(n.x,0!==o.x?s:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=s,(Math.abs(o.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},n.prototype.closest=function(e,i){var n=-1,s=this.width(),a=this.coordinates();return this.settings.freeDrag||t.each(a,t.proxy(function(t,r){return"left"===i&&e>r-30&&e<r+30?n=t:"right"===i&&e>r-s-30&&e<r-s+30?n=t+1:this.op(e,"<",r)&&this.op(e,">",a[t+1]!==o?a[t+1]:r-s)&&(n="left"===i?t+1:t),-1===n},this)),this.settings.loop||(this.op(e,">",a[this.minimum()])?n=e=this.minimum():this.op(e,"<",a[this.maximum()])&&(n=e=this.maximum())),n},n.prototype.animate=function(e){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),t.support.transform3d&&t.support.transition?this.$stage.css({transform:"translate3d("+e+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):i?this.$stage.animate({left:e+"px"},this.speed(),this.settings.fallbackEasing,t.proxy(this.onTransitionEnd,this)):this.$stage.css({left:e+"px"})},n.prototype.is=function(t){return this._states.current[t]&&this._states.current[t]>0},n.prototype.current=function(t){if(t===o)return this._current;if(0===this._items.length)return o;if(t=this.normalize(t),this._current!==t){var e=this.trigger("change",{property:{name:"position",value:t}});e.data!==o&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},n.prototype.invalidate=function(e){return"string"===t.type(e)&&(this._invalidated[e]=!0,this.is("valid")&&this.leave("valid")),t.map(this._invalidated,function(t,e){return e})},n.prototype.reset=function(t){(t=this.normalize(t))!==o&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},n.prototype.normalize=function(t,e){var i=this._items.length,n=e?0:this._clones.length;return!this.isNumeric(t)||i<1?t=o:(t<0||t>=i+n)&&(t=((t-n/2)%i+i)%i+n/2),t},n.prototype.relative=function(t){return t-=this._clones.length/2,this.normalize(t,!0)},n.prototype.maximum=function(t){var e,i,o,n=this.settings,s=this._coordinates.length;if(n.loop)s=this._clones.length/2+this._items.length-1;else if(n.autoWidth||n.merge){if(e=this._items.length)for(i=this._items[--e].width(),o=this.$element.width();e--&&!((i+=this._items[e].width()+this.settings.margin)>o););s=e+1}else s=n.center?this._items.length-1:this._items.length-n.items;return t&&(s-=this._clones.length/2),Math.max(s,0)},n.prototype.minimum=function(t){return t?0:this._clones.length/2},n.prototype.items=function(t){return t===o?this._items.slice():(t=this.normalize(t,!0),this._items[t])},n.prototype.mergers=function(t){return t===o?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},n.prototype.clones=function(e){var i=this._clones.length/2,n=i+this._items.length,s=function(t){return t%2==0?n+t/2:i-(t+1)/2};return e===o?t.map(this._clones,function(t,e){return s(e)}):t.map(this._clones,function(t,i){return t===e?s(i):null})},n.prototype.speed=function(t){return t!==o&&(this._speed=t),this._speed},n.prototype.coordinates=function(e){var i,n=1,s=e-1;return e===o?t.map(this._coordinates,t.proxy(function(t,e){return this.coordinates(e)},this)):(this.settings.center?(this.settings.rtl&&(n=-1,s=e+1),i=this._coordinates[e],i+=(this.width()-i+(this._coordinates[s]||0))/2*n):i=this._coordinates[s]||0,i=Math.ceil(i))},n.prototype.duration=function(t,e,i){return 0===i?0:Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(i||this.settings.smartSpeed)},n.prototype.to=function(t,e){var i=this.current(),o=null,n=t-this.relative(i),s=(n>0)-(n<0),a=this._items.length,r=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(n)>a/2&&(n+=-1*s*a),(o=(((t=i+n)-r)%a+a)%a+r)!==t&&o-n<=l&&o-n>0&&(i=o-n,t=o,this.reset(i))):this.settings.rewind?t=(t%(l+=1)+l)%l:t=Math.max(r,Math.min(l,t)),this.speed(this.duration(i,t,e)),this.current(t),this.isVisible()&&this.update()},n.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},n.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},n.prototype.onTransitionEnd=function(t){if(t!==o&&(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},n.prototype.viewport=function(){var o;return this.options.responsiveBaseElement!==e?o=t(this.options.responsiveBaseElement).width():e.innerWidth?o=e.innerWidth:i.documentElement&&i.documentElement.clientWidth?o=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),o},n.prototype.replace=function(e){this.$stage.empty(),this._items=[],e&&(e=e instanceof jQuery?e:t(e)),this.settings.nestedItemSelector&&(e=e.find("."+this.settings.nestedItemSelector)),e.filter(function(){return 1===this.nodeType}).each(t.proxy(function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},n.prototype.add=function(e,i){var n=this.relative(this._current);i=i===o?this._items.length:this.normalize(i,!0),e=e instanceof jQuery?e:t(e),this.trigger("add",{content:e,position:i}),e=this.prepare(e),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(e),0!==this._items.length&&this._items[i-1].after(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(e),this._items.splice(i,0,e),this._mergers.splice(i,0,1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[n]&&this.reset(this._items[n].index()),this.invalidate("items"),this.trigger("added",{content:e,position:i})},n.prototype.remove=function(t){(t=this.normalize(t,!0))!==o&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},n.prototype.preloadAutoWidthImages=function(e){e.each(t.proxy(function(e,i){this.enter("pre-loading"),i=t(i),t(new Image).one("load",t.proxy(function(t){i.attr("src",t.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))},this))},n.prototype.destroy=function(){for(var o in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),t(i).off(".owl.core"),!1!==this.settings.responsive&&(e.clearTimeout(this.resizeTimer),this.off(e,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[o].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},n.prototype.op=function(t,e,i){var o=this.settings.rtl;switch(e){case"<":return o?t>i:t<i;case">":return o?t<i:t>i;case">=":return o?t<=i:t>=i;case"<=":return o?t>=i:t<=i}},n.prototype.on=function(t,e,i,o){t.addEventListener?t.addEventListener(e,i,o):t.attachEvent&&t.attachEvent("on"+e,i)},n.prototype.off=function(t,e,i,o){t.removeEventListener?t.removeEventListener(e,i,o):t.detachEvent&&t.detachEvent("on"+e,i)},n.prototype.trigger=function(e,i,o,s,a){var r={item:{count:this._items.length,index:this.current()}},l=t.camelCase(t.grep(["on",e,o],function(t){return t}).join("-").toLowerCase()),c=t.Event([e,"owl",o||"carousel"].join(".").toLowerCase(),t.extend({relatedTarget:this},r,i));return this._supress[e]||(t.each(this._plugins,function(t,e){e.onTrigger&&e.onTrigger(c)}),this.register({type:n.Type.Event,name:e}),this.$element.trigger(c),this.settings&&"function"==typeof this.settings[l]&&this.settings[l].call(this,c)),c},n.prototype.enter=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){this._states.current[e]===o&&(this._states.current[e]=0),this._states.current[e]++},this))},n.prototype.leave=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){this._states.current[e]--},this))},n.prototype.register=function(e){if(e.type===n.Type.Event){if(t.event.special[e.name]||(t.event.special[e.name]={}),!t.event.special[e.name].owl){var i=t.event.special[e.name]._default;t.event.special[e.name]._default=function(t){return!i||!i.apply||t.namespace&&-1!==t.namespace.indexOf("owl")?t.namespace&&t.namespace.indexOf("owl")>-1:i.apply(this,arguments)},t.event.special[e.name].owl=!0}}else e.type===n.Type.State&&(this._states.tags[e.name]?this._states.tags[e.name]=this._states.tags[e.name].concat(e.tags):this._states.tags[e.name]=e.tags,this._states.tags[e.name]=t.grep(this._states.tags[e.name],t.proxy(function(i,o){return t.inArray(i,this._states.tags[e.name])===o},this)))},n.prototype.suppress=function(e){t.each(e,t.proxy(function(t,e){this._supress[e]=!0},this))},n.prototype.release=function(e){t.each(e,t.proxy(function(t,e){delete this._supress[e]},this))},n.prototype.pointer=function(t){var i={x:null,y:null};return(t=(t=t.originalEvent||t||e.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i},n.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))},n.prototype.difference=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},t.fn.owlCarousel=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=t(this),s=o.data("owl.carousel");s||(s=new n(this,"object"==typeof e&&e),o.data("owl.carousel",s),t.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(e,i){s.register({type:n.Type.Event,name:i}),s.$element.on(i+".owl.carousel.core",t.proxy(function(t){t.namespace&&t.relatedTarget!==this&&(this.suppress([i]),s[i].apply(this,[].slice.call(arguments,1)),this.release([i]))},s))})),"string"==typeof e&&"_"!==e.charAt(0)&&s[e].apply(s,i)})},t.fn.owlCarousel.Constructor=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,o){var n=function(e){this._core=e,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={autoRefresh:!0,autoRefreshInterval:500},n.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=e.setInterval(t.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},n.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},n.prototype.destroy=function(){var t,i;for(t in e.clearInterval(this._interval),this._handlers)this._core.$element.off(t,this._handlers[t]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoRefresh=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,o){var n=function(e){this._core=e,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":t.proxy(function(e){if(e.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(e.property&&"position"==e.property.name||"initialized"==e.type)){var i=this._core.settings,o=i.center&&Math.ceil(i.items/2)||i.items,n=i.center&&-1*o||0,s=(e.property&&void 0!==e.property.value?e.property.value:this._core.current())+n,a=this._core.clones().length,r=t.proxy(function(t,e){this.load(e)},this);for(i.lazyLoadEager>0&&(o+=i.lazyLoadEager,i.loop&&(s-=i.lazyLoadEager,o++));n++<o;)this.load(a/2+this._core.relative(s)),a&&t.each(this._core.clones(this._core.relative(s)),r),s++}},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={lazyLoad:!1,lazyLoadEager:0},n.prototype.load=function(i){var o=this._core.$stage.children().eq(i),n=o&&o.find(".owl-lazy");!n||t.inArray(o.get(0),this._loaded)>-1||(n.each(t.proxy(function(i,o){var n,s=t(o),a=e.devicePixelRatio>1&&s.attr("data-src-retina")||s.attr("data-src")||s.attr("data-srcset");this._core.trigger("load",{element:s,url:a},"lazy"),s.is("img")?s.one("load.owl.lazy",t.proxy(function(){s.css("opacity",1),this._core.trigger("loaded",{element:s,url:a},"lazy")},this)).attr("src",a):s.is("source")?s.one("load.owl.lazy",t.proxy(function(){this._core.trigger("loaded",{element:s,url:a},"lazy")},this)).attr("srcset",a):((n=new Image).onload=t.proxy(function(){s.css({"background-image":'url("'+a+'")',opacity:"1"}),this._core.trigger("loaded",{element:s,url:a},"lazy")},this),n.src=a)},this)),this._loaded.push(o.get(0)))},n.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Lazy=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,o){var n=function(i){this._core=i,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&"position"===t.property.name&&this.update()},this),"loaded.owl.lazy":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var o=this;t(e).on("load",function(){o._core.settings.autoHeight&&o.update()}),t(e).resize(function(){o._core.settings.autoHeight&&(null!=o._intervalId&&clearTimeout(o._intervalId),o._intervalId=setTimeout(function(){o.update()},250))})};n.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},n.prototype.update=function(){var e=this._core._current,i=e+this._core.settings.items,o=this._core.settings.lazyLoad,n=this._core.$stage.children().toArray().slice(e,i),s=[],a=0;t.each(n,function(e,i){s.push(t(i).height())}),(a=Math.max.apply(null,s))<=1&&o&&this._previousHeight&&(a=this._previousHeight),this._previousHeight=a,this._core.$stage.parent().height(a).addClass(this._core.settings.autoHeightClass)},n.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoHeight=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,o){var n=function(e){this._core=e,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.video&&this.isInFullScreen()&&t.preventDefault()},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"===t.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,t(e.content)))}},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",t.proxy(function(t){this.play(t)},this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(t,e){var i=t.attr("data-vimeo-id")?"vimeo":t.attr("data-vzaar-id")?"vzaar":"youtube",o=t.attr("data-vimeo-id")||t.attr("data-youtube-id")||t.attr("data-vzaar-id"),n=t.attr("data-width")||this._core.settings.videoWidth,s=t.attr("data-height")||this._core.settings.videoHeight,a=t.attr("href");if(!a)throw new Error("Missing video URL.");if((o=a.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(o[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(o[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}o=o[6],this._videos[a]={type:i,id:o,width:n,height:s},e.attr("data-video",a),this.thumbnail(t,this._videos[a])},n.prototype.thumbnail=function(e,i){var o,n,s=i.width&&i.height?"width:"+i.width+"px;height:"+i.height+"px;":"",a=e.find("img"),r="src",l="",c=this._core.settings,h=function(i){'<div class="owl-video-play-icon"></div>',o=c.lazyLoad?t("<div/>",{class:"owl-video-tn "+l,srcType:i}):t("<div/>",{class:"owl-video-tn",style:"opacity:1;background-image:url("+i+")"}),e.after(o),e.after('<div class="owl-video-play-icon"></div>')};if(e.wrap(t("<div/>",{class:"owl-video-wrapper",style:s})),this._core.settings.lazyLoad&&(r="data-src",l="owl-lazy"),a.length)return h(a.attr(r)),a.remove(),!1;"youtube"===i.type?(n="//img.youtube.com/vi/"+i.id+"/hqdefault.jpg",h(n)):"vimeo"===i.type?t.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){n=t[0].thumbnail_large,h(n)}}):"vzaar"===i.type&&t.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){n=t.framegrab_url,h(n)}})},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},n.prototype.play=function(e){var i,o=t(e.target).closest("."+this._core.settings.itemClass),n=this._videos[o.attr("data-video")],s=n.width||"100%",a=n.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),o=this._core.items(this._core.relative(o.index())),this._core.reset(o.index()),(i=t('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",a),i.attr("width",s),"youtube"===n.type?i.attr("src","//www.youtube.com/embed/"+n.id+"?autoplay=1&rel=0&v="+n.id):"vimeo"===n.type?i.attr("src","//player.vimeo.com/video/"+n.id+"?autoplay=1"):"vzaar"===n.type&&i.attr("src","//view.vzaar.com/"+n.id+"/player?autoplay=true"),t(i).wrap('<div class="owl-video-frame" />').insertAfter(o.find(".owl-video")),this._playing=o.addClass("owl-video-playing"))},n.prototype.isInFullScreen=function(){var e=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return e&&t(e).parent().hasClass("owl-video-frame")},n.prototype.destroy=function(){var t,e;for(t in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,o){var n=function(e){this.core=e,this.core.options=t.extend({},n.Defaults,this.core.options),this.swapping=!0,this.previous=o,this.next=o,this.handlers={"change.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":t.proxy(function(t){t.namespace&&(this.swapping="translated"==t.type)},this),"translate.owl.carousel":t.proxy(function(t){t.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};n.Defaults={animateOut:!1,animateIn:!1},n.prototype.swap=function(){if(1===this.core.settings.items&&t.support.animation&&t.support.transition){this.core.speed(0);var e,i=t.proxy(this.clear,this),o=this.core.$stage.children().eq(this.previous),n=this.core.$stage.children().eq(this.next),s=this.core.settings.animateIn,a=this.core.settings.animateOut;this.core.current()!==this.previous&&(a&&(e=this.core.coordinates(this.previous)-this.core.coordinates(this.next),o.one(t.support.animation.end,i).css({left:e+"px"}).addClass("animated owl-animated-out").addClass(a)),s&&n.one(t.support.animation.end,i).addClass("animated owl-animated-in").addClass(s))}},n.prototype.clear=function(e){t(e.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},n.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Animate=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,o){var n=function(e){this._core=e,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":t.proxy(function(t){t.namespace&&"settings"===t.property.name?this._core.settings.autoplay?this.play():this.stop():t.namespace&&"position"===t.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":t.proxy(function(t,e,i){t.namespace&&this.play(e,i)},this),"stop.owl.autoplay":t.proxy(function(t){t.namespace&&this.stop()},this),"mouseover.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=t.extend({},n.Defaults,this._core.options)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype._next=function(o){this._call=e.setTimeout(t.proxy(this._next,this,o),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(o||this._core.settings.autoplaySpeed)},n.prototype.read=function(){return(new Date).getTime()-this._time},n.prototype.play=function(i,o){var n;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,n=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):e.clearTimeout(this._call),this._time+=this.read()%i-n,this._timeout=i,this._call=e.setTimeout(t.proxy(this._next,this,o),i-n)},n.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,e.clearTimeout(this._call),this._core.leave("rotating"))},n.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,e.clearTimeout(this._call))},n.prototype.destroy=function(){var t,e;for(t in this.stop(),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,o){"use strict";var n=function(e){this._core=e,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":t.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+t(e.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,0,this._templates.pop())},this),"remove.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,1)},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&this.draw()},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this.$element.on(this._handlers)};n.Defaults={nav:!1,navText:['<span aria-label="Previous"></span>','<span aria-label="Next"></span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},n.prototype.initialize=function(){var e,i=this._core.settings;for(e in this._controls.$relative=(i.navContainer?t(i.navContainer):t("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=t("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",t.proxy(function(t){this.prev(i.navSpeed)},this)),this._controls.$next=t("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",t.proxy(function(t){this.next(i.navSpeed)},this)),i.dotsData||(this._templates=[t('<button role="button">').addClass(i.dotClass).append(t("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?t(i.dotsContainer):t("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",t.proxy(function(e){var o=t(e.target).parent().is(this._controls.$absolute)?t(e.target).index():t(e.target).parent().index();e.preventDefault(),this.to(o,i.dotsSpeed)},this)),this._overrides)this._core[e]=t.proxy(this[e],this)},n.prototype.destroy=function(){var t,e,i,o,n;for(t in n=this._core.settings,this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)"$relative"===e&&n.navContainer?this._controls[e].html(""):this._controls[e].remove();for(o in this.overides)this._core[o]=this._overrides[o];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},n.prototype.update=function(){var t,e,i=this._core.clones().length/2,o=i+this._core.items().length,n=this._core.maximum(!0),s=this._core.settings,a=s.center||s.autoWidth||s.dotsData?1:s.dotsEach||s.items;if("page"!==s.slideBy&&(s.slideBy=Math.min(s.slideBy,s.items)),s.dots||"page"==s.slideBy)for(this._pages=[],t=i,e=0,0;t<o;t++){if(e>=a||0===e){if(this._pages.push({start:Math.min(n,t-i),end:t-i+a-1}),Math.min(n,t-i)===n)break;e=0,0}e+=this._core.mergers(this._core.relative(t))}},n.prototype.draw=function(){var e,i=this._core.settings,o=this._core.items().length<=i.items,n=this._core.relative(this._core.current()),s=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||o),i.nav&&(this._controls.$previous.toggleClass("disabled",!s&&n<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!s&&n>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||o),i.dots&&(e=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==e?this._controls.$absolute.html(this._templates.join("")):e>0?this._controls.$absolute.append(new Array(e+1).join(this._templates[0])):e<0&&this._controls.$absolute.children().slice(e).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(t.inArray(this.current(),this._pages)).addClass("active"))},n.prototype.onTrigger=function(e){var i=this._core.settings;e.page={index:t.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},n.prototype.current=function(){var e=this._core.relative(this._core.current());return t.grep(this._pages,t.proxy(function(t,i){return t.start<=e&&t.end>=e},this)).pop()},n.prototype.getPosition=function(e){var i,o,n=this._core.settings;return"page"==n.slideBy?(i=t.inArray(this.current(),this._pages),o=this._pages.length,e?++i:--i,i=this._pages[(i%o+o)%o].start):(i=this._core.relative(this._core.current()),o=this._core.items().length,e?i+=n.slideBy:i-=n.slideBy),i},n.prototype.next=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!0),e)},n.prototype.prev=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!1),e)},n.prototype.to=function(e,i,o){var n;!o&&this._pages.length?(n=this._pages.length,t.proxy(this._overrides.to,this._core)(this._pages[(e%n+n)%n].start,i)):t.proxy(this._overrides.to,this._core)(e,i)},t.fn.owlCarousel.Constructor.Plugins.Navigation=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,o){"use strict";var n=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":t.proxy(function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&t(e).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=e.content}},this),"changed.owl.carousel":t.proxy(function(i){if(i.namespace&&"position"===i.property.name){var o=this._core.items(this._core.relative(this._core.current())),n=t.map(this._hashes,function(t,e){return t===o?e:null}).join();if(!n||e.location.hash.slice(1)===n)return;e.location.hash=n}},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this.$element.on(this._handlers),t(e).on("hashchange.owl.navigation",t.proxy(function(t){var i=e.location.hash.substring(1),o=this._core.$stage.children(),n=this._hashes[i]&&o.index(this._hashes[i]);void 0!==n&&n!==this._core.current()&&this._core.to(this._core.relative(n),!1,!0)},this))};n.Defaults={URLhashListener:!1},n.prototype.destroy=function(){var i,o;for(i in t(e).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(o in Object.getOwnPropertyNames(this))"function"!=typeof this[o]&&(this[o]=null)},t.fn.owlCarousel.Constructor.Plugins.Hash=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,o){function n(e,i){var n=!1,s=e.charAt(0).toUpperCase()+e.slice(1);return t.each((e+" "+r.join(s+" ")+s).split(" "),function(t,e){if(a[e]!==o)return n=!i||e,!1}),n}function s(t){return n(t,!0)}var a=t("<support>").get(0).style,r="Webkit Moz O ms".split(" "),l={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},c=function(){return!!n("transform")},h=function(){return!!n("perspective")},d=function(){return!!n("animation")};(function(){return!!n("transition")})()&&(t.support.transition=new String(s("transition")),t.support.transition.end=l.transition.end[t.support.transition]),d()&&(t.support.animation=new String(s("animation")),t.support.animation.end=l.animation.end[t.support.animation]),c()&&(t.support.transform=new String(s("transform")),t.support.transform3d=h())}(window.Zepto||window.jQuery,window,document);